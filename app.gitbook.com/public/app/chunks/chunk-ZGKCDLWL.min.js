import{a as ve}from"https://app.gitbook.com/public/app/chunks/chunk-HSIP75N4.min.js";import{a as Yt,c as lk}from"https://app.gitbook.com/public/app/chunks/chunk-7JB2LWEG.min.js";import{a as x,b as k,e as na,g as m,h as fk,i as me,l as f}from"https://app.gitbook.com/public/app/chunks/chunk-57DNK6NM.min.js";var Ec=m((iq,Cc)=>{"use strict";f();Cc.exports=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}});var Wn=m((sq,Mc)=>{"use strict";f();var Xk=Ec();function Pc(t){return Xk(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}Mc.exports=function(e){var r,n;return!(Pc(e)===!1||(r=e.constructor,typeof r!="function")||(n=r.prototype,Pc(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)}});var Vc=m((to,rn)=>{f();(function(t){var e=typeof to=="object"&&to,r=typeof rn=="object"&&rn&&rn.exports==e&&rn,n=typeof window=="object"&&window;(n.global===n||n.window===n)&&(t=n);var o=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,a=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,i=function(c){c=c.replace(o,function(p,d,y){return i(y)+d}).replace(a,"$2$1");for(var l="",h=c.length;h--;)l+=c.charAt(h);return l},s={version:"0.2.0",reverse:i};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)define(function(){return s});else if(e&&!e.nodeType)if(r)r.exports=s;else for(var u in s)s.hasOwnProperty(u)&&(e[u]=s[u]);else t.esrever=s})(to)});var ef=m((Aq,Qc)=>{"use strict";f();var Xa,Za,Xc,Zc;Xa="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";Za="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";Xc=new RegExp("^[^"+Za+"]*["+Xa+"]");Zc=new RegExp("^[^"+Xa+"]*["+Za+"]");function mT(t){return t=t.toString(),Zc.test(t)?"rtl":Xc.test(t)?"ltr":"neutral"}Qc.exports=mT});var kr=m(nn=>{"use strict";f();Object.defineProperty(nn,"__esModule",{value:!0});var tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf=!0,Zt=Symbol("STORE_KEY"),nf=Symbol("LEAF"),no=Symbol("undefined"),of=Symbol("null"),Qa=void 0,ro=new WeakMap;function gT(t,e){var r=!0,n=!1,o=void 0;try{for(var a=function(){var c=s.value,l=t[c];if(!l)throw new Error('Object does not have a property named "'+c+'".');t[c]=function(){for(var h=arguments.length,p=Array(h),d=0;d<h;d++)p[d]=arguments[d];if(!rf)return l.apply(this,p);ro.has(this)||ro.set(this,{noArgs:{},hasArgs:{}});var y=ro.get(this),g=y.noArgs,O=y.hasArgs,T=p.length!==0,S=void 0,C=[];if(T?(C=[c].concat(p),S=yT(O,C)):S=g[c],S!==Qa)return S===no?void 0:S;var I=l.apply(this,p),P=I===void 0?no:I;return T?vT(O,C,P):g[c]=P,I}},i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=!0)a()}catch(u){n=!0,o=u}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}}function yT(t,e){var r=!0,n=!1,o=void 0;try{for(var a=e[Symbol.iterator](),i;!(r=(i=a.next()).done);r=!0){var s=i.value;if(s===void 0?s=no:s===null&&(s=of),(typeof s>"u"?"undefined":tf(s))==="object"?t=t[Zt]&&t[Zt].get(s):t=t[s],t===Qa)return Qa}}catch(u){n=!0,o=u}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return t[nf]}function vT(t,e,r){var n=t,o=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),u;!(o=(u=s.next()).done);o=!0){var c=u.value;if(c===void 0?c=no:c===null&&(c=of),(typeof c>"u"?"undefined":tf(c))!=="object"){n[c]||(n[c]={}),n=n[c];continue}if(n[Zt]||(n[Zt]=new WeakMap),!n[Zt].has(c)){var l={};n[Zt].set(c,l),n=l;continue}n=n[Zt].get(c)}}catch(h){a=!0,i=h}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return n[nf]=r,t}function OT(){ro=new WeakMap}function _T(t){rf=t}nn.default=gT;nn.resetMemoization=OT;nn.useMemoization=_T});var gf=m((eL,mf)=>{f();var IT=Object.prototype.hasOwnProperty,RT=Object.prototype.toString;function wT(t){if(t==null)return!0;if(typeof t=="boolean")return!1;if(typeof t=="number")return t===0;if(typeof t=="string"||typeof t=="function"||Array.isArray(t))return t.length===0;if(t instanceof Error)return t.message==="";if(t.toString==RT)switch(t.toString()){case"[object File]":case"[object Map]":case"[object Set]":return t.size===0;case"[object Object]":{for(var e in t)if(IT.call(t,e))return!1;return!0}}return!1}mf.exports=wT});var uo=m((tL,yf)=>{f();function FT(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}yf.exports=FT});var Of=m((rL,vf)=>{f();function CT(){this.__data__=[],this.size=0}vf.exports=CT});var Tr=m((nL,_f)=>{f();function ET(t,e){return t===e||t!==t&&e!==e}_f.exports=ET});var on=m((oL,xf)=>{f();var PT=Tr();function MT(t,e){for(var r=t.length;r--;)if(PT(t[r][0],e))return r;return-1}xf.exports=MT});var kf=m((aL,bf)=>{f();var DT=on(),BT=Array.prototype,qT=BT.splice;function zT(t){var e=this.__data__,r=DT(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():qT.call(e,r,1),--this.size,!0}bf.exports=zT});var Sf=m((iL,Tf)=>{f();var LT=on();function KT(t){var e=this.__data__,r=LT(e,t);return r<0?void 0:e[r][1]}Tf.exports=KT});var Af=m((sL,Nf)=>{f();var jT=on();function VT(t){return jT(this.__data__,t)>-1}Nf.exports=VT});var Rf=m((uL,If)=>{f();var JT=on();function UT(t,e){var r=this.__data__,n=JT(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}If.exports=UT});var an=m((cL,wf)=>{f();var HT=Of(),$T=kf(),GT=Sf(),YT=Af(),WT=Rf();function Sr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sr.prototype.clear=HT;Sr.prototype.delete=$T;Sr.prototype.get=GT;Sr.prototype.has=YT;Sr.prototype.set=WT;wf.exports=Sr});var Cf=m((fL,Ff)=>{f();var XT=an();function ZT(){this.__data__=new XT,this.size=0}Ff.exports=ZT});var Pf=m((lL,Ef)=>{f();function QT(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}Ef.exports=QT});var Df=m((hL,Mf)=>{f();function eS(t){return this.__data__.get(t)}Mf.exports=eS});var qf=m((pL,Bf)=>{f();function tS(t){return this.__data__.has(t)}Bf.exports=tS});var ri=m((dL,zf)=>{f();var rS=typeof window=="object"&&window&&window.Object===Object&&window;zf.exports=rS});var ut=m((mL,Lf)=>{f();var nS=ri(),oS=typeof self=="object"&&self&&self.Object===Object&&self,aS=nS||oS||Function("return this")();Lf.exports=aS});var tr=m((gL,Kf)=>{f();var iS=ut(),sS=iS.Symbol;Kf.exports=sS});var Uf=m((yL,Jf)=>{f();var jf=tr(),Vf=Object.prototype,uS=Vf.hasOwnProperty,cS=Vf.toString,sn=jf?jf.toStringTag:void 0;function fS(t){var e=uS.call(t,sn),r=t[sn];try{t[sn]=void 0;var n=!0}catch(a){}var o=cS.call(t);return n&&(e?t[sn]=r:delete t[sn]),o}Jf.exports=fS});var $f=m((vL,Hf)=>{f();var lS=Object.prototype,hS=lS.toString;function pS(t){return hS.call(t)}Hf.exports=pS});var rr=m((OL,Wf)=>{f();var Gf=tr(),dS=Uf(),mS=$f(),gS="[object Null]",yS="[object Undefined]",Yf=Gf?Gf.toStringTag:void 0;function vS(t){return t==null?t===void 0?yS:gS:Yf&&Yf in Object(t)?dS(t):mS(t)}Wf.exports=vS});var mt=m((_L,Xf)=>{f();function OS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Xf.exports=OS});var co=m((xL,Zf)=>{f();var _S=rr(),xS=mt(),bS="[object AsyncFunction]",kS="[object Function]",TS="[object GeneratorFunction]",SS="[object Proxy]";function NS(t){if(!xS(t))return!1;var e=_S(t);return e==kS||e==TS||e==bS||e==SS}Zf.exports=NS});var el=m((bL,Qf)=>{f();var AS=ut(),IS=AS["__core-js_shared__"];Qf.exports=IS});var nl=m((kL,rl)=>{f();var ni=el(),tl=function(){var t=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function RS(t){return!!tl&&tl in t}rl.exports=RS});var oi=m((TL,ol)=>{f();var wS=Function.prototype,FS=wS.toString;function CS(t){if(t!=null){try{return FS.call(t)}catch(e){}try{return t+""}catch(e){}}return""}ol.exports=CS});var il=m((SL,al)=>{f();var ES=co(),PS=nl(),MS=mt(),DS=oi(),BS=/[\\^$.*+?()[\]{}|]/g,qS=/^\[object .+?Constructor\]$/,zS=Function.prototype,LS=Object.prototype,KS=zS.toString,jS=LS.hasOwnProperty,VS=RegExp("^"+KS.call(jS).replace(BS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JS(t){if(!MS(t)||PS(t))return!1;var e=ES(t)?VS:qS;return e.test(DS(t))}al.exports=JS});var ul=m((NL,sl)=>{f();function US(t,e){return t==null?void 0:t[e]}sl.exports=US});var jt=m((AL,cl)=>{f();var HS=il(),$S=ul();function GS(t,e){var r=$S(t,e);return HS(r)?r:void 0}cl.exports=GS});var fo=m((IL,fl)=>{f();var YS=jt(),WS=ut(),XS=YS(WS,"Map");fl.exports=XS});var un=m((RL,ll)=>{f();var ZS=jt(),QS=ZS(Object,"create");ll.exports=QS});var dl=m((wL,pl)=>{f();var hl=un();function eN(){this.__data__=hl?hl(null):{},this.size=0}pl.exports=eN});var gl=m((FL,ml)=>{f();function tN(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}ml.exports=tN});var vl=m((CL,yl)=>{f();var rN=un(),nN="__lodash_hash_undefined__",oN=Object.prototype,aN=oN.hasOwnProperty;function iN(t){var e=this.__data__;if(rN){var r=e[t];return r===nN?void 0:r}return aN.call(e,t)?e[t]:void 0}yl.exports=iN});var _l=m((EL,Ol)=>{f();var sN=un(),uN=Object.prototype,cN=uN.hasOwnProperty;function fN(t){var e=this.__data__;return sN?e[t]!==void 0:cN.call(e,t)}Ol.exports=fN});var bl=m((PL,xl)=>{f();var lN=un(),hN="__lodash_hash_undefined__";function pN(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lN&&e===void 0?hN:e,this}xl.exports=pN});var Tl=m((ML,kl)=>{f();var dN=dl(),mN=gl(),gN=vl(),yN=_l(),vN=bl();function Nr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nr.prototype.clear=dN;Nr.prototype.delete=mN;Nr.prototype.get=gN;Nr.prototype.has=yN;Nr.prototype.set=vN;kl.exports=Nr});var Al=m((DL,Nl)=>{f();var Sl=Tl(),ON=an(),_N=fo();function xN(){this.size=0,this.__data__={hash:new Sl,map:new(_N||ON),string:new Sl}}Nl.exports=xN});var Rl=m((BL,Il)=>{f();function bN(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}Il.exports=bN});var cn=m((qL,wl)=>{f();var kN=Rl();function TN(t,e){var r=t.__data__;return kN(e)?r[typeof e=="string"?"string":"hash"]:r.map}wl.exports=TN});var Cl=m((zL,Fl)=>{f();var SN=cn();function NN(t){var e=SN(this,t).delete(t);return this.size-=e?1:0,e}Fl.exports=NN});var Pl=m((LL,El)=>{f();var AN=cn();function IN(t){return AN(this,t).get(t)}El.exports=IN});var Dl=m((KL,Ml)=>{f();var RN=cn();function wN(t){return RN(this,t).has(t)}Ml.exports=wN});var ql=m((jL,Bl)=>{f();var FN=cn();function CN(t,e){var r=FN(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}Bl.exports=CN});var lo=m((VL,zl)=>{f();var EN=Al(),PN=Cl(),MN=Pl(),DN=Dl(),BN=ql();function Ar(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ar.prototype.clear=EN;Ar.prototype.delete=PN;Ar.prototype.get=MN;Ar.prototype.has=DN;Ar.prototype.set=BN;zl.exports=Ar});var Kl=m((JL,Ll)=>{f();var qN=an(),zN=fo(),LN=lo(),KN=200;function jN(t,e){var r=this.__data__;if(r instanceof qN){var n=r.__data__;if(!zN||n.length<KN-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new LN(n)}return r.set(t,e),this.size=r.size,this}Ll.exports=jN});var ho=m((UL,jl)=>{f();var VN=an(),JN=Cf(),UN=Pf(),HN=Df(),$N=qf(),GN=Kl();function Ir(t){var e=this.__data__=new VN(t);this.size=e.size}Ir.prototype.clear=JN;Ir.prototype.delete=UN;Ir.prototype.get=HN;Ir.prototype.has=$N;Ir.prototype.set=GN;jl.exports=Ir});var Jl=m((HL,Vl)=>{f();function YN(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}Vl.exports=YN});var ai=m(($L,Ul)=>{f();var WN=jt(),XN=function(){try{var t=WN(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();Ul.exports=XN});var po=m((GL,$l)=>{f();var Hl=ai();function ZN(t,e,r){e=="__proto__"&&Hl?Hl(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}$l.exports=ZN});var mo=m((YL,Gl)=>{f();var QN=po(),eA=Tr(),tA=Object.prototype,rA=tA.hasOwnProperty;function nA(t,e,r){var n=t[e];(!(rA.call(t,e)&&eA(n,r))||r===void 0&&!(e in t))&&QN(t,e,r)}Gl.exports=nA});var nr=m((WL,Yl)=>{f();var oA=mo(),aA=po();function iA(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;u===void 0&&(u=t[s]),o?aA(r,s,u):oA(r,s,u)}return r}Yl.exports=iA});var Xl=m((XL,Wl)=>{f();function sA(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}Wl.exports=sA});var gt=m((ZL,Zl)=>{f();function uA(t){return t!=null&&typeof t=="object"}Zl.exports=uA});var eh=m((QL,Ql)=>{f();var cA=rr(),fA=gt(),lA="[object Arguments]";function hA(t){return fA(t)&&cA(t)==lA}Ql.exports=hA});var fn=m((eK,nh)=>{f();var th=eh(),pA=gt(),rh=Object.prototype,dA=rh.hasOwnProperty,mA=rh.propertyIsEnumerable,gA=th(function(){return arguments}())?th:function(t){return pA(t)&&dA.call(t,"callee")&&!mA.call(t,"callee")};nh.exports=gA});var ct=m((tK,oh)=>{f();var yA=Array.isArray;oh.exports=yA});var ih=m((rK,ah)=>{f();function vA(){return!1}ah.exports=vA});var hn=m((ln,Rr)=>{f();var OA=ut(),_A=ih(),ch=typeof ln=="object"&&ln&&!ln.nodeType&&ln,sh=ch&&typeof Rr=="object"&&Rr&&!Rr.nodeType&&Rr,xA=sh&&sh.exports===ch,uh=xA?OA.Buffer:void 0,bA=uh?uh.isBuffer:void 0,kA=bA||_A;Rr.exports=kA});var pn=m((nK,fh)=>{f();var TA=9007199254740991,SA=/^(?:0|[1-9]\d*)$/;function NA(t,e){var r=typeof t;return e=e==null?TA:e,!!e&&(r=="number"||r!="symbol"&&SA.test(t))&&t>-1&&t%1==0&&t<e}fh.exports=NA});var go=m((oK,lh)=>{f();var AA=9007199254740991;function IA(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=AA}lh.exports=IA});var ph=m((aK,hh)=>{f();var RA=rr(),wA=go(),FA=gt(),CA="[object Arguments]",EA="[object Array]",PA="[object Boolean]",MA="[object Date]",DA="[object Error]",BA="[object Function]",qA="[object Map]",zA="[object Number]",LA="[object Object]",KA="[object RegExp]",jA="[object Set]",VA="[object String]",JA="[object WeakMap]",UA="[object ArrayBuffer]",HA="[object DataView]",$A="[object Float32Array]",GA="[object Float64Array]",YA="[object Int8Array]",WA="[object Int16Array]",XA="[object Int32Array]",ZA="[object Uint8Array]",QA="[object Uint8ClampedArray]",eI="[object Uint16Array]",tI="[object Uint32Array]",te={};te[$A]=te[GA]=te[YA]=te[WA]=te[XA]=te[ZA]=te[QA]=te[eI]=te[tI]=!0;te[CA]=te[EA]=te[UA]=te[PA]=te[HA]=te[MA]=te[DA]=te[BA]=te[qA]=te[zA]=te[LA]=te[KA]=te[jA]=te[VA]=te[JA]=!1;function rI(t){return FA(t)&&wA(t.length)&&!!te[RA(t)]}hh.exports=rI});var dn=m((iK,dh)=>{f();function nI(t){return function(e){return t(e)}}dh.exports=nI});var yo=m((mn,wr)=>{f();var oI=ri(),mh=typeof mn=="object"&&mn&&!mn.nodeType&&mn,gn=mh&&typeof wr=="object"&&wr&&!wr.nodeType&&wr,aI=gn&&gn.exports===mh,ii=aI&&oI.process,iI=function(){try{var t=gn&&gn.require&&gn.require("util").types;return t||ii&&ii.binding&&ii.binding("util")}catch(e){}}();wr.exports=iI});var vo=m((sK,vh)=>{f();var sI=ph(),uI=dn(),gh=yo(),yh=gh&&gh.isTypedArray,cI=yh?uI(yh):sI;vh.exports=cI});var si=m((uK,Oh)=>{f();var fI=Xl(),lI=fn(),hI=ct(),pI=hn(),dI=pn(),mI=vo(),gI=Object.prototype,yI=gI.hasOwnProperty;function vI(t,e){var r=hI(t),n=!r&&lI(t),o=!r&&!n&&pI(t),a=!r&&!n&&!o&&mI(t),i=r||n||o||a,s=i?fI(t.length,String):[],u=s.length;for(var c in t)(e||yI.call(t,c))&&!(i&&(c=="length"||o&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dI(c,u)))&&s.push(c);return s}Oh.exports=vI});var Oo=m((cK,_h)=>{f();var OI=Object.prototype;function _I(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||OI;return t===r}_h.exports=_I});var ui=m((fK,xh)=>{f();function xI(t,e){return function(r){return t(e(r))}}xh.exports=xI});var kh=m((lK,bh)=>{f();var bI=ui(),kI=bI(Object.keys,Object);bh.exports=kI});var Sh=m((hK,Th)=>{f();var TI=Oo(),SI=kh(),NI=Object.prototype,AI=NI.hasOwnProperty;function II(t){if(!TI(t))return SI(t);var e=[];for(var r in Object(t))AI.call(t,r)&&r!="constructor"&&e.push(r);return e}Th.exports=II});var yn=m((pK,Nh)=>{f();var RI=co(),wI=go();function FI(t){return t!=null&&wI(t.length)&&!RI(t)}Nh.exports=FI});var _o=m((dK,Ah)=>{f();var CI=si(),EI=Sh(),PI=yn();function MI(t){return PI(t)?CI(t):EI(t)}Ah.exports=MI});var Rh=m((mK,Ih)=>{f();var DI=nr(),BI=_o();function qI(t,e){return t&&DI(e,BI(e),t)}Ih.exports=qI});var Fh=m((gK,wh)=>{f();function zI(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}wh.exports=zI});var Eh=m((yK,Ch)=>{f();var LI=mt(),KI=Oo(),jI=Fh(),VI=Object.prototype,JI=VI.hasOwnProperty;function UI(t){if(!LI(t))return jI(t);var e=KI(t),r=[];for(var n in t)n=="constructor"&&(e||!JI.call(t,n))||r.push(n);return r}Ch.exports=UI});var Fr=m((vK,Ph)=>{f();var HI=si(),$I=Eh(),GI=yn();function YI(t){return GI(t)?HI(t,!0):$I(t)}Ph.exports=YI});var Dh=m((OK,Mh)=>{f();var WI=nr(),XI=Fr();function ZI(t,e){return t&&WI(e,XI(e),t)}Mh.exports=ZI});var ci=m((vn,Cr)=>{f();var QI=ut(),Lh=typeof vn=="object"&&vn&&!vn.nodeType&&vn,Bh=Lh&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,eR=Bh&&Bh.exports===Lh,qh=eR?QI.Buffer:void 0,zh=qh?qh.allocUnsafe:void 0;function tR(t,e){if(e)return t.slice();var r=t.length,n=zh?zh(r):new t.constructor(r);return t.copy(n),n}Cr.exports=tR});var fi=m((_K,Kh)=>{f();function rR(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}Kh.exports=rR});var Vh=m((xK,jh)=>{f();function nR(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a}jh.exports=nR});var li=m((bK,Jh)=>{f();function oR(){return[]}Jh.exports=oR});var xo=m((kK,Hh)=>{f();var aR=Vh(),iR=li(),sR=Object.prototype,uR=sR.propertyIsEnumerable,Uh=Object.getOwnPropertySymbols,cR=Uh?function(t){return t==null?[]:(t=Object(t),aR(Uh(t),function(e){return uR.call(t,e)}))}:iR;Hh.exports=cR});var Gh=m((TK,$h)=>{f();var fR=nr(),lR=xo();function hR(t,e){return fR(t,lR(t),e)}$h.exports=hR});var bo=m((SK,Yh)=>{f();function pR(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}Yh.exports=pR});var ko=m((NK,Wh)=>{f();var dR=ui(),mR=dR(Object.getPrototypeOf,Object);Wh.exports=mR});var hi=m((AK,Xh)=>{f();var gR=bo(),yR=ko(),vR=xo(),OR=li(),_R=Object.getOwnPropertySymbols,xR=_R?function(t){for(var e=[];t;)gR(e,vR(t)),t=yR(t);return e}:OR;Xh.exports=xR});var Qh=m((IK,Zh)=>{f();var bR=nr(),kR=hi();function TR(t,e){return bR(t,kR(t),e)}Zh.exports=TR});var pi=m((RK,ep)=>{f();var SR=bo(),NR=ct();function AR(t,e,r){var n=e(t);return NR(t)?n:SR(n,r(t))}ep.exports=AR});var di=m((wK,tp)=>{f();var IR=pi(),RR=xo(),wR=_o();function FR(t){return IR(t,wR,RR)}tp.exports=FR});var mi=m((FK,rp)=>{f();var CR=pi(),ER=hi(),PR=Fr();function MR(t){return CR(t,PR,ER)}rp.exports=MR});var op=m((CK,np)=>{f();var DR=jt(),BR=ut(),qR=DR(BR,"DataView");np.exports=qR});var ip=m((EK,ap)=>{f();var zR=jt(),LR=ut(),KR=zR(LR,"Promise");ap.exports=KR});var up=m((PK,sp)=>{f();var jR=jt(),VR=ut(),JR=jR(VR,"Set");sp.exports=JR});var fp=m((MK,cp)=>{f();var UR=jt(),HR=ut(),$R=UR(HR,"WeakMap");cp.exports=$R});var On=m((DK,yp)=>{f();var gi=op(),yi=fo(),vi=ip(),Oi=up(),_i=fp(),gp=rr(),Er=oi(),lp="[object Map]",GR="[object Object]",hp="[object Promise]",pp="[object Set]",dp="[object WeakMap]",mp="[object DataView]",YR=Er(gi),WR=Er(yi),XR=Er(vi),ZR=Er(Oi),QR=Er(_i),or=gp;(gi&&or(new gi(new ArrayBuffer(1)))!=mp||yi&&or(new yi)!=lp||vi&&or(vi.resolve())!=hp||Oi&&or(new Oi)!=pp||_i&&or(new _i)!=dp)&&(or=function(t){var e=gp(t),r=e==GR?t.constructor:void 0,n=r?Er(r):"";if(n)switch(n){case YR:return mp;case WR:return lp;case XR:return hp;case ZR:return pp;case QR:return dp}return e});yp.exports=or});var Op=m((BK,vp)=>{f();var ew=Object.prototype,tw=ew.hasOwnProperty;function rw(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&tw.call(t,"index")&&(r.index=t.index,r.input=t.input),r}vp.exports=rw});var xi=m((qK,_p)=>{f();var nw=ut(),ow=nw.Uint8Array;_p.exports=ow});var To=m((zK,bp)=>{f();var xp=xi();function aw(t){var e=new t.constructor(t.byteLength);return new xp(e).set(new xp(t)),e}bp.exports=aw});var Tp=m((LK,kp)=>{f();var iw=To();function sw(t,e){var r=e?iw(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}kp.exports=sw});var Np=m((KK,Sp)=>{f();var uw=/\w*$/;function cw(t){var e=new t.constructor(t.source,uw.exec(t));return e.lastIndex=t.lastIndex,e}Sp.exports=cw});var Fp=m((jK,wp)=>{f();var Ap=tr(),Ip=Ap?Ap.prototype:void 0,Rp=Ip?Ip.valueOf:void 0;function fw(t){return Rp?Object(Rp.call(t)):{}}wp.exports=fw});var bi=m((VK,Cp)=>{f();var lw=To();function hw(t,e){var r=e?lw(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}Cp.exports=hw});var Pp=m((JK,Ep)=>{f();var pw=To(),dw=Tp(),mw=Np(),gw=Fp(),yw=bi(),vw="[object Boolean]",Ow="[object Date]",_w="[object Map]",xw="[object Number]",bw="[object RegExp]",kw="[object Set]",Tw="[object String]",Sw="[object Symbol]",Nw="[object ArrayBuffer]",Aw="[object DataView]",Iw="[object Float32Array]",Rw="[object Float64Array]",ww="[object Int8Array]",Fw="[object Int16Array]",Cw="[object Int32Array]",Ew="[object Uint8Array]",Pw="[object Uint8ClampedArray]",Mw="[object Uint16Array]",Dw="[object Uint32Array]";function Bw(t,e,r){var n=t.constructor;switch(e){case Nw:return pw(t);case vw:case Ow:return new n(+t);case Aw:return dw(t,r);case Iw:case Rw:case ww:case Fw:case Cw:case Ew:case Pw:case Mw:case Dw:return yw(t,r);case _w:return new n;case xw:case Tw:return new n(t);case bw:return mw(t);case kw:return new n;case Sw:return gw(t)}}Ep.exports=Bw});var Bp=m((UK,Dp)=>{f();var qw=mt(),Mp=Object.create,zw=function(){function t(){}return function(e){if(!qw(e))return{};if(Mp)return Mp(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();Dp.exports=zw});var ki=m((HK,qp)=>{f();var Lw=Bp(),Kw=ko(),jw=Oo();function Vw(t){return typeof t.constructor=="function"&&!jw(t)?Lw(Kw(t)):{}}qp.exports=Vw});var Lp=m(($K,zp)=>{f();var Jw=On(),Uw=gt(),Hw="[object Map]";function $w(t){return Uw(t)&&Jw(t)==Hw}zp.exports=$w});var Jp=m((GK,Vp)=>{f();var Gw=Lp(),Yw=dn(),Kp=yo(),jp=Kp&&Kp.isMap,Ww=jp?Yw(jp):Gw;Vp.exports=Ww});var Hp=m((YK,Up)=>{f();var Xw=On(),Zw=gt(),Qw="[object Set]";function eF(t){return Zw(t)&&Xw(t)==Qw}Up.exports=eF});var Wp=m((WK,Yp)=>{f();var tF=Hp(),rF=dn(),$p=yo(),Gp=$p&&$p.isSet,nF=Gp?rF(Gp):tF;Yp.exports=nF});var td=m((XK,ed)=>{f();var oF=ho(),aF=Jl(),iF=mo(),sF=Rh(),uF=Dh(),cF=ci(),fF=fi(),lF=Gh(),hF=Qh(),pF=di(),dF=mi(),mF=On(),gF=Op(),yF=Pp(),vF=ki(),OF=ct(),_F=hn(),xF=Jp(),bF=mt(),kF=Wp(),TF=_o(),SF=Fr(),NF=1,AF=2,IF=4,Xp="[object Arguments]",RF="[object Array]",wF="[object Boolean]",FF="[object Date]",CF="[object Error]",Zp="[object Function]",EF="[object GeneratorFunction]",PF="[object Map]",MF="[object Number]",Qp="[object Object]",DF="[object RegExp]",BF="[object Set]",qF="[object String]",zF="[object Symbol]",LF="[object WeakMap]",KF="[object ArrayBuffer]",jF="[object DataView]",VF="[object Float32Array]",JF="[object Float64Array]",UF="[object Int8Array]",HF="[object Int16Array]",$F="[object Int32Array]",GF="[object Uint8Array]",YF="[object Uint8ClampedArray]",WF="[object Uint16Array]",XF="[object Uint32Array]",W={};W[Xp]=W[RF]=W[KF]=W[jF]=W[wF]=W[FF]=W[VF]=W[JF]=W[UF]=W[HF]=W[$F]=W[PF]=W[MF]=W[Qp]=W[DF]=W[BF]=W[qF]=W[zF]=W[GF]=W[YF]=W[WF]=W[XF]=!0;W[CF]=W[Zp]=W[LF]=!1;function So(t,e,r,n,o,a){var i,s=e&NF,u=e&AF,c=e&IF;if(r&&(i=o?r(t,n,o,a):r(t)),i!==void 0)return i;if(!bF(t))return t;var l=OF(t);if(l){if(i=gF(t),!s)return fF(t,i)}else{var h=mF(t),p=h==Zp||h==EF;if(_F(t))return cF(t,s);if(h==Qp||h==Xp||p&&!o){if(i=u||p?{}:vF(t),!s)return u?hF(t,uF(i,t)):lF(t,sF(i,t))}else{if(!W[h])return o?t:{};i=yF(t,h,s)}}a||(a=new oF);var d=a.get(t);if(d)return d;a.set(t,i),kF(t)?t.forEach(function(O){i.add(So(O,e,r,O,t,a))}):xF(t)&&t.forEach(function(O,T){i.set(T,So(O,e,r,T,t,a))});var y=c?u?dF:pF:u?SF:TF,g=l?void 0:y(t);return aF(g||t,function(O,T){g&&(T=O,O=t[T]),iF(i,T,So(O,e,r,T,t,a))}),i}ed.exports=So});var No=m((ZK,rd)=>{f();var ZF=rr(),QF=gt(),eC="[object Symbol]";function tC(t){return typeof t=="symbol"||QF(t)&&ZF(t)==eC}rd.exports=tC});var od=m((QK,nd)=>{f();var rC=ct(),nC=No(),oC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aC=/^\w*$/;function iC(t,e){if(rC(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nC(t)?!0:aC.test(t)||!oC.test(t)||e!=null&&t in Object(e)}nd.exports=iC});var sd=m((ej,id)=>{f();var ad=lo(),sC="Expected a function";function Ti(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(sC);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=t.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(Ti.Cache||ad),r}Ti.Cache=ad;id.exports=Ti});var cd=m((tj,ud)=>{f();var uC=sd(),cC=500;function fC(t){var e=uC(t,function(n){return r.size===cC&&r.clear(),n}),r=e.cache;return e}ud.exports=fC});var ld=m((rj,fd)=>{f();var lC=cd(),hC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pC=/\\(\\)?/g,dC=lC(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(hC,function(r,n,o,a){e.push(o?a.replace(pC,"$1"):n||r)}),e});fd.exports=dC});var yd=m((nj,gd)=>{f();var hd=tr(),mC=uo(),gC=ct(),yC=No(),vC=1/0,pd=hd?hd.prototype:void 0,dd=pd?pd.toString:void 0;function md(t){if(typeof t=="string")return t;if(gC(t))return mC(t,md)+"";if(yC(t))return dd?dd.call(t):"";var e=t+"";return e=="0"&&1/t==-vC?"-0":e}gd.exports=md});var Od=m((oj,vd)=>{f();var OC=yd();function _C(t){return t==null?"":OC(t)}vd.exports=_C});var ar=m((aj,_d)=>{f();var xC=ct(),bC=od(),kC=ld(),TC=Od();function SC(t,e){return xC(t)?t:bC(t,e)?[t]:kC(TC(t))}_d.exports=SC});var bd=m((ij,xd)=>{f();function NC(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}xd.exports=NC});var _n=m((sj,kd)=>{f();var AC=No(),IC=1/0;function RC(t){if(typeof t=="string"||AC(t))return t;var e=t+"";return e=="0"&&1/t==-IC?"-0":e}kd.exports=RC});var Si=m((uj,Td)=>{f();var wC=ar(),FC=_n();function CC(t,e){e=wC(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[FC(e[r++])];return r&&r==n?t:void 0}Td.exports=CC});var Nd=m((cj,Sd)=>{f();function EC(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}Sd.exports=EC});var Id=m((fj,Ad)=>{f();var PC=Si(),MC=Nd();function DC(t,e){return e.length<2?t:PC(t,MC(e,0,-1))}Ad.exports=DC});var wd=m((lj,Rd)=>{f();var BC=ar(),qC=bd(),zC=Id(),LC=_n();function KC(t,e){return e=BC(e,t),t=zC(t,e),t==null||delete t[LC(qC(e))]}Rd.exports=KC});var Ni=m((hj,Cd)=>{f();var jC=rr(),VC=ko(),JC=gt(),UC="[object Object]",HC=Function.prototype,$C=Object.prototype,Fd=HC.toString,GC=$C.hasOwnProperty,YC=Fd.call(Object);function WC(t){if(!JC(t)||jC(t)!=UC)return!1;var e=VC(t);if(e===null)return!0;var r=GC.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Fd.call(r)==YC}Cd.exports=WC});var Pd=m((pj,Ed)=>{f();var XC=Ni();function ZC(t){return XC(t)?void 0:t}Ed.exports=ZC});var qd=m((dj,Bd)=>{f();var Md=tr(),QC=fn(),eE=ct(),Dd=Md?Md.isConcatSpreadable:void 0;function tE(t){return eE(t)||QC(t)||!!(Dd&&t&&t[Dd])}Bd.exports=tE});var Ai=m((mj,Ld)=>{f();var rE=bo(),nE=qd();function zd(t,e,r,n,o){var a=-1,i=t.length;for(r||(r=nE),o||(o=[]);++a<i;){var s=t[a];e>0&&r(s)?e>1?zd(s,e-1,r,n,o):rE(o,s):n||(o[o.length]=s)}return o}Ld.exports=zd});var jd=m((gj,Kd)=>{f();var oE=Ai();function aE(t){var e=t==null?0:t.length;return e?oE(t,1):[]}Kd.exports=aE});var Jd=m((yj,Vd)=>{f();function iE(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}Vd.exports=iE});var Ii=m((vj,Hd)=>{f();var sE=Jd(),Ud=Math.max;function uE(t,e,r){return e=Ud(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=Ud(n.length-e,0),i=Array(a);++o<a;)i[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(i),sE(t,this,s)}}Hd.exports=uE});var Gd=m((Oj,$d)=>{f();function cE(t){return function(){return t}}$d.exports=cE});var Ri=m((_j,Yd)=>{f();function fE(t){return t}Yd.exports=fE});var Zd=m((xj,Xd)=>{f();var lE=Gd(),Wd=ai(),hE=Ri(),pE=Wd?function(t,e){return Wd(t,"toString",{configurable:!0,enumerable:!1,value:lE(e),writable:!0})}:hE;Xd.exports=pE});var em=m((bj,Qd)=>{f();var dE=800,mE=16,gE=Date.now;function yE(t){var e=0,r=0;return function(){var n=gE(),o=mE-(n-r);if(r=n,o>0){if(++e>=dE)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}Qd.exports=yE});var wi=m((kj,tm)=>{f();var vE=Zd(),OE=em(),_E=OE(vE);tm.exports=_E});var Fi=m((Tj,rm)=>{f();var xE=jd(),bE=Ii(),kE=wi();function TE(t){return kE(bE(t,void 0,xE),t+"")}rm.exports=TE});var om=m((Sj,nm)=>{f();var SE=uo(),NE=td(),AE=wd(),IE=ar(),RE=nr(),wE=Pd(),FE=Fi(),CE=mi(),EE=1,PE=2,ME=4,DE=FE(function(t,e){var r={};if(t==null)return r;var n=!1;e=SE(e,function(a){return a=IE(a,t),n||(n=a.length>1),a}),RE(t,CE(t),r),n&&(r=NE(r,EE|PE|ME,wE));for(var o=e.length;o--;)AE(r,e[o]);return r});nm.exports=DE});var sm=m((Nj,im)=>{f();var BE=mo(),qE=ar(),zE=pn(),am=mt(),LE=_n();function KE(t,e,r,n){if(!am(t))return t;e=qE(e,t);for(var o=-1,a=e.length,i=a-1,s=t;s!=null&&++o<a;){var u=LE(e[o]),c=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(o!=i){var l=s[u];c=n?n(l,u,s):void 0,c===void 0&&(c=am(l)?l:zE(e[o+1])?[]:{})}BE(s,u,c),s=s[u]}return t}im.exports=KE});var cm=m((Aj,um)=>{f();var jE=Si(),VE=sm(),JE=ar();function UE(t,e,r){for(var n=-1,o=e.length,a={};++n<o;){var i=e[n],s=jE(t,i);r(s,i)&&VE(a,JE(i,t),s)}return a}um.exports=UE});var lm=m((Ij,fm)=>{f();function HE(t,e){return t!=null&&e in Object(t)}fm.exports=HE});var pm=m((Rj,hm)=>{f();var $E=ar(),GE=fn(),YE=ct(),WE=pn(),XE=go(),ZE=_n();function QE(t,e,r){e=$E(e,t);for(var n=-1,o=e.length,a=!1;++n<o;){var i=ZE(e[n]);if(!(a=t!=null&&r(t,i)))break;t=t[i]}return a||++n!=o?a:(o=t==null?0:t.length,!!o&&XE(o)&&WE(i,o)&&(YE(t)||GE(t)))}hm.exports=QE});var mm=m((wj,dm)=>{f();var eP=lm(),tP=pm();function rP(t,e){return t!=null&&tP(t,e,eP)}dm.exports=rP});var ym=m((Fj,gm)=>{f();var nP=cm(),oP=mm();function aP(t,e){return nP(t,e,function(r,n){return oP(t,n)})}gm.exports=aP});var Ci=m((Cj,vm)=>{f();var iP=ym(),sP=Fi(),uP=sP(function(t,e){return t==null?{}:iP(t,e)});vm.exports=uP});var Sm=m((Bj,Tm)=>{f();var fP="__lodash_hash_undefined__";function lP(t){return this.__data__.set(t,fP),this}Tm.exports=lP});var Am=m((qj,Nm)=>{f();function hP(t){return this.__data__.has(t)}Nm.exports=hP});var Ei=m((zj,Im)=>{f();var pP=lo(),dP=Sm(),mP=Am();function Io(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new pP;++e<r;)this.add(t[e])}Io.prototype.add=Io.prototype.push=dP;Io.prototype.has=mP;Im.exports=Io});var wm=m((Lj,Rm)=>{f();function gP(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}Rm.exports=gP});var Pi=m((Kj,Fm)=>{f();function yP(t,e){return t.has(e)}Fm.exports=yP});var Mi=m((jj,Cm)=>{f();var vP=Ei(),OP=wm(),_P=Pi(),xP=1,bP=2;function kP(t,e,r,n,o,a){var i=r&xP,s=t.length,u=e.length;if(s!=u&&!(i&&u>s))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var h=-1,p=!0,d=r&bP?new vP:void 0;for(a.set(t,e),a.set(e,t);++h<s;){var y=t[h],g=e[h];if(n)var O=i?n(g,y,h,e,t,a):n(y,g,h,t,e,a);if(O!==void 0){if(O)continue;p=!1;break}if(d){if(!OP(e,function(T,S){if(!_P(d,S)&&(y===T||o(y,T,r,n,a)))return d.push(S)})){p=!1;break}}else if(!(y===g||o(y,g,r,n,a))){p=!1;break}}return a.delete(t),a.delete(e),p}Cm.exports=kP});var Pm=m((Vj,Em)=>{f();function TP(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}Em.exports=TP});var Dm=m((Jj,Mm)=>{f();function SP(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}Mm.exports=SP});var Km=m((Uj,Lm)=>{f();var Bm=tr(),qm=xi(),NP=Tr(),AP=Mi(),IP=Pm(),RP=Dm(),wP=1,FP=2,CP="[object Boolean]",EP="[object Date]",PP="[object Error]",MP="[object Map]",DP="[object Number]",BP="[object RegExp]",qP="[object Set]",zP="[object String]",LP="[object Symbol]",KP="[object ArrayBuffer]",jP="[object DataView]",zm=Bm?Bm.prototype:void 0,Di=zm?zm.valueOf:void 0;function VP(t,e,r,n,o,a,i){switch(r){case jP:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case KP:return!(t.byteLength!=e.byteLength||!a(new qm(t),new qm(e)));case CP:case EP:case DP:return NP(+t,+e);case PP:return t.name==e.name&&t.message==e.message;case BP:case zP:return t==e+"";case MP:var s=IP;case qP:var u=n&wP;if(s||(s=RP),t.size!=e.size&&!u)return!1;var c=i.get(t);if(c)return c==e;n|=FP,i.set(t,e);var l=AP(s(t),s(e),n,o,a,i);return i.delete(t),l;case LP:if(Di)return Di.call(t)==Di.call(e)}return!1}Lm.exports=VP});var Jm=m((Hj,Vm)=>{f();var jm=di(),JP=1,UP=Object.prototype,HP=UP.hasOwnProperty;function $P(t,e,r,n,o,a){var i=r&JP,s=jm(t),u=s.length,c=jm(e),l=c.length;if(u!=l&&!i)return!1;for(var h=u;h--;){var p=s[h];if(!(i?p in e:HP.call(e,p)))return!1}var d=a.get(t),y=a.get(e);if(d&&y)return d==e&&y==t;var g=!0;a.set(t,e),a.set(e,t);for(var O=i;++h<u;){p=s[h];var T=t[p],S=e[p];if(n)var C=i?n(S,T,p,e,t,a):n(T,S,p,t,e,a);if(!(C===void 0?T===S||o(T,S,r,n,a):C)){g=!1;break}O||(O=p=="constructor")}if(g&&!O){var I=t.constructor,P=e.constructor;I!=P&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof P=="function"&&P instanceof P)&&(g=!1)}return a.delete(t),a.delete(e),g}Vm.exports=$P});var Zm=m(($j,Xm)=>{f();var Bi=ho(),GP=Mi(),YP=Km(),WP=Jm(),Um=On(),Hm=ct(),$m=hn(),XP=vo(),ZP=1,Gm="[object Arguments]",Ym="[object Array]",Ro="[object Object]",QP=Object.prototype,Wm=QP.hasOwnProperty;function eM(t,e,r,n,o,a){var i=Hm(t),s=Hm(e),u=i?Ym:Um(t),c=s?Ym:Um(e);u=u==Gm?Ro:u,c=c==Gm?Ro:c;var l=u==Ro,h=c==Ro,p=u==c;if(p&&$m(t)){if(!$m(e))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new Bi),i||XP(t)?GP(t,e,r,n,o,a):YP(t,e,u,r,n,o,a);if(!(r&ZP)){var d=l&&Wm.call(t,"__wrapped__"),y=h&&Wm.call(e,"__wrapped__");if(d||y){var g=d?t.value():t,O=y?e.value():e;return a||(a=new Bi),o(g,O,r,n,a)}}return p?(a||(a=new Bi),WP(t,e,r,n,o,a)):!1}Xm.exports=eM});var rg=m((Gj,tg)=>{f();var tM=Zm(),Qm=gt();function eg(t,e,r,n,o){return t===e?!0:t==null||e==null||!Qm(t)&&!Qm(e)?t!==t&&e!==e:tM(t,e,r,n,eg,o)}tg.exports=eg});var og=m((Yj,ng)=>{f();var rM=rg();function nM(t,e){return rM(t,e)}ng.exports=nM});var ig=m((e1,ag)=>{f();function iM(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1}ag.exports=iM});var ug=m((t1,sg)=>{f();function sM(t){return t!==t}sg.exports=sM});var fg=m((r1,cg)=>{f();function uM(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}cg.exports=uM});var hg=m((n1,lg)=>{f();var cM=ig(),fM=ug(),lM=fg();function hM(t,e,r){return e===e?lM(t,e,r):cM(t,fM,r)}lg.exports=hM});var dg=m((o1,pg)=>{f();var pM=hg();function dM(t,e){var r=t==null?0:t.length;return!!r&&pM(t,e,0)>-1}pg.exports=dM});var gg=m((a1,mg)=>{f();function mM(t,e,r){for(var n=-1,o=t==null?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}mg.exports=mM});var vg=m((i1,yg)=>{f();var gM=Ei(),yM=dg(),vM=gg(),OM=uo(),_M=dn(),xM=Pi(),bM=200;function kM(t,e,r,n){var o=-1,a=yM,i=!0,s=t.length,u=[],c=e.length;if(!s)return u;r&&(e=OM(e,_M(r))),n?(a=vM,i=!1):e.length>=bM&&(a=xM,i=!1,e=new gM(e));e:for(;++o<s;){var l=t[o],h=r==null?l:r(l);if(l=n||l!==0?l:0,i&&h===h){for(var p=c;p--;)if(e[p]===h)continue e;u.push(l)}else a(e,h,n)||u.push(l)}return u}yg.exports=kM});var zi=m((s1,Og)=>{f();var TM=Ri(),SM=Ii(),NM=wi();function AM(t,e){return NM(SM(t,e,TM),t+"")}Og.exports=AM});var Li=m((u1,_g)=>{f();var IM=yn(),RM=gt();function wM(t){return RM(t)&&IM(t)}_g.exports=wM});var kg=m((c1,bg)=>{f();var FM=vg(),CM=Ai(),EM=zi(),xg=Li(),PM=EM(function(t,e){return xg(t)?FM(t,CM(e,1,xg,!0)):[]});bg.exports=PM});var Ki=m((f1,Tg)=>{f();var MM=po(),DM=Tr();function BM(t,e,r){(r!==void 0&&!DM(t[e],r)||r===void 0&&!(e in t))&&MM(t,e,r)}Tg.exports=BM});var Ng=m((l1,Sg)=>{f();function qM(t){return function(e,r,n){for(var o=-1,a=Object(e),i=n(e),s=i.length;s--;){var u=i[t?s:++o];if(r(a[u],u,a)===!1)break}return e}}Sg.exports=qM});var Ig=m((h1,Ag)=>{f();var zM=Ng(),LM=zM();Ag.exports=LM});var ji=m((p1,Rg)=>{f();function KM(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}Rg.exports=KM});var Fg=m((d1,wg)=>{f();var jM=nr(),VM=Fr();function JM(t){return jM(t,VM(t))}wg.exports=JM});var Bg=m((m1,Dg)=>{f();var Cg=Ki(),UM=ci(),HM=bi(),$M=fi(),GM=ki(),Eg=fn(),Pg=ct(),YM=Li(),WM=hn(),XM=co(),ZM=mt(),QM=Ni(),eD=vo(),Mg=ji(),tD=Fg();function rD(t,e,r,n,o,a,i){var s=Mg(t,r),u=Mg(e,r),c=i.get(u);if(c){Cg(t,r,c);return}var l=a?a(s,u,r+"",t,e,i):void 0,h=l===void 0;if(h){var p=Pg(u),d=!p&&WM(u),y=!p&&!d&&eD(u);l=u,p||d||y?Pg(s)?l=s:YM(s)?l=$M(s):d?(h=!1,l=UM(u,!0)):y?(h=!1,l=HM(u,!0)):l=[]:QM(u)||Eg(u)?(l=s,Eg(s)?l=tD(s):(!ZM(s)||XM(s))&&(l=GM(u))):h=!1}h&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),Cg(t,r,l)}Dg.exports=rD});var Lg=m((g1,zg)=>{f();var nD=ho(),oD=Ki(),aD=Ig(),iD=Bg(),sD=mt(),uD=Fr(),cD=ji();function qg(t,e,r,n,o){t!==e&&aD(e,function(a,i){if(o||(o=new nD),sD(a))iD(t,e,i,r,qg,n,o);else{var s=n?n(cD(t,i),a,i+"",t,e,o):void 0;s===void 0&&(s=a),oD(t,i,s)}},uD)}zg.exports=qg});var jg=m((y1,Kg)=>{f();var fD=Tr(),lD=yn(),hD=pn(),pD=mt();function dD(t,e,r){if(!pD(r))return!1;var n=typeof e;return(n=="number"?lD(r)&&hD(e,r.length):n=="string"&&e in r)?fD(r[e],t):!1}Kg.exports=dD});var Jg=m((v1,Vg)=>{f();var mD=zi(),gD=jg();function yD(t){return mD(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):void 0,i&&gD(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,a)}return e})}Vg.exports=yD});var Hg=m((O1,Ug)=>{f();var vD=Lg(),OD=Jg(),_D=OD(function(t,e,r,n){vD(t,e,r,n)});Ug.exports=_D});var ys=m((PV,yb)=>{"use strict";f();yb.exports=rB;function rB(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,a=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(s,u){r[n]=function(l){if(a)if(a=!1,l)u(l);else{for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p++]=arguments[p];s.apply(null,h)}};try{t.apply(e||null,r)}catch(c){a&&(a=!1,u(c))}})}});var xb=m(_b=>{"use strict";f();var Po=_b;Po.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Pr=new Array(64),Ob=new Array(123);for(ft=0;ft<64;)Ob[Pr[ft]=ft<26?ft+65:ft<52?ft+71:ft<62?ft-4:ft-59|43]=ft++;var ft;Po.encode=function(e,r,n){for(var o=null,a=[],i=0,s=0,u;r<n;){var c=e[r++];switch(s){case 0:a[i++]=Pr[c>>2],u=(c&3)<<4,s=1;break;case 1:a[i++]=Pr[u|c>>4],u=(c&15)<<2,s=2;break;case 2:a[i++]=Pr[u|c>>6],a[i++]=Pr[c&63],s=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0)}return s&&(a[i++]=Pr[u],a[i++]=61,s===1&&(a[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))};var vb="invalid encoding";Po.decode=function(e,r,n){for(var o=n,a=0,i,s=0;s<e.length;){var u=e.charCodeAt(s++);if(u===61&&a>1)break;if((u=Ob[u])===void 0)throw Error(vb);switch(a){case 0:i=u,a=1;break;case 1:r[n++]=i<<2|(u&48)>>4,i=u,a=2;break;case 2:r[n++]=(i&15)<<4|(u&60)>>2,i=u,a=3;break;case 3:r[n++]=(i&3)<<6|u,a=0;break}}if(a===1)throw Error(vb);return n-o};Po.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var kb=m((DV,bb)=>{"use strict";f();bb.exports=Mo;function Mo(){this._listeners={}}Mo.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Mo.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};Mo.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var wb=m((BV,Rb)=>{"use strict";f();Rb.exports=Tb(Tb);function Tb(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(u,c,l){e[0]=u,c[l]=r[0],c[l+1]=r[1],c[l+2]=r[2],c[l+3]=r[3]}function a(u,c,l){e[0]=u,c[l]=r[3],c[l+1]=r[2],c[l+2]=r[1],c[l+3]=r[0]}t.writeFloatLE=n?o:a,t.writeFloatBE=n?a:o;function i(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function s(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?i:s,t.readFloatBE=n?s:i}():function(){function e(n,o,a,i){var s=o<0?1:0;if(s&&(o=-o),o===0)n(1/o>0?0:2147483648,a,i);else if(isNaN(o))n(2143289344,a,i);else if(o>34028234663852886e22)n((s<<31|2139095040)>>>0,a,i);else if(o<11754943508222875e-54)n((s<<31|Math.round(o/1401298464324817e-60))>>>0,a,i);else{var u=Math.floor(Math.log(o)/Math.LN2),c=Math.round(o*Math.pow(2,-u)*8388608)&8388607;n((s<<31|u+127<<23|c)>>>0,a,i)}}t.writeFloatLE=e.bind(null,Sb),t.writeFloatBE=e.bind(null,Nb);function r(n,o,a){var i=n(o,a),s=(i>>31)*2+1,u=i>>>23&255,c=i&8388607;return u===255?c?NaN:s*(1/0):u===0?s*1401298464324817e-60*c:s*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,Ab),t.readFloatBE=r.bind(null,Ib)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(u,c,l){e[0]=u,c[l]=r[0],c[l+1]=r[1],c[l+2]=r[2],c[l+3]=r[3],c[l+4]=r[4],c[l+5]=r[5],c[l+6]=r[6],c[l+7]=r[7]}function a(u,c,l){e[0]=u,c[l]=r[7],c[l+1]=r[6],c[l+2]=r[5],c[l+3]=r[4],c[l+4]=r[3],c[l+5]=r[2],c[l+6]=r[1],c[l+7]=r[0]}t.writeDoubleLE=n?o:a,t.writeDoubleBE=n?a:o;function i(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function s(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?i:s,t.readDoubleBE=n?s:i}():function(){function e(n,o,a,i,s,u){var c=i<0?1:0;if(c&&(i=-i),i===0)n(0,s,u+o),n(1/i>0?0:2147483648,s,u+a);else if(isNaN(i))n(0,s,u+o),n(2146959360,s,u+a);else if(i>17976931348623157e292)n(0,s,u+o),n((c<<31|2146435072)>>>0,s,u+a);else{var l;if(i<22250738585072014e-324)l=i/5e-324,n(l>>>0,s,u+o),n((c<<31|l/4294967296)>>>0,s,u+a);else{var h=Math.floor(Math.log(i)/Math.LN2);h===1024&&(h=1023),l=i*Math.pow(2,-h),n(l*4503599627370496>>>0,s,u+o),n((c<<31|h+1023<<20|l*1048576&1048575)>>>0,s,u+a)}}}t.writeDoubleLE=e.bind(null,Sb,0,4),t.writeDoubleBE=e.bind(null,Nb,4,0);function r(n,o,a,i,s){var u=n(i,s+o),c=n(i,s+a),l=(c>>31)*2+1,h=c>>>20&2047,p=4294967296*(c&1048575)+u;return h===2047?p?NaN:l*(1/0):h===0?l*5e-324*p:l*Math.pow(2,h-1075)*(p+4503599627370496)}t.readDoubleLE=r.bind(null,Ab,0,4),t.readDoubleBE=r.bind(null,Ib,4,0)}(),t}function Sb(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Nb(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Ab(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Ib(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var vs=m((exports,module)=>{"use strict";f();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Cb=m(Fb=>{"use strict";f();var Os=Fb;Os.length=function(e){for(var r=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r};Os.read=function(e,r,n){var o=n-r;if(o<1)return"";for(var a=null,i=[],s=0,u;r<n;)u=e[r++],u<128?i[s++]=u:u>191&&u<224?i[s++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[s++]=55296+(u>>10),i[s++]=56320+(u&1023)):i[s++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,i.slice(0,s))),a.join("")):String.fromCharCode.apply(String,i.slice(0,s))};Os.write=function(e,r,n){for(var o=n,a,i,s=0;s<e.length;++s)a=e.charCodeAt(s),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)===55296&&((i=e.charCodeAt(s+1))&64512)===56320?(a=65536+((a&1023)<<10)+(i&1023),++s,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-o}});var Pb=m((zV,Eb)=>{"use strict";f();Eb.exports=nB;function nB(t,e,r){var n=r||8192,o=n>>>1,a=null,i=n;return function(u){if(u<1||u>o)return t(u);i+u>n&&(a=t(n),i=0);var c=e.call(a,i,i+=u);return i&7&&(i=(i|7)+1),c}}});var Db=m((LV,Mb)=>{"use strict";f();Mb.exports=be;var xn=vt();function be(t,e){this.lo=t>>>0,this.hi=e>>>0}var ir=be.zero=new be(0,0);ir.toNumber=function(){return 0};ir.zzEncode=ir.zzDecode=function(){return this};ir.length=function(){return 1};var oB=be.zeroHash="\0\0\0\0\0\0\0\0";be.fromNumber=function(e){if(e===0)return ir;var r=e<0;r&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new be(n,o)};be.from=function(e){if(typeof e=="number")return be.fromNumber(e);if(xn.isString(e))if(xn.Long)e=xn.Long.fromString(e);else return be.fromNumber(parseInt(e,10));return e.low||e.high?new be(e.low>>>0,e.high>>>0):ir};be.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};be.prototype.toLong=function(e){return xn.Long?new xn.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Ut=String.prototype.charCodeAt;be.fromHash=function(e){return e===oB?ir:new be((Ut.call(e,0)|Ut.call(e,1)<<8|Ut.call(e,2)<<16|Ut.call(e,3)<<24)>>>0,(Ut.call(e,4)|Ut.call(e,5)<<8|Ut.call(e,6)<<16|Ut.call(e,7)<<24)>>>0)};be.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};be.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};be.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};be.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var vt=m(_s=>{"use strict";f();var A=_s;A.asPromise=ys();A.base64=xb();A.EventEmitter=kb();A.float=wb();A.inquire=vs();A.utf8=Cb();A.pool=Pb();A.LongBits=Db();A.isNode=Boolean(typeof window<"u"&&window&&window.process&&window.process.versions&&window.process.versions.node);A.global=A.isNode&&window||typeof window<"u"&&window||typeof self<"u"&&self||_s;A.emptyArray=Object.freeze?Object.freeze([]):[];A.emptyObject=Object.freeze?Object.freeze({}):{};A.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};A.isString=function(e){return typeof e=="string"||e instanceof String};A.isObject=function(e){return e&&typeof e=="object"};A.isset=A.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};A.Buffer=function(){try{var t=A.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();A._Buffer_from=null;A._Buffer_allocUnsafe=null;A.newBuffer=function(e){return typeof e=="number"?A.Buffer?A._Buffer_allocUnsafe(e):new A.Array(e):A.Buffer?A._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};A.Array=typeof Uint8Array<"u"?Uint8Array:Array;A.Long=A.global.dcodeIO&&A.global.dcodeIO.Long||A.global.Long||A.inquire("long");A.key2Re=/^true|false|0|1$/;A.key32Re=/^-?(?:0|[1-9][0-9]*)$/;A.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;A.longToHash=function(e){return e?A.LongBits.from(e).toHash():A.LongBits.zeroHash};A.longFromHash=function(e,r){var n=A.LongBits.fromHash(e);return A.Long?A.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Bb(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)(t[n[o]]===void 0||!r)&&(t[n[o]]=e[n[o]]);return t}A.merge=Bb;A.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function qb(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Bb(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}A.newError=qb;A.ProtocolError=qb("ProtocolError");A.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var o=Object.keys(this),a=o.length-1;a>-1;--a)if(r[o[a]]===1&&this[o[a]]!==void 0&&this[o[a]]!==null)return o[a]}};A.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};A.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};A._configure=function(){var t=A.Buffer;if(!t){A._Buffer_from=A._Buffer_allocUnsafe=null;return}A._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},A._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Bo=m((jV,jb)=>{"use strict";f();jb.exports=K;var Ze=vt(),xs,Do=Ze.LongBits,zb=Ze.base64,Lb=Ze.utf8;function bn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function ks(){}function aB(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function K(){this.len=0,this.head=new bn(ks,0,0),this.tail=this.head,this.states=null}var Kb=function(){return Ze.Buffer?function(){return(K.create=function(){return new xs})()}:function(){return new K}};K.create=Kb();K.alloc=function(e){return new Ze.Array(e)};Ze.Array!==Array&&(K.alloc=Ze.pool(K.alloc,Ze.Array.prototype.subarray));K.prototype._push=function(e,r,n){return this.tail=this.tail.next=new bn(e,r,n),this.len+=r,this};function Ts(t,e,r){e[r]=t&255}function iB(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Ss(t,e){this.len=t,this.next=void 0,this.val=e}Ss.prototype=Object.create(bn.prototype);Ss.prototype.fn=iB;K.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Ss((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};K.prototype.int32=function(e){return e<0?this._push(Ns,10,Do.fromNumber(e)):this.uint32(e)};K.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Ns(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}K.prototype.uint64=function(e){var r=Do.from(e);return this._push(Ns,r.length(),r)};K.prototype.int64=K.prototype.uint64;K.prototype.sint64=function(e){var r=Do.from(e).zzEncode();return this._push(Ns,r.length(),r)};K.prototype.bool=function(e){return this._push(Ts,1,e?1:0)};function bs(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}K.prototype.fixed32=function(e){return this._push(bs,4,e>>>0)};K.prototype.sfixed32=K.prototype.fixed32;K.prototype.fixed64=function(e){var r=Do.from(e);return this._push(bs,4,r.lo)._push(bs,4,r.hi)};K.prototype.sfixed64=K.prototype.fixed64;K.prototype.float=function(e){return this._push(Ze.float.writeFloatLE,4,e)};K.prototype.double=function(e){return this._push(Ze.float.writeDoubleLE,8,e)};var sB=Ze.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};K.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Ts,1,0);if(Ze.isString(e)){var n=K.alloc(r=zb.length(e));zb.decode(e,n,0),e=n}return this.uint32(r)._push(sB,r,e)};K.prototype.string=function(e){var r=Lb.length(e);return r?this.uint32(r)._push(Lb.write,r,e):this._push(Ts,1,0)};K.prototype.fork=function(){return this.states=new aB(this),this.head=this.tail=new bn(ks,0,0),this.len=0,this};K.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new bn(ks,0,0),this.len=0),this};K.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};K.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};K._configure=function(t){xs=t,K.create=Kb(),xs._configure()}});var Ub=m((VV,Jb)=>{"use strict";f();Jb.exports=Ot;var Vb=Bo();(Ot.prototype=Object.create(Vb.prototype)).constructor=Ot;var Ht=vt();function Ot(){Vb.call(this)}Ot._configure=function(){Ot.alloc=Ht._Buffer_allocUnsafe,Ot.writeBytesBuffer=Ht.Buffer&&Ht.Buffer.prototype instanceof Uint8Array&&Ht.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};Ot.prototype.bytes=function(e){Ht.isString(e)&&(e=Ht._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ot.writeBytesBuffer,r,e),this};function uB(t,e,r){t.length<40?Ht.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ot.prototype.string=function(e){var r=Ht.Buffer.byteLength(e);return this.uint32(r),r&&this._push(uB,r,e),this};Ot._configure()});var zo=m((JV,Wb)=>{"use strict";f();Wb.exports=fe;var _t=vt(),Is,Gb=_t.LongBits,cB=_t.utf8;function lt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function fe(t){this.buf=t,this.pos=0,this.len=t.length}var Hb=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new fe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new fe(e);throw Error("illegal buffer")},Yb=function(){return _t.Buffer?function(r){return(fe.create=function(o){return _t.Buffer.isBuffer(o)?new Is(o):Hb(o)})(r)}:Hb};fe.create=Yb();fe.prototype._slice=_t.Array.prototype.subarray||_t.Array.prototype.slice;fe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,lt(this,10);return e}}();fe.prototype.int32=function(){return this.uint32()|0};fe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function As(){var t=new Gb(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw lt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw lt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}fe.prototype.bool=function(){return this.uint32()!==0};function qo(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}fe.prototype.fixed32=function(){if(this.pos+4>this.len)throw lt(this,4);return qo(this.buf,this.pos+=4)};fe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw lt(this,4);return qo(this.buf,this.pos+=4)|0};function $b(){if(this.pos+8>this.len)throw lt(this,8);return new Gb(qo(this.buf,this.pos+=4),qo(this.buf,this.pos+=4))}fe.prototype.float=function(){if(this.pos+4>this.len)throw lt(this,4);var e=_t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};fe.prototype.double=function(){if(this.pos+8>this.len)throw lt(this,4);var e=_t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};fe.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw lt(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};fe.prototype.string=function(){var e=this.bytes();return cB.read(e,0,e.length)};fe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw lt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw lt(this);while(this.buf[this.pos++]&128);return this};fe.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};fe._configure=function(t){Is=t,fe.create=Yb(),Is._configure();var e=_t.Long?"toLong":"toNumber";_t.merge(fe.prototype,{int64:function(){return As.call(this)[e](!1)},uint64:function(){return As.call(this)[e](!0)},sint64:function(){return As.call(this).zzDecode()[e](!1)},fixed64:function(){return $b.call(this)[e](!0)},sfixed64:function(){return $b.call(this)[e](!1)}})}});var e0=m((UV,Qb)=>{"use strict";f();Qb.exports=sr;var Zb=zo();(sr.prototype=Object.create(Zb.prototype)).constructor=sr;var Xb=vt();function sr(t){Zb.call(this,t)}sr._configure=function(){Xb.Buffer&&(sr.prototype._slice=Xb.Buffer.prototype.slice)};sr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};sr._configure()});var r0=m((HV,t0)=>{"use strict";f();t0.exports=kn;var Rs=vt();(kn.prototype=Object.create(Rs.EventEmitter.prototype)).constructor=kn;function kn(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Rs.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}kn.prototype.rpcCall=function t(e,r,n,o,a){if(!o)throw TypeError("request must be specified");var i=this;if(!a)return Rs.asPromise(t,i,e,r,n,o);if(!i.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return i.rpcImpl(e,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(u,c){if(u)return i.emit("error",u,e),a(u);if(c===null){i.end(!0);return}if(!(c instanceof n))try{c=n[i.responseDelimited?"decodeDelimited":"decode"](c)}catch(l){return i.emit("error",l,e),a(l)}return i.emit("data",c,e),a(null,c)})}catch(s){i.emit("error",s,e),setTimeout(function(){a(s)},0);return}};kn.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ws=m(n0=>{"use strict";f();var fB=n0;fB.Service=r0()});var Fs=m((GV,o0)=>{"use strict";f();o0.exports={}});var s0=m(i0=>{"use strict";f();var Be=i0;Be.build="minimal";Be.Writer=Bo();Be.BufferWriter=Ub();Be.Reader=zo();Be.BufferReader=e0();Be.util=vt();Be.rpc=ws();Be.roots=Fs();Be.configure=a0;function a0(){Be.util._configure(),Be.Writer._configure(Be.BufferWriter),Be.Reader._configure(Be.BufferReader)}a0()});var c0=m((WV,u0)=>{"use strict";f();u0.exports=Cs;function Cs(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(a){if(typeof a!="string"){var i=o();if(Cs.verbose&&console.log("codegen: "+i),i="return "+i,a){for(var s=Object.keys(a),u=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)u[l]=s[l],c[l]=a[s[l++]];return u[l]=i,Function.apply(null,u).apply(null,c)}return Function(i)()}for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p]=arguments[++p];if(p=0,a=a.replace(/%([%dfijs])/g,function(y,g){var O=h[p++];switch(g){case"d":case"f":return String(Number(O));case"i":return String(Math.floor(O));case"j":return JSON.stringify(O);case"s":return String(O)}return"%"}),p!==h.length)throw Error("parameter count mismatch");return r.push(a),n}function o(a){return"function "+(a||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=o,n}Cs.verbose=!1});var l0=m((XV,f0)=>{"use strict";f();f0.exports=Tn;var lB=ys(),hB=vs(),Es=hB("fs");function Tn(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&Es&&Es.readFile?Es.readFile(t,function(o,a){return o&&typeof XMLHttpRequest<"u"?Tn.xhr(t,e,r):o?r(o):r(null,e.binary?a:a.toString("utf8"))}):Tn.xhr(t,e,r):lB(Tn,this,t,e)}Tn.xhr=function(e,r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==0&&o.status!==200)return n(Error("status "+o.status));if(r.binary){var i=o.response;if(!i){i=[];for(var s=0;s<o.responseText.length;++s)i.push(o.responseText.charCodeAt(s)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(i):i)}return n(null,o.responseText)}},r.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}});var d0=m(p0=>{"use strict";f();var Ms=p0,h0=Ms.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Ps=Ms.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=h0(e),o="";n&&(o=r.shift()+"/");for(var a=0;a<r.length;)r[a]===".."?a>0&&r[a-1]!==".."?r.splice(--a,2):n?r.splice(a,1):++a:r[a]==="."?r.splice(a,1):++a;return o+r.join("/")};Ms.resolve=function(e,r,n){return n||(r=Ps(r)),h0(r)?r:(n||(e=Ps(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Ps(e+"/"+r):r)}});var Mr=m(m0=>{"use strict";f();var Sn=m0,pB=Se(),dB=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Nn(t,e){var r=0,n={};for(e|=0;r<t.length;)n[dB[r+e]]=t[r++];return n}Sn.basic=Nn([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Sn.defaults=Nn([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",pB.emptyArray,null]);Sn.long=Nn([0,0,0,1,1],7);Sn.mapKey=Nn([0,0,0,5,5,0,0,0,1,1,0,2],2);Sn.packed=Nn([1,5,0,0,0,5,5,0,0,0,1,1,0])});var ur=m((e4,v0)=>{"use strict";f();v0.exports=Qe;var Lo=cr();((Qe.prototype=Object.create(Lo.prototype)).constructor=Qe).className="Field";var g0=xt(),y0=Mr(),de=Se(),Ds,mB=/^required|optional|repeated$/;Qe.fromJSON=function(e,r){return new Qe(e,r.id,r.type,r.rule,r.extend,r.options,r.comment)};function Qe(t,e,r,n,o,a,i){if(de.isObject(n)?(i=o,a=n,n=o=void 0):de.isObject(o)&&(i=a,a=o,o=void 0),Lo.call(this,t,a),!de.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!de.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!mB.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==void 0&&!de.isString(o))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=o||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=de.Long?y0.long[r]!==void 0:!1,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=i}Object.defineProperty(Qe.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Qe.prototype.setOption=function(e,r,n){return e==="packed"&&(this._packed=null),Lo.prototype.setOption.call(this,e,r,n)};Qe.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return de.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Qe.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=y0.defaults[this.type])===void 0&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Ds?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof g0&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof g0))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=de.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;de.base64.test(this.typeDefault)?de.base64.decode(this.typeDefault,e=de.newBuffer(de.base64.length(this.typeDefault)),0):de.utf8.write(this.typeDefault,e=de.newBuffer(de.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=de.emptyObject:this.repeated?this.defaultValue=de.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Ds&&(this.parent.ctor.prototype[this.name]=this.defaultValue),Lo.prototype.resolve.call(this)};Qe.d=function(e,r,n,o){return typeof r=="function"?r=de.decorateType(r).name:r&&typeof r=="object"&&(r=de.decorateEnum(r).name),function(i,s){de.decorateType(i.constructor).add(new Qe(s,e,r,n,{default:o}))}};Qe._configure=function(e){Ds=e}});var An=m((t4,x0)=>{"use strict";f();x0.exports=et;var jo=cr();((et.prototype=Object.create(jo.prototype)).constructor=et).className="OneOf";var O0=ur(),Ko=Se();function et(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),jo.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}et.fromJSON=function(e,r){return new et(e,r.oneof,r.options,r.comment)};et.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Ko.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function _0(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}et.prototype.add=function(e){if(!(e instanceof O0))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,_0(this),this};et.prototype.remove=function(e){if(!(e instanceof O0))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};et.prototype.onAdd=function(e){jo.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var o=e.get(this.oneof[n]);o&&!o.partOf&&(o.partOf=r,r.fieldsArray.push(o))}_0(this)};et.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);jo.prototype.onRemove.call(this,e)};et.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(o,a){Ko.decorateType(o.constructor).add(new et(a,e)),Object.defineProperty(o,a,{get:Ko.oneOfGetter(e),set:Ko.oneOfSetter(e)})}}});var qr=m((r4,S0)=>{"use strict";f();S0.exports=j;var Bs=cr();((j.prototype=Object.create(Bs.prototype)).constructor=j).className="Namespace";var b0=ur(),gB=An(),Vo=Se(),Dr,In,Br;j.fromJSON=function(e,r){return new j(e,r.options).addJSON(r.nested)};function k0(t,e){if(!!(t&&t.length)){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}j.arrayToJSON=k0;j.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return!0}return!1};j.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return!0}return!1};function j(t,e){Bs.call(this,t,e),this.nested=void 0,this._nestedArray=null}function T0(t){return t._nestedArray=null,t}Object.defineProperty(j.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Vo.toArray(this.nested))}});j.prototype.toJSON=function(e){return Vo.toObject(["options",this.options,"nested",k0(this.nestedArray,e)])};j.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),o=0,a;o<n.length;++o)a=e[n[o]],r.add((a.fields!==void 0?Dr.fromJSON:a.values!==void 0?Br.fromJSON:a.methods!==void 0?In.fromJSON:a.id!==void 0?b0.fromJSON:j.fromJSON)(n[o],a));return this};j.prototype.get=function(e){return this.nested&&this.nested[e]||null};j.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Br)return this.nested[e].values;throw Error("no such enum: "+e)};j.prototype.add=function(e){if(!(e instanceof b0&&e.extend!==void 0||e instanceof Dr||e instanceof Br||e instanceof In||e instanceof j||e instanceof gB))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(e.name);if(r)if(r instanceof j&&e instanceof j&&!(r instanceof Dr||r instanceof In)){for(var n=r.nestedArray,o=0;o<n.length;++o)e.add(n[o]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),T0(this)};j.prototype.remove=function(e){if(!(e instanceof Bs))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),T0(this)};j.prototype.define=function(e,r){if(Vo.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var o=e.shift();if(n.nested&&n.nested[o]){if(n=n.nested[o],!(n instanceof j))throw Error("path conflicts with non-namespace objects")}else n.add(n=new j(o))}return r&&n.addJSON(r),n};j.prototype.resolveAll=function(){for(var e=this.nestedArray,r=0;r<e.length;)e[r]instanceof j?e[r++].resolveAll():e[r++].resolve();return this.resolve()};j.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),Vo.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),r);var o=this.get(e[0]);if(o){if(e.length===1){if(!r||r.indexOf(o.constructor)>-1)return o}else if(o instanceof j&&(o=o.lookup(e.slice(1),r,!0)))return o}else for(var a=0;a<this.nestedArray.length;++a)if(this._nestedArray[a]instanceof j&&(o=this._nestedArray[a].lookup(e,r,!0)))return o;return this.parent===null||n?null:this.parent.lookup(e,r)};j.prototype.lookupType=function(e){var r=this.lookup(e,[Dr]);if(!r)throw Error("no such type: "+e);return r};j.prototype.lookupEnum=function(e){var r=this.lookup(e,[Br]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};j.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[Dr,Br]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};j.prototype.lookupService=function(e){var r=this.lookup(e,[In]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};j._configure=function(t,e,r){Dr=t,In=e,Br=r}});var zs=m((n4,N0)=>{"use strict";f();N0.exports=Ct;var qs=ur();((Ct.prototype=Object.create(qs.prototype)).constructor=Ct).className="MapField";var yB=Mr(),Rn=Se();function Ct(t,e,r,n,o,a){if(qs.call(this,t,e,n,void 0,void 0,o,a),!Rn.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}Ct.fromJSON=function(e,r){return new Ct(e,r.id,r.keyType,r.type,r.options,r.comment)};Ct.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Rn.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Ct.prototype.resolve=function(){if(this.resolved)return this;if(yB.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return qs.prototype.resolve.call(this)};Ct.d=function(e,r,n){return typeof n=="function"?n=Rn.decorateType(n).name:n&&typeof n=="object"&&(n=Rn.decorateEnum(n).name),function(a,i){Rn.decorateType(a.constructor).add(new Ct(i,e,r,n))}}});var Ks=m((o4,A0)=>{"use strict";f();A0.exports=fr;var Ls=cr();((fr.prototype=Object.create(Ls.prototype)).constructor=fr).className="Method";var zr=Se();function fr(t,e,r,n,o,a,i,s,u){if(zr.isObject(o)?(i=o,o=a=void 0):zr.isObject(a)&&(i=a,a=void 0),!(e===void 0||zr.isString(e)))throw TypeError("type must be a string");if(!zr.isString(r))throw TypeError("requestType must be a string");if(!zr.isString(n))throw TypeError("responseType must be a string");Ls.call(this,t,i),this.type=e||"rpc",this.requestType=r,this.requestStream=o?!0:void 0,this.responseType=n,this.responseStream=a?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=s,this.parsedOptions=u}fr.fromJSON=function(e,r){return new fr(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};fr.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return zr.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};fr.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Ls.prototype.resolve.call(this))}});var Vs=m((a4,R0)=>{"use strict";f();R0.exports=tt;var $t=qr();((tt.prototype=Object.create($t.prototype)).constructor=tt).className="Service";var js=Ks(),wn=Se(),vB=ws();function tt(t,e){$t.call(this,t,e),this.methods={},this._methodsArray=null}tt.fromJSON=function(e,r){var n=new tt(e,r.options);if(r.methods)for(var o=Object.keys(r.methods),a=0;a<o.length;++a)n.add(js.fromJSON(o[a],r.methods[o[a]]));return r.nested&&n.addJSON(r.nested),n.comment=r.comment,n};tt.prototype.toJSON=function(e){var r=$t.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return wn.toObject(["options",r&&r.options||void 0,"methods",$t.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(tt.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=wn.toArray(this.methods))}});function I0(t){return t._methodsArray=null,t}tt.prototype.get=function(e){return this.methods[e]||$t.prototype.get.call(this,e)};tt.prototype.resolveAll=function(){for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return $t.prototype.resolve.call(this)};tt.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof js?(this.methods[e.name]=e,e.parent=this,I0(this)):$t.prototype.add.call(this,e)};tt.prototype.remove=function(e){if(e instanceof js){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,I0(this)}return $t.prototype.remove.call(this,e)};tt.prototype.create=function(e,r,n){for(var o=new vB.Service(e,r,n),a=0,i;a<this.methodsArray.length;++a){var s=wn.lcFirst((i=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");o[s]=wn.codegen(["r","c"],wn.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return o}});var Jo=m((i4,w0)=>{"use strict";f();w0.exports=bt;var OB=vt();function bt(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}bt.create=function(e){return this.$type.create(e)};bt.encode=function(e,r){return this.$type.encode(e,r)};bt.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};bt.decode=function(e){return this.$type.decode(e)};bt.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};bt.verify=function(e){return this.$type.verify(e)};bt.fromObject=function(e){return this.$type.fromObject(e)};bt.toObject=function(e,r){return this.$type.toObject(e,r)};bt.prototype.toJSON=function(){return this.$type.toObject(this,OB.toJSONOptions)}});var Js=m((s4,C0)=>{"use strict";f();C0.exports=bB;var _B=xt(),Et=Mr(),F0=Se();function xB(t){return"missing required '"+t.name+"'"}function bB(t){var e=F0.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(s){return s.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),o=n.resolvedType instanceof _B?"int32":n.type,a="m"+F0.safeProp(n.name);e("case %i:",n.id),n.map?(e("if(%s===util.emptyObject)",a)("%s={}",a)("var c2 = r.uint32()+r.pos"),Et.defaults[n.keyType]!==void 0?e("k=%j",Et.defaults[n.keyType]):e("k=null"),Et.defaults[o]!==void 0?e("value=%j",Et.defaults[o]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),Et.basic[o]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",o),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),Et.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',a):e("%s[k]=value",a)):n.repeated?(e("if(!(%s&&%s.length))",a,a)("%s=[]",a),Et.packed[o]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",a,o)("}else"),Et.basic[o]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",a,r):e("%s.push(r.%s())",a,o)):Et.basic[o]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",a,r):e("%s=r.%s()",a,o),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var i=t._fieldsArray[r];i.required&&e("if(!m.hasOwnProperty(%j))",i.name)("throw util.ProtocolError(%j,{instance:m})",xB(i))}return e("return m")}});var $s=m((u4,E0)=>{"use strict";f();E0.exports=SB;var kB=xt(),Us=Se();function rt(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function Hs(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof kB){t("switch(%s){",n)("default:")("return%j",rt(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",rt(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",rt(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",rt(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",rt(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",rt(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",rt(e,"buffer"));break}return t}function TB(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",rt(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",rt(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",rt(e,"boolean key"));break}return t}function SB(t){var e=Us.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var o=0;o<t.fieldsArray.length;++o){var a=t._fieldsArray[o].resolve(),i="m"+Us.safeProp(a.name);if(a.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",i,a.name),a.map)e("if(!util.isObject(%s))",i)("return%j",rt(a,"object"))("var k=Object.keys(%s)",i)("for(var i=0;i<k.length;++i){"),TB(e,a,"k[i]"),Hs(e,a,o,i+"[k[i]]")("}");else if(a.repeated)e("if(!Array.isArray(%s))",i)("return%j",rt(a,"array"))("for(var i=0;i<%s.length;++i){",i),Hs(e,a,o,i+"[i]")("}");else{if(a.partOf){var s=Us.safeProp(a.partOf.name);n[a.partOf.name]===1&&e("if(p%s===1)",s)("return%j",a.partOf.name+": multiple values"),n[a.partOf.name]=1,e("p%s=1",s)}Hs(e,a,o,i)}a.optional&&e("}")}return e("return null")}});var Ws=m(M0=>{"use strict";f();var P0=M0,Fn=xt(),kt=Se();function Gs(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof Fn){t("switch(d%s){",n);for(var o=e.resolvedType.values,a=Object.keys(o),i=0;i<a.length;++i)e.repeated&&o[a[i]]===e.typeDefault&&t("default:"),t("case%j:",a[i])("case %i:",o[a[i]])("m%s=%j",n,o[a[i]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var s=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,s)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,s?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n);break}}return t}P0.fromObject=function(e){var r=e.fieldsArray,n=kt.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<r.length;++o){var a=r[o].resolve(),i=kt.safeProp(a.name);a.map?(n("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),Gs(n,a,o,i+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),Gs(n,a,o,i+"[i]")("}")("}")):(a.resolvedType instanceof Fn||n("if(d%s!=null){",i),Gs(n,a,o,i),a.resolvedType instanceof Fn||n("}"))}return n("return m")};function Ys(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof Fn?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}P0.toObject=function(e){var r=e.fieldsArray.slice().sort(kt.compareFieldsById);if(!r.length)return kt.codegen()("return {}");for(var n=kt.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],a=[],i=[],s=0;s<r.length;++s)r[s].partOf||(r[s].resolve().repeated?o:r[s].map?a:i).push(r[s]);if(o.length){for(n("if(o.arrays||o.defaults){"),s=0;s<o.length;++s)n("d%s=[]",kt.safeProp(o[s].name));n("}")}if(a.length){for(n("if(o.objects||o.defaults){"),s=0;s<a.length;++s)n("d%s={}",kt.safeProp(a[s].name));n("}")}if(i.length){for(n("if(o.defaults){"),s=0;s<i.length;++s){var u=i[s],c=kt.safeProp(u.name);if(u.resolvedType instanceof Fn)n("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var l="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",c,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else n("d%s=%j",c,u.typeDefault)}n("}")}var h=!1;for(s=0;s<r.length;++s){var u=r[s],p=e._fieldsArray.indexOf(u),c=kt.safeProp(u.name);u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),Ys(n,u,p,c+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),Ys(n,u,p,c+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),Ys(n,u,p,c),u.partOf&&n("if(o.oneofs)")("d%s=%j",kt.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}});var Xs=m(D0=>{"use strict";f();var NB=D0,AB=Jo();NB[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].substr(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",o="";if(e&&e.json&&t.type_url&&t.value){o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var a=this.lookup(o);a&&(t=a.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof AB){var i=t.$type.toObject(t,e),s=t.$type.fullName[0]==="."?t.$type.fullName.substr(1):t.$type.fullName;return n===""&&(n=r),o=n+s,i["@type"]=o,i}return this.toObject(t,e)}}});var tu=m((l4,q0)=>{"use strict";f();q0.exports=X;var ht=qr();((X.prototype=Object.create(ht.prototype)).constructor=X).className="Type";var IB=xt(),eu=An(),Uo=ur(),RB=zs(),wB=Vs(),Zs=Jo(),Qs=zo(),FB=Bo(),Ie=Se(),CB=ru(),EB=Js(),PB=$s(),B0=Ws(),MB=Xs();function X(t,e){ht.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(X.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Ie.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Ie.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=X.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof Zs||((t.prototype=new Zs).constructor=t,Ie.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Ie.merge(t,Zs,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:Ie.oneOfGetter(this._oneofsArray[r].oneof),set:Ie.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}});X.generateConstructor=function(e){for(var r=Ie.codegen(["p"],e.name),n=0,o;n<e.fieldsArray.length;++n)(o=e._fieldsArray[n]).map?r("this%s={}",Ie.safeProp(o.name)):o.repeated&&r("this%s=[]",Ie.safeProp(o.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Ho(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}X.fromJSON=function(e,r){var n=new X(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var o=Object.keys(r.fields),a=0;a<o.length;++a)n.add((typeof r.fields[o[a]].keyType<"u"?RB.fromJSON:Uo.fromJSON)(o[a],r.fields[o[a]]));if(r.oneofs)for(o=Object.keys(r.oneofs),a=0;a<o.length;++a)n.add(eu.fromJSON(o[a],r.oneofs[o[a]]));if(r.nested)for(o=Object.keys(r.nested),a=0;a<o.length;++a){var i=r.nested[o[a]];n.add((i.id!==void 0?Uo.fromJSON:i.fields!==void 0?X.fromJSON:i.values!==void 0?IB.fromJSON:i.methods!==void 0?wB.fromJSON:ht.fromJSON)(o[a],i))}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=!0),r.comment&&(n.comment=r.comment),n};X.prototype.toJSON=function(e){var r=ht.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return Ie.toObject(["options",r&&r.options||void 0,"oneofs",ht.arrayToJSON(this.oneofsArray,e),"fields",ht.arrayToJSON(this.fieldsArray.filter(function(o){return!o.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};X.prototype.resolveAll=function(){for(var e=this.fieldsArray,r=0;r<e.length;)e[r++].resolve();var n=this.oneofsArray;for(r=0;r<n.length;)n[r++].resolve();return ht.prototype.resolveAll.call(this)};X.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};X.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Uo&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Ho(this)}return e instanceof eu?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Ho(this)):ht.prototype.add.call(this,e)};X.prototype.remove=function(e){if(e instanceof Uo&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Ho(this)}if(e instanceof eu){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Ho(this)}return ht.prototype.remove.call(this,e)};X.prototype.isReservedId=function(e){return ht.isReservedId(this.reserved,e)};X.prototype.isReservedName=function(e){return ht.isReservedName(this.reserved,e)};X.prototype.create=function(e){return new this.ctor(e)};X.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=CB(this)({Writer:FB,types:r,util:Ie}),this.decode=EB(this)({Reader:Qs,types:r,util:Ie}),this.verify=PB(this)({types:r,util:Ie}),this.fromObject=B0.fromObject(this)({types:r,util:Ie}),this.toObject=B0.toObject(this)({types:r,util:Ie});var o=MB[e];if(o){var a=Object.create(this);a.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(a),a.toObject=this.toObject,this.toObject=o.toObject.bind(a)}return this};X.prototype.encode=function(e,r){return this.setup().encode(e,r)};X.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};X.prototype.decode=function(e,r){return this.setup().decode(e,r)};X.prototype.decodeDelimited=function(e){return e instanceof Qs||(e=Qs.create(e)),this.decode(e,e.uint32())};X.prototype.verify=function(e){return this.setup().verify(e)};X.prototype.fromObject=function(e){return this.setup().fromObject(e)};X.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};X.d=function(e){return function(n){Ie.decorateType(n,e)}}});var au=m((h4,V0)=>{"use strict";f();V0.exports=Le;var Go=qr();((Le.prototype=Object.create(Go.prototype)).constructor=Le).className="Root";var ou=ur(),L0=xt(),DB=An(),Gt=Se(),K0,nu,Cn;function Le(t){Go.call(this,"",t),this.deferred=[],this.files=[]}Le.fromJSON=function(e,r){return r||(r=new Le),e.options&&r.setOptions(e.options),r.addJSON(e.nested)};Le.prototype.resolvePath=Gt.path.resolve;Le.prototype.fetch=Gt.fetch;function j0(){}Le.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var o=this;if(!n)return Gt.asPromise(t,o,e,r);var a=n===j0;function i(d,y){if(!!n){var g=n;if(n=null,a)throw d;g(d,y)}}function s(d){var y=d.lastIndexOf("google/protobuf/");if(y>-1){var g=d.substring(y);if(g in Cn)return g}return null}function u(d,y){try{if(Gt.isString(y)&&y.charAt(0)==="{"&&(y=JSON.parse(y)),!Gt.isString(y))o.setOptions(y.options).addJSON(y.nested);else{nu.filename=d;var g=nu(y,o,r),O,T=0;if(g.imports)for(;T<g.imports.length;++T)(O=s(g.imports[T])||o.resolvePath(d,g.imports[T]))&&c(O);if(g.weakImports)for(T=0;T<g.weakImports.length;++T)(O=s(g.weakImports[T])||o.resolvePath(d,g.weakImports[T]))&&c(O,!0)}}catch(S){i(S)}!a&&!l&&i(null,o)}function c(d,y){if(!(o.files.indexOf(d)>-1)){if(o.files.push(d),d in Cn){a?u(d,Cn[d]):(++l,setTimeout(function(){--l,u(d,Cn[d])}));return}if(a){var g;try{g=Gt.fs.readFileSync(d).toString("utf8")}catch(O){y||i(O);return}u(d,g)}else++l,o.fetch(d,function(O,T){if(--l,!!n){if(O){y?l||i(null,o):i(O);return}u(d,T)}})}}var l=0;Gt.isString(e)&&(e=[e]);for(var h=0,p;h<e.length;++h)(p=o.resolvePath("",e[h]))&&c(p);if(a)return o;l||i(null,o)};Le.prototype.loadSync=function(e,r){if(!Gt.isNode)throw Error("not supported");return this.load(e,r,j0)};Le.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Go.prototype.resolveAll.call(this)};var $o=/^[A-Z]/;function z0(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new ou(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.declaringField=e,e.extensionField=n,r.add(n),!0}return!1}Le.prototype._handleAdd=function(e){if(e instanceof ou)e.extend!==void 0&&!e.extensionField&&(z0(this,e)||this.deferred.push(e));else if(e instanceof L0)$o.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof DB)){if(e instanceof K0)for(var r=0;r<this.deferred.length;)z0(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);$o.test(e.name)&&(e.parent[e.name]=e)}};Le.prototype._handleRemove=function(e){if(e instanceof ou){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1)}}else if(e instanceof L0)$o.test(e.name)&&delete e.parent[e.name];else if(e instanceof Go){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);$o.test(e.name)&&delete e.parent[e.name]}};Le._configure=function(t,e,r){K0=t,nu=e,Cn=r}});var Se=m((p4,U0)=>{"use strict";f();var le=U0.exports=vt(),J0=Fs(),iu,su;le.codegen=c0();le.fetch=l0();le.path=d0();le.fs=le.inquire("fs");le.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),o=0;o<r.length;)n[o]=e[r[o++]];return n}return[]};le.toObject=function(e){for(var r={},n=0;n<e.length;){var o=e[n++],a=e[n++];a!==void 0&&(r[o]=a)}return r};var BB=/\\/g,qB=/"/g;le.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};le.safeProp=function(e){return!/^[$\w_]+$/.test(e)||le.isReserved(e)?'["'+e.replace(BB,"\\\\").replace(qB,'\\"')+'"]':"."+e};le.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var zB=/_([a-z])/g;le.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(zB,function(r,n){return n.toUpperCase()})};le.compareFieldsById=function(e,r){return e.id-r.id};le.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(le.decorateRoot.remove(e.$type),e.$type.name=r,le.decorateRoot.add(e.$type)),e.$type;iu||(iu=tu());var n=new iu(r||e.name);return le.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var LB=0;le.decorateEnum=function(e){if(e.$type)return e.$type;su||(su=xt());var r=new su("Enum"+LB++,e);return le.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r};le.setProperty=function(e,r,n){function o(a,i,s){var u=i.shift();if(i.length>0)a[u]=o(a[u]||{},i,s);else{var c=a[u];c&&(s=[].concat(c).concat(s)),a[u]=s}return a}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),o(e,r,n)};Object.defineProperty(le,"decorateRoot",{get:function(){return J0.decorated||(J0.decorated=new(au()))}})});var cr=m((d4,H0)=>{"use strict";f();H0.exports=Ke;Ke.className="ReflectionObject";var Yo=Se(),Wo;function Ke(t,e){if(!Yo.isString(t))throw TypeError("name must be a string");if(e&&!Yo.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(Ke.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});Ke.prototype.toJSON=function(){throw Error()};Ke.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var r=e.root;r instanceof Wo&&r._handleAdd(this)};Ke.prototype.onRemove=function(e){var r=e.root;r instanceof Wo&&r._handleRemove(this),this.parent=null,this.resolved=!1};Ke.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Wo&&(this.resolved=!0),this)};Ke.prototype.getOption=function(e){if(this.options)return this.options[e]};Ke.prototype.setOption=function(e,r,n){return(!n||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=r),this};Ke.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var o=this.parsedOptions;if(n){var a=o.find(function(u){return Object.prototype.hasOwnProperty.call(u,e)});if(a){var i=a[e];Yo.setProperty(i,n,r)}else a={},a[e]=Yo.setProperty({},n,r),o.push(a)}else{var s={};s[e]=r,o.push(s)}return this};Ke.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),o=0;o<n.length;++o)this.setOption(n[o],e[n[o]],r);return this};Ke.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};Ke._configure=function(t){Wo=t}});var xt=m((m4,Y0)=>{"use strict";f();Y0.exports=Tt;var $0=cr();((Tt.prototype=Object.create($0.prototype)).constructor=Tt).className="Enum";var G0=qr(),Xo=Se();function Tt(t,e,r,n,o){if($0.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.reserved=void 0,e)for(var a=Object.keys(e),i=0;i<a.length;++i)typeof e[a[i]]=="number"&&(this.valuesById[this.values[a[i]]=e[a[i]]]=a[i])}Tt.fromJSON=function(e,r){var n=new Tt(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,n};Tt.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Xo.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};Tt.prototype.add=function(e,r,n){if(!Xo.isString(e))throw TypeError("name must be a string");if(!Xo.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r}else this.valuesById[this.values[e]=r]=e;return this.comments[e]=n||null,this};Tt.prototype.remove=function(e){if(!Xo.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this};Tt.prototype.isReservedId=function(e){return G0.isReservedId(this.reserved,e)};Tt.prototype.isReservedName=function(e){return G0.isReservedName(this.reserved,e)}});var ru=m((g4,X0)=>{"use strict";f();X0.exports=jB;var KB=xt(),uu=Mr(),cu=Se();function W0(t,e,r,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function jB(t){for(var e=cu.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,o=t.fieldsArray.slice().sort(cu.compareFieldsById),r=0;r<o.length;++r){var a=o[r].resolve(),i=t._fieldsArray.indexOf(a),s=a.resolvedType instanceof KB?"int32":a.type,u=uu.basic[s];n="m"+cu.safeProp(a.name),a.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,a.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(a.id<<3|2)>>>0,8|uu.mapKey[a.keyType],a.keyType),u===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,s,n),e("}")("}")):a.repeated?(e("if(%s!=null&&%s.length){",n,n),a.packed&&uu.packed[s]!==void 0?e("w.uint32(%i).fork()",(a.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",s,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),u===void 0?W0(e,a,i,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(a.id<<3|u)>>>0,s,n)),e("}")):(a.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,a.name),u===void 0?W0(e,a,i,n):e("w.uint32(%i).%s(%s)",(a.id<<3|u)>>>0,s,n))}return e("return w")}});var Q0=m((y4,Z0)=>{"use strict";f();var L=Z0.exports=s0();L.build="light";function VB(t,e,r){return typeof e=="function"?(r=e,e=new L.Root):e||(e=new L.Root),e.load(t,r)}L.load=VB;function JB(t,e){return e||(e=new L.Root),e.loadSync(t)}L.loadSync=JB;L.encoder=ru();L.decoder=Js();L.verifier=$s();L.converter=Ws();L.ReflectionObject=cr();L.Namespace=qr();L.Root=au();L.Enum=xt();L.Type=tu();L.Field=ur();L.OneOf=An();L.MapField=zs();L.Service=Vs();L.Method=Ks();L.Message=Jo();L.wrappers=Xs();L.types=Mr();L.util=Se();L.ReflectionObject._configure(L.Root);L.Namespace._configure(L.Type,L.Service,L.Enum);L.Root._configure(L.Type);L.Field._configure(L.Type)});var tk=m((v4,ek)=>{"use strict";f();ek.exports=Q0()});f();f();var Wr="delete",Z=5,Je=1<<Z,Re=Je-1,D={};function fa(){return{value:!1}}function Ue(t){t&&(t.value=!0)}function Oa(){}function lr(t){return t.size===void 0&&(t.size=t.__iterate(Mu)),t.size}function Dt(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?lr(t)+e:e}function Mu(){return!0}function Kn(t,e,r){return(t===0&&!Bu(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function Xr(t,e){return Du(t,e,0)}function jn(t,e){return Du(t,e,e)}function Du(t,e,r){return t===void 0?r:Bu(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function Bu(t){return t<0||t===0&&1/t===-1/0}var qu="@@__IMMUTABLE_ITERABLE__@@";function Ee(t){return Boolean(t&&t[qu])}var zu="@@__IMMUTABLE_KEYED__@@";function ie(t){return Boolean(t&&t[zu])}var Lu="@@__IMMUTABLE_INDEXED__@@";function $e(t){return Boolean(t&&t[Lu])}function Vn(t){return ie(t)||$e(t)}var ue=function(e){return Ee(e)?e:it(e)},ze=function(t){function e(r){return ie(r)?r:It(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue),zt=function(t){function e(r){return $e(r)?r:Ye(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue),St=function(t){function e(r){return Ee(r)&&!Vn(r)?r:Or(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ue);ue.Keyed=ze;ue.Indexed=zt;ue.Set=St;var Ku="@@__IMMUTABLE_SEQ__@@";function _a(t){return Boolean(t&&t[Ku])}var ju="@@__IMMUTABLE_RECORD__@@";function Jn(t){return Boolean(t&&t[ju])}function At(t){return Ee(t)||Jn(t)}var yr="@@__IMMUTABLE_ORDERED__@@";function ot(t){return Boolean(t&&t[yr])}var Zr=0,at=1,Ge=2,la=typeof Symbol=="function"&&Symbol.iterator,Vu="@@iterator",Un=la||Vu,J=function(e){this.next=e};J.prototype.toString=function(){return"[Iterator]"};J.KEYS=Zr;J.VALUES=at;J.ENTRIES=Ge;J.prototype.inspect=J.prototype.toSource=function(){return this.toString()};J.prototype[Un]=function(){return this};function re(t,e,r,n){var o=t===0?e:t===1?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function Pe(){return{value:void 0,done:!0}}function xa(t){return!!Ju(t)}function hu(t){return t&&typeof t.next=="function"}function ha(t){var e=Ju(t);return e&&e.call(t)}function Ju(t){var e=t&&(la&&t[la]||t[Vu]);if(typeof e=="function")return e}var vr=Object.prototype.hasOwnProperty;function Uu(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var it=function(t){function e(r){return r==null?ka():At(r)?r.toSeq():hk(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,o){var a=this._cache;if(a){for(var i=a.length,s=0;s!==i;){var u=a[o?i-++s:s++];if(n(u[1],u[0],this)===!1)break}return s}return this.__iterateUncached(n,o)},e.prototype.__iterator=function(n,o){var a=this._cache;if(a){var i=a.length,s=0;return new J(function(){if(s===i)return Pe();var u=a[o?i-++s:s++];return re(n,u[0],u[1])})}return this.__iteratorUncached(n,o)},e}(ue),It=function(t){function e(r){return r==null?ka().toKeyedSeq():Ee(r)?ie(r)?r.toSeq():r.fromEntrySeq():Jn(r)?r.toSeq():Ta(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(it),Ye=function(t){function e(r){return r==null?ka():Ee(r)?ie(r)?r.entrySeq():r.toIndexedSeq():Jn(r)?r.toSeq().entrySeq():$u(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(it),Or=function(t){function e(r){return(Ee(r)&&!Vn(r)?r:Ye(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(it);it.isSeq=_a;it.Keyed=It;it.Set=Or;it.Indexed=Ye;it.prototype[Ku]=!0;var Bt=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this.has(n)?this._array[Dt(this,n)]:o},e.prototype.__iterate=function(n,o){for(var a=this._array,i=a.length,s=0;s!==i;){var u=o?i-++s:s++;if(n(a[u],u,this)===!1)break}return s},e.prototype.__iterator=function(n,o){var a=this._array,i=a.length,s=0;return new J(function(){if(s===i)return Pe();var u=o?i-++s:s++;return re(n,u,a[u])})},e}(Ye),ba=function(t){function e(r){var n=Object.keys(r);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return o!==void 0&&!this.has(n)?o:this._object[n]},e.prototype.has=function(n){return vr.call(this._object,n)},e.prototype.__iterate=function(n,o){for(var a=this._object,i=this._keys,s=i.length,u=0;u!==s;){var c=i[o?s-++u:u++];if(n(a[c],c,this)===!1)break}return u},e.prototype.__iterator=function(n,o){var a=this._object,i=this._keys,s=i.length,u=0;return new J(function(){if(u===s)return Pe();var c=i[o?s-++u:u++];return re(n,c,a[c])})},e}(It);ba.prototype[yr]=!0;var Hu=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,o){if(o)return this.cacheResult().__iterate(n,o);var a=this._collection,i=ha(a),s=0;if(hu(i))for(var u;!(u=i.next()).done&&n(u.value,s++,this)!==!1;);return s},e.prototype.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var a=this._collection,i=ha(a);if(!hu(i))return new J(Pe);var s=0;return new J(function(){var u=i.next();return u.done?u:re(n,s++,u.value)})},e}(Ye),pu;function ka(){return pu||(pu=new Bt([]))}function Ta(t){var e=Array.isArray(t)?new Bt(t):xa(t)?new Hu(t):void 0;if(e)return e.fromEntrySeq();if(typeof t=="object")return new ba(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function $u(t){var e=Gu(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function hk(t){var e=Gu(t);if(e)return e;if(typeof t=="object")return new ba(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function Gu(t){return Uu(t)?new Bt(t):xa(t)?new Hu(t):void 0}var Yu="@@__IMMUTABLE_MAP__@@";function Sa(t){return Boolean(t&&t[Yu])}function Wu(t){return Sa(t)&&ot(t)}function du(t){return Boolean(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function we(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(du(t)&&du(e)&&t.equals(e))}var Lr=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,o=r&65535;return n*o+((e>>>16)*o+n*(r>>>16)<<16>>>0)|0};function Hn(t){return t>>>1&1073741824|t&3221225471}var pk=Object.prototype.valueOf;function qe(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return dk(t);case"string":return t.length>vk?mk(t):pa(t);case"object":case"function":return t===null?1108378658:typeof t.hashCode=="function"?Hn(t.hashCode(t)):(t.valueOf!==pk&&typeof t.valueOf=="function"&&(t=t.valueOf(t)),gk(t));case"undefined":return 1108378659;default:if(typeof t.toString=="function")return pa(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function dk(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return Hn(e)}function mk(t){var e=ia[t];return e===void 0&&(e=pa(t),aa===Ok&&(aa=0,ia={}),aa++,ia[t]=e),e}function pa(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Hn(e)}function gk(t){var e;if(da&&(e=ma.get(t),e!==void 0)||(e=t[Wt],e!==void 0)||!gu&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Wt],e!==void 0||(e=yk(t),e!==void 0)))return e;if(e=++oa,oa&1073741824&&(oa=0),da)ma.set(t,e);else{if(mu!==void 0&&mu(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(gu)Object.defineProperty(t,Wt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Wt]=e;else if(t.nodeType!==void 0)t[Wt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var mu=Object.isExtensible,gu=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function yk(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var da=typeof WeakMap=="function",ma;da&&(ma=new WeakMap);var oa=0,Wt="__immutablehash__";typeof Symbol=="function"&&(Wt=Symbol(Wt));var vk=16,Ok=255,aa=0,ia={},$n=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this._iter.get(n,o)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,o=Na(this,!0);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().reverse()}),o},e.prototype.map=function(n,o){var a=this,i=tc(this,n,o);return this._useKeys||(i.valueSeq=function(){return a._iter.toSeq().map(n,o)}),i},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i,s){return n(i,s,a)},o)},e.prototype.__iterator=function(n,o){return this._iter.__iterator(n,o)},e}(It);$n.prototype[yr]=!0;var Xu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this,i=0;return o&&lr(this),this._iter.__iterate(function(s){return n(s,o?a.size-++i:i++,a)},o)},e.prototype.__iterator=function(n,o){var a=this,i=this._iter.__iterator(at,o),s=0;return o&&lr(this),new J(function(){var u=i.next();return u.done?u:re(n,o?a.size-++s:s++,u.value,u)})},e}(Ye),Zu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(at,o);return new J(function(){var i=a.next();return i.done?i:re(n,i.value,i.value,i)})},e}(Or),Qu=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){if(i){vu(i);var s=Ee(i);return n(s?i.get(1):i[1],s?i.get(0):i[0],a)}},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(at,o);return new J(function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value;if(s){vu(s);var u=Ee(s);return re(n,u?s.get(0):s[0],u?s.get(1):s[1],i)}}})},e}(It);Xu.prototype.cacheResult=$n.prototype.cacheResult=Zu.prototype.cacheResult=Qu.prototype.cacheResult=Ia;function ec(t){var e=dt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=Ia,e.__iterateUncached=function(r,n){var o=this;return t.__iterate(function(a,i){return r(i,a,o)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===Ge){var o=t.__iterator(r,n);return new J(function(){var a=o.next();if(!a.done){var i=a.value[0];a.value[0]=a.value[1],a.value[1]=i}return a})}return t.__iterator(r===at?Zr:at,n)},e}function tc(t,e,r){var n=dt(t);return n.size=t.size,n.has=function(o){return t.has(o)},n.get=function(o,a){var i=t.get(o,D);return i===D?a:e.call(r,i,o,t)},n.__iterateUncached=function(o,a){var i=this;return t.__iterate(function(s,u,c){return o(e.call(r,s,u,c),u,i)!==!1},a)},n.__iteratorUncached=function(o,a){var i=t.__iterator(Ge,a);return new J(function(){var s=i.next();if(s.done)return s;var u=s.value,c=u[0];return re(o,c,e.call(r,u[1],c,t),s)})},n}function Na(t,e){var r=this,n=dt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var o=ec(t);return o.reverse=function(){return t.flip()},o}),n.get=function(o,a){return t.get(e?o:-1-o,a)},n.has=function(o){return t.has(e?o:-1-o)},n.includes=function(o){return t.includes(o)},n.cacheResult=Ia,n.__iterate=function(o,a){var i=this,s=0;return a&&lr(t),t.__iterate(function(u,c){return o(u,e?c:a?i.size-++s:s++,i)},!a)},n.__iterator=function(o,a){var i=0;a&&lr(t);var s=t.__iterator(Ge,!a);return new J(function(){var u=s.next();if(u.done)return u;var c=u.value;return re(o,e?c[0]:a?r.size-++i:i++,c[1],u)})},n}function rc(t,e,r,n){var o=dt(t);return n&&(o.has=function(a){var i=t.get(a,D);return i!==D&&!!e.call(r,i,a,t)},o.get=function(a,i){var s=t.get(a,D);return s!==D&&e.call(r,s,a,t)?s:i}),o.__iterateUncached=function(a,i){var s=this,u=0;return t.__iterate(function(c,l,h){if(e.call(r,c,l,h))return u++,a(c,n?l:u-1,s)},i),u},o.__iteratorUncached=function(a,i){var s=t.__iterator(Ge,i),u=0;return new J(function(){for(;;){var c=s.next();if(c.done)return c;var l=c.value,h=l[0],p=l[1];if(e.call(r,p,h,t))return re(a,n?h:u++,p,c)}})},o}function _k(t,e,r){var n=ce().asMutable();return t.__iterate(function(o,a){n.update(e.call(r,o,a,t),0,function(i){return i+1})}),n.asImmutable()}function xk(t,e,r){var n=ie(t),o=(ot(t)?Fe():ce()).asMutable();t.__iterate(function(i,s){o.update(e.call(r,i,s,t),function(u){return u=u||[],u.push(n?[s,i]:i),u})});var a=ac(t);return o.map(function(i){return G(t,a(i))}).asImmutable()}function Aa(t,e,r,n){var o=t.size;if(Kn(e,r,o))return t;var a=Xr(e,o),i=jn(r,o);if(a!==a||i!==i)return Aa(t.toSeq().cacheResult(),e,r,n);var s=i-a,u;s===s&&(u=s<0?0:s);var c=dt(t);return c.size=u===0?u:t.size&&u||void 0,!n&&_a(t)&&u>=0&&(c.get=function(l,h){return l=Dt(this,l),l>=0&&l<u?t.get(l+a,h):h}),c.__iterateUncached=function(l,h){var p=this;if(u===0)return 0;if(h)return this.cacheResult().__iterate(l,h);var d=0,y=!0,g=0;return t.__iterate(function(O,T){if(!(y&&(y=d++<a)))return g++,l(O,n?T:g-1,p)!==!1&&g!==u}),g},c.__iteratorUncached=function(l,h){if(u!==0&&h)return this.cacheResult().__iterator(l,h);if(u===0)return new J(Pe);var p=t.__iterator(l,h),d=0,y=0;return new J(function(){for(;d++<a;)p.next();if(++y>u)return Pe();var g=p.next();return n||l===at||g.done?g:l===Zr?re(l,y-1,void 0,g):re(l,y-1,g.value[1],g)})},c}function bk(t,e,r){var n=dt(t);return n.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var s=0;return t.__iterate(function(u,c,l){return e.call(r,u,c,l)&&++s&&o(u,c,i)}),s},n.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var s=t.__iterator(Ge,a),u=!0;return new J(function(){if(!u)return Pe();var c=s.next();if(c.done)return c;var l=c.value,h=l[0],p=l[1];return e.call(r,p,h,i)?o===Ge?c:re(o,h,p,c):(u=!1,Pe())})},n}function nc(t,e,r,n){var o=dt(t);return o.__iterateUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterate(a,i);var u=!0,c=0;return t.__iterate(function(l,h,p){if(!(u&&(u=e.call(r,l,h,p))))return c++,a(l,n?h:c-1,s)}),c},o.__iteratorUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterator(a,i);var u=t.__iterator(Ge,i),c=!0,l=0;return new J(function(){var h,p,d;do{if(h=u.next(),h.done)return n||a===at?h:a===Zr?re(a,l++,void 0,h):re(a,l++,h.value[1],h);var y=h.value;p=y[0],d=y[1],c&&(c=e.call(r,d,p,s))}while(c);return a===Ge?h:re(a,p,d,h)})},o}function kk(t,e){var r=ie(t),n=[t].concat(e).map(function(i){return Ee(i)?r&&(i=ze(i)):i=r?Ta(i):$u(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return t;if(n.length===1){var o=n[0];if(o===t||r&&ie(o)||$e(t)&&$e(o))return o}var a=new Bt(n);return r?a=a.toKeyedSeq():$e(t)||(a=a.toSetSeq()),a=a.flatten(!0),a.size=n.reduce(function(i,s){if(i!==void 0){var u=s.size;if(u!==void 0)return i+u}},0),a}function oc(t,e,r){var n=dt(t);return n.__iterateUncached=function(o,a){if(a)return this.cacheResult().__iterate(o,a);var i=0,s=!1;function u(c,l){c.__iterate(function(h,p){return(!e||l<e)&&Ee(h)?u(h,l+1):(i++,o(h,r?p:i-1,n)===!1&&(s=!0)),!s},a)}return u(t,0),i},n.__iteratorUncached=function(o,a){if(a)return this.cacheResult().__iterator(o,a);var i=t.__iterator(o,a),s=[],u=0;return new J(function(){for(;i;){var c=i.next();if(c.done!==!1){i=s.pop();continue}var l=c.value;if(o===Ge&&(l=l[1]),(!e||s.length<e)&&Ee(l))s.push(i),i=l.__iterator(o,a);else return r?c:re(o,u++,l,c)}return Pe()})},n}function Tk(t,e,r){var n=ac(t);return t.toSeq().map(function(o,a){return n(e.call(r,o,a,t))}).flatten(!0)}function Sk(t,e){var r=dt(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,o){var a=this,i=0;return t.__iterate(function(s){return(!i||n(e,i++,a)!==!1)&&n(s,i++,a)!==!1},o),i},r.__iteratorUncached=function(n,o){var a=t.__iterator(at,o),i=0,s;return new J(function(){return(!s||i%2)&&(s=a.next(),s.done)?s:i%2?re(n,i++,e):re(n,i++,s.value,s)})},r}function hr(t,e,r){e||(e=ic);var n=ie(t),o=0,a=t.toSeq().map(function(i,s){return[s,i,o++,r?r(i,s,t):i]}).valueSeq().toArray();return a.sort(function(i,s){return e(i[3],s[3])||i[2]-s[2]}).forEach(n?function(i,s){a[s].length=2}:function(i,s){a[s]=i[1]}),n?It(a):$e(t)?Ye(a):Or(a)}function Pn(t,e,r){if(e||(e=ic),r){var n=t.toSeq().map(function(o,a){return[o,r(o,a,t)]}).reduce(function(o,a){return yu(e,o[1],a[1])?a:o});return n&&n[0]}return t.reduce(function(o,a){return yu(e,o,a)?a:o})}function yu(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function Mn(t,e,r,n){var o=dt(t),a=new Bt(r).map(function(i){return i.size});return o.size=n?a.max():a.min(),o.__iterate=function(i,s){for(var u=this.__iterator(at,s),c,l=0;!(c=u.next()).done&&i(c.value,l++,this)!==!1;);return l},o.__iteratorUncached=function(i,s){var u=r.map(function(h){return h=ue(h),ha(s?h.reverse():h)}),c=0,l=!1;return new J(function(){var h;return l||(h=u.map(function(p){return p.next()}),l=n?h.every(function(p){return p.done}):h.some(function(p){return p.done})),l?Pe():re(i,c++,e.apply(null,h.map(function(p){return p.value})))})},o}function G(t,e){return t===e?t:_a(t)?e:t.constructor(e)}function vu(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ac(t){return ie(t)?ze:$e(t)?zt:St}function dt(t){return Object.create((ie(t)?It:$e(t)?Ye:Or).prototype)}function Ia(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):it.prototype.cacheResult.call(this)}function ic(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function pt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function Ra(t,e){if(!t)throw new Error(e)}function He(t){Ra(t!==1/0,"Cannot perform this action with an infinite size.")}function sc(t){if(Uu(t)&&typeof t!="string")return t;if(ot(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function uc(t){return t&&(typeof t.constructor!="function"||t.constructor.name==="Object")}function qt(t){return typeof t=="object"&&(At(t)||Array.isArray(t)||uc(t))}function Ur(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Nk(t,e){return At(t)?t.has(e):qt(t)&&vr.call(t,e)}function cc(t,e,r){return At(t)?t.get(e,r):Nk(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function zn(t){if(Array.isArray(t))return pt(t);var e={};for(var r in t)vr.call(t,r)&&(e[r]=t[r]);return e}function Ak(t,e){if(!qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(At(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!vr.call(t,e))return t;var r=zn(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Ik(t,e,r){if(!qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(At(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(vr.call(t,e)&&r===t[e])return t;var n=zn(t);return n[e]=r,n}function _r(t,e,r,n){n||(n=r,r=void 0);var o=fc(At(t),t,sc(e),0,r,n);return o===D?r:o}function fc(t,e,r,n,o,a){var i=e===D;if(n===r.length){var s=i?o:e,u=a(s);return u===s?e:u}if(!i&&!qt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(Ur)+"]: "+e);var c=r[n],l=i?D:cc(e,c,D),h=fc(l===D?t:At(l),l,r,n+1,o,a);return h===l?e:h===D?Ak(e,c):Ik(i?t?nt():{}:e,c,h)}function Rk(t,e,r){return _r(t,e,D,function(){return r})}function wa(t,e){return Rk(this,t,e)}function wk(t,e){return _r(t,e,function(){return D})}function Fa(t){return wk(this,t)}function lc(t,e,r,n){return _r(t,[e],r,n)}function Ca(t,e,r){return arguments.length===1?t(this):lc(this,t,e,r)}function Ea(t,e,r){return _r(this,t,e,r)}function hc(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return dc(this,t)}function pc(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return dc(this,e,t)}function dc(t,e,r){for(var n=[],o=0;o<e.length;o++){var a=ze(e[o]);a.size!==0&&n.push(a)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(i){for(var s=r?function(c,l){lc(i,l,D,function(h){return h===D?c:r(h,c,l)})}:function(c,l){i.set(l,c)},u=0;u<n.length;u++)n[u].forEach(s)})}function Pa(t,e,r){return Ma(t,e,Fk(r))}function Ma(t,e,r){if(!qt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(At(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),o=t,a=n?zt:ze,i=n?function(u){o===t&&(o=zn(o)),o.push(u)}:function(u,c){var l=vr.call(o,c),h=l&&r?r(o[c],u,c):u;(!l||h!==o[c])&&(o===t&&(o=zn(o)),o[c]=h)},s=0;s<e.length;s++)a(e[s]).forEach(i);return o}function Fk(t){function e(r,n,o){return qt(r)&&qt(n)?Ma(r,[n],e):t?t(r,n,o):n}return e}function mc(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Pa(this,t)}function gc(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Pa(this,e,t)}function Da(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return _r(this,t,nt(),function(n){return Ma(n,e)})}function Ba(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return _r(this,t,nt(),function(n){return Pa(n,e)})}function Qr(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function en(){return this.__ownerID?this:this.__ensureOwner(new Oa)}function tn(){return this.__ensureOwner()}function qa(){return this.__altered}var ce=function(t){function e(r){return r==null?nt():Sa(r)&&!ot(r)?r:nt().withMutations(function(n){var o=t(r);He(o.size),o.forEach(function(a,i){return n.set(i,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return nt().withMutations(function(a){for(var i=0;i<n.length;i+=2){if(i+1>=n.length)throw new Error("Missing value for key: "+n[i]);a.set(n[i],n[i+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,o){return this._root?this._root.get(0,void 0,n,o):o},e.prototype.set=function(n,o){return xu(this,n,o)},e.prototype.remove=function(n){return xu(this,n,D)},e.prototype.deleteAll=function(n){var o=ue(n);return o.size===0?this:this.withMutations(function(a){o.forEach(function(i){return a.remove(i)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):nt()},e.prototype.sort=function(n){return Fe(hr(this,n))},e.prototype.sortBy=function(n,o){return Fe(hr(this,o,n))},e.prototype.map=function(n,o){return this.withMutations(function(a){a.forEach(function(i,s){a.set(s,n.call(o,i,s,a))})})},e.prototype.__iterator=function(n,o){return new Ck(this,n,o)},e.prototype.__iterate=function(n,o){var a=this,i=0;return this._root&&this._root.iterate(function(s){return i++,n(s[1],s[0],a)},o),i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?za(this.size,this._root,n,this.__hash):this.size===0?nt():(this.__ownerID=n,this.__altered=!1,this)},e}(ze);ce.isMap=Sa;var Q=ce.prototype;Q[Yu]=!0;Q[Wr]=Q.remove;Q.removeAll=Q.deleteAll;Q.setIn=wa;Q.removeIn=Q.deleteIn=Fa;Q.update=Ca;Q.updateIn=Ea;Q.merge=Q.concat=hc;Q.mergeWith=pc;Q.mergeDeep=mc;Q.mergeDeepWith=gc;Q.mergeIn=Da;Q.mergeDeepIn=Ba;Q.withMutations=Qr;Q.wasAltered=qa;Q.asImmutable=tn;Q["@@transducer/init"]=Q.asMutable=en;Q["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};Q["@@transducer/result"]=function(t){return t.asImmutable()};var Hr=function(e,r){this.ownerID=e,this.entries=r};Hr.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(we(n,a[i][0]))return a[i][1];return o};Hr.prototype.update=function(e,r,n,o,a,i,s){for(var u=a===D,c=this.entries,l=0,h=c.length;l<h&&!we(o,c[l][0]);l++);var p=l<h;if(p?c[l][1]===a:u)return this;if(Ue(s),(u||!p)&&Ue(i),!(u&&c.length===1)){if(!p&&!u&&c.length>=qk)return Ek(e,c,o,a);var d=e&&e===this.ownerID,y=d?c:pt(c);return p?u?l===h-1?y.pop():y[l]=y.pop():y[l]=[o,a]:y.push([o,a]),d?(this.entries=y,this):new Hr(e,y)}};var pr=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};pr.prototype.get=function(e,r,n,o){r===void 0&&(r=qe(n));var a=1<<((e===0?r:r>>>e)&Re),i=this.bitmap;return(i&a)===0?o:this.nodes[yc(i&a-1)].get(e+Z,r,n,o)};pr.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=(r===0?n:n>>>r)&Re,c=1<<u,l=this.bitmap,h=(l&c)!==0;if(!h&&a===D)return this;var p=yc(l&c-1),d=this.nodes,y=h?d[p]:void 0,g=La(y,e,r+Z,n,o,a,i,s);if(g===y)return this;if(!h&&g&&d.length>=zk)return Mk(e,d,l,u,g);if(h&&!g&&d.length===2&&bu(d[p^1]))return d[p^1];if(h&&g&&d.length===1&&bu(g))return g;var O=e&&e===this.ownerID,T=h?g?l:l^c:l|c,S=h?g?vc(d,p,g,O):Bk(d,p,O):Dk(d,p,g,O);return O?(this.bitmap=T,this.nodes=S,this):new pr(e,T,S)};var $r=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};$r.prototype.get=function(e,r,n,o){r===void 0&&(r=qe(n));var a=(e===0?r:r>>>e)&Re,i=this.nodes[a];return i?i.get(e+Z,r,n,o):o};$r.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=(r===0?n:n>>>r)&Re,c=a===D,l=this.nodes,h=l[u];if(c&&!h)return this;var p=La(h,e,r+Z,n,o,a,i,s);if(p===h)return this;var d=this.count;if(!h)d++;else if(!p&&(d--,d<Lk))return Pk(e,l,d,u);var y=e&&e===this.ownerID,g=vc(l,u,p,y);return y?(this.count=d,this.nodes=g,this):new $r(e,d,g)};var dr=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};dr.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(we(n,a[i][0]))return a[i][1];return o};dr.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=qe(o));var u=a===D;if(n!==this.keyHash)return u?this:(Ue(s),Ue(i),Ka(this,e,r,n,[o,a]));for(var c=this.entries,l=0,h=c.length;l<h&&!we(o,c[l][0]);l++);var p=l<h;if(p?c[l][1]===a:u)return this;if(Ue(s),(u||!p)&&Ue(i),u&&h===2)return new Nt(e,this.keyHash,c[l^1]);var d=e&&e===this.ownerID,y=d?c:pt(c);return p?u?l===h-1?y.pop():y[l]=y.pop():y[l]=[o,a]:y.push([o,a]),d?(this.entries=y,this):new dr(e,this.keyHash,y)};var Nt=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};Nt.prototype.get=function(e,r,n,o){return we(n,this.entry[0])?this.entry[1]:o};Nt.prototype.update=function(e,r,n,o,a,i,s){var u=a===D,c=we(o,this.entry[0]);if(c?a===this.entry[1]:u)return this;if(Ue(s),u){Ue(i);return}return c?e&&e===this.ownerID?(this.entry[1]=a,this):new Nt(e,this.keyHash,[o,a]):(Ue(i),Ka(this,e,r,qe(o),[o,a]))};Hr.prototype.iterate=dr.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(t(r[e?o-n:n])===!1)return!1};pr.prototype.iterate=$r.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var a=r[e?o-n:n];if(a&&a.iterate(t,e)===!1)return!1}};Nt.prototype.iterate=function(t,e){return t(this.entry)};var Ck=function(t){function e(r,n,o){this._type=n,this._reverse=o,this._stack=r._root&&Ou(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,o=this._stack;o;){var a=o.node,i=o.index++,s=void 0;if(a.entry){if(i===0)return sa(n,a.entry)}else if(a.entries){if(s=a.entries.length-1,i<=s)return sa(n,a.entries[this._reverse?s-i:i])}else if(s=a.nodes.length-1,i<=s){var u=a.nodes[this._reverse?s-i:i];if(u){if(u.entry)return sa(n,u.entry);o=this._stack=Ou(u,o)}continue}o=this._stack=this._stack.__prev}return Pe()},e}(J);function sa(t,e){return re(t,e[0],e[1])}function Ou(t,e){return{node:t,index:0,__prev:e}}function za(t,e,r,n){var o=Object.create(Q);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var _u;function nt(){return _u||(_u=za(0))}function xu(t,e,r){var n,o;if(t._root){var a=fa(),i=fa();if(n=La(t._root,t.__ownerID,0,void 0,e,r,a,i),!i.value)return t;o=t.size+(a.value?r===D?-1:1:0)}else{if(r===D)return t;o=1,n=new Hr(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?za(o,n):nt()}function La(t,e,r,n,o,a,i,s){return t?t.update(e,r,n,o,a,i,s):a===D?t:(Ue(s),Ue(i),new Nt(e,n,[o,a]))}function bu(t){return t.constructor===Nt||t.constructor===dr}function Ka(t,e,r,n,o){if(t.keyHash===n)return new dr(e,n,[t.entry,o]);var a=(r===0?t.keyHash:t.keyHash>>>r)&Re,i=(r===0?n:n>>>r)&Re,s,u=a===i?[Ka(t,e,r+Z,n,o)]:(s=new Nt(e,n,o),a<i?[t,s]:[s,t]);return new pr(e,1<<a|1<<i,u)}function Ek(t,e,r,n){t||(t=new Oa);for(var o=new Nt(t,qe(r),[r,n]),a=0;a<e.length;a++){var i=e[a];o=o.update(t,0,void 0,i[0],i[1])}return o}function Pk(t,e,r,n){for(var o=0,a=0,i=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];l!==void 0&&s!==n&&(o|=u,i[a++]=l)}return new pr(t,o,i)}function Mk(t,e,r,n,o){for(var a=0,i=new Array(Je),s=0;r!==0;s++,r>>>=1)i[s]=r&1?e[a++]:void 0;return i[n]=o,new $r(t,a+1,i)}function yc(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function vc(t,e,r,n){var o=n?t:pt(t);return o[e]=r,o}function Dk(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var a=new Array(o),i=0,s=0;s<o;s++)s===e?(a[s]=r,i=-1):a[s]=t[s+i];return a}function Bk(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),a=0,i=0;i<n;i++)i===e&&(a=1),o[i]=t[i+a];return o}var qk=Je/4,zk=Je/2,Lk=Je/4,Oc="@@__IMMUTABLE_LIST__@@";function _c(t){return Boolean(t&&t[Oc])}var N=function(t){function e(r){var n=qn();if(r==null)return n;if(_c(r))return r;var o=t(r),a=o.size;return a===0?n:(He(a),a>0&&a<Je?Gr(0,a,Z,null,new Mt(o.toArray())):n.withMutations(function(i){i.setSize(a),o.forEach(function(s,u){return i.set(u,s)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,o){if(n=Dt(this,n),n>=0&&n<this.size){n+=this._origin;var a=xc(this,n);return a&&a.array[n&Re]}return o},e.prototype.set=function(n,o){return Kk(this,n,o)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,o){return this.splice(n,0,o)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Z,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):qn()},e.prototype.push=function(){var n=arguments,o=this.size;return this.withMutations(function(a){Pt(a,0,o+n.length);for(var i=0;i<n.length;i++)a.set(o+i,n[i])})},e.prototype.pop=function(){return Pt(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(o){Pt(o,-n.length);for(var a=0;a<n.length;a++)o.set(a,n[a])})},e.prototype.shift=function(){return Pt(this,1)},e.prototype.concat=function(){for(var n=arguments,o=[],a=0;a<arguments.length;a++){var i=n[a],s=t(typeof i!="string"&&xa(i)?i:[i]);s.size!==0&&o.push(s)}return o.length===0?this:this.size===0&&!this.__ownerID&&o.length===1?this.constructor(o[0]):this.withMutations(function(u){o.forEach(function(c){return c.forEach(function(l){return u.push(l)})})})},e.prototype.setSize=function(n){return Pt(this,0,n)},e.prototype.map=function(n,o){var a=this;return this.withMutations(function(i){for(var s=0;s<a.size;s++)i.set(s,n.call(o,i.get(s),s,i))})},e.prototype.slice=function(n,o){var a=this.size;return Kn(n,o,a)?this:Pt(this,Xr(n,a),jn(o,a))},e.prototype.__iterator=function(n,o){var a=o?this.size:0,i=ku(this,o);return new J(function(){var s=i();return s===Jr?Pe():re(n,o?--a:a++,s)})},e.prototype.__iterate=function(n,o){for(var a=o?this.size:0,i=ku(this,o),s;(s=i())!==Jr&&n(s,o?--a:a++,this)!==!1;);return a},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Gr(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?qn():(this.__ownerID=n,this.__altered=!1,this)},e}(zt);N.isList=_c;var he=N.prototype;he[Oc]=!0;he[Wr]=he.remove;he.merge=he.concat;he.setIn=wa;he.deleteIn=he.removeIn=Fa;he.update=Ca;he.updateIn=Ea;he.mergeIn=Da;he.mergeDeepIn=Ba;he.withMutations=Qr;he.wasAltered=qa;he.asImmutable=tn;he["@@transducer/init"]=he.asMutable=en;he["@@transducer/step"]=function(t,e){return t.push(e)};he["@@transducer/result"]=function(t){return t.asImmutable()};var Mt=function(e,r){this.array=e,this.ownerID=r};Mt.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var o=n>>>r&Re;if(o>=this.array.length)return new Mt([],e);var a=o===0,i;if(r>0){var s=this.array[o];if(i=s&&s.removeBefore(e,r-Z,n),i===s&&a)return this}if(a&&!i)return this;var u=mr(this,e);if(!a)for(var c=0;c<o;c++)u.array[c]=void 0;return i&&(u.array[o]=i),u};Mt.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var o=n-1>>>r&Re;if(o>=this.array.length)return this;var a;if(r>0){var i=this.array[o];if(a=i&&i.removeAfter(e,r-Z,n),a===i&&o===this.array.length-1)return this}var s=mr(this,e);return s.array.splice(o+1),a&&(s.array[o]=a),s};var Jr={};function ku(t,e){var r=t._origin,n=t._capacity,o=Yr(n),a=t._tail;return i(t._root,t._level,0);function i(c,l,h){return l===0?s(c,h):u(c,l,h)}function s(c,l){var h=l===o?a&&a.array:c&&c.array,p=l>r?0:r-l,d=n-l;return d>Je&&(d=Je),function(){if(p===d)return Jr;var y=e?--d:p++;return h&&h[y]}}function u(c,l,h){var p,d=c&&c.array,y=h>r?0:r-h>>l,g=(n-h>>l)+1;return g>Je&&(g=Je),function(){for(;;){if(p){var O=p();if(O!==Jr)return O;p=null}if(y===g)return Jr;var T=e?--g:y++;p=i(d&&d[T],l-Z,h+(T<<l))}}}}function Gr(t,e,r,n,o,a,i){var s=Object.create(he);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=o,s.__ownerID=a,s.__hash=i,s.__altered=!1,s}var Tu;function qn(){return Tu||(Tu=Gr(0,0,Z))}function Kk(t,e,r){if(e=Dt(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(i){e<0?Pt(i,e).set(0,r):Pt(i,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,o=t._root,a=fa();return e>=Yr(t._capacity)?n=ga(n,t.__ownerID,0,e,r,a):o=ga(o,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Gr(t._origin,t._capacity,t._level,o,n):t}function ga(t,e,r,n,o,a){var i=n>>>r&Re,s=t&&i<t.array.length;if(!s&&o===void 0)return t;var u;if(r>0){var c=t&&t.array[i],l=ga(c,e,r-Z,n,o,a);return l===c?t:(u=mr(t,e),u.array[i]=l,u)}return s&&t.array[i]===o?t:(a&&Ue(a),u=mr(t,e),o===void 0&&i===u.array.length-1?u.array.pop():u.array[i]=o,u)}function mr(t,e){return e&&t&&e===t.ownerID?t:new Mt(t?t.array.slice():[],e)}function xc(t,e){if(e>=Yr(t._capacity))return t._tail;if(e<1<<t._level+Z){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Re],n-=Z;return r}}function Pt(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new Oa,o=t._origin,a=t._capacity,i=o+e,s=r===void 0?a:r<0?a+r:o+r;if(i===o&&s===a)return t;if(i>=s)return t.clear();for(var u=t._level,c=t._root,l=0;i+l<0;)c=new Mt(c&&c.array.length?[void 0,c]:[],n),u+=Z,l+=1<<u;l&&(i+=l,o+=l,s+=l,a+=l);for(var h=Yr(a),p=Yr(s);p>=1<<u+Z;)c=new Mt(c&&c.array.length?[c]:[],n),u+=Z;var d=t._tail,y=p<h?xc(t,s-1):p>h?new Mt([],n):d;if(d&&p>h&&i<a&&d.array.length){c=mr(c,n);for(var g=c,O=u;O>Z;O-=Z){var T=h>>>O&Re;g=g.array[T]=mr(g.array[T],n)}g.array[h>>>Z&Re]=d}if(s<a&&(y=y&&y.removeAfter(n,0,s)),i>=p)i-=p,s-=p,u=Z,c=null,y=y&&y.removeBefore(n,0,i);else if(i>o||p<h){for(l=0;c;){var S=i>>>u&Re;if(S!==p>>>u&Re)break;S&&(l+=(1<<u)*S),u-=Z,c=c.array[S]}c&&i>o&&(c=c.removeBefore(n,u,i-l)),c&&p<h&&(c=c.removeAfter(n,u,p-l)),l&&(i-=l,s-=l)}return t.__ownerID?(t.size=s-i,t._origin=i,t._capacity=s,t._level=u,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):Gr(i,s,u,c,y)}function Yr(t){return t<Je?0:t-1>>>Z<<Z}var Fe=function(t){function e(r){return r==null?Kr():Wu(r)?r:Kr().withMutations(function(n){var o=ze(r);He(o.size),o.forEach(function(a,i){return n.set(i,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,o){var a=this._map.get(n);return a!==void 0?this._list.get(a)[1]:o},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Kr()},e.prototype.set=function(n,o){return Nu(this,n,o)},e.prototype.remove=function(n){return Nu(this,n,D)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(n,o){var a=this;return this._list.__iterate(function(i){return i&&n(i[1],i[0],a)},o)},e.prototype.__iterator=function(n,o){return this._list.fromEntrySeq().__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n),a=this._list.__ensureOwner(n);return n?ja(o,a,n,this.__hash):this.size===0?Kr():(this.__ownerID=n,this._map=o,this._list=a,this)},e}(ce);Fe.isOrderedMap=Wu;Fe.prototype[yr]=!0;Fe.prototype[Wr]=Fe.prototype.remove;function ja(t,e,r,n){var o=Object.create(Fe.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}var Su;function Kr(){return Su||(Su=ja(nt(),qn()))}function Nu(t,e,r){var n=t._map,o=t._list,a=n.get(e),i=a!==void 0,s,u;if(r===D){if(!i)return t;o.size>=Je&&o.size>=n.size*2?(u=o.filter(function(c,l){return c!==void 0&&a!==l}),s=u.toKeyedSeq().map(function(c){return c[0]}).flip().toMap(),t.__ownerID&&(s.__ownerID=u.__ownerID=t.__ownerID)):(s=n.remove(e),u=a===o.size-1?o.pop():o.set(a,void 0))}else if(i){if(r===o.get(a)[1])return t;s=n,u=o.set(a,[e,r])}else s=n.set(e,o.size),u=o.set(o.size,[e,r]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=u,t.__hash=void 0,t):ja(s,u)}var bc="@@__IMMUTABLE_STACK__@@";function ya(t){return Boolean(t&&t[bc])}var st=function(t){function e(r){return r==null?Dn():ya(r)?r:Dn().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,o){var a=this._head;for(n=Dt(this,n);a&&n--;)a=a.next;return a?a.value:o},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var o=this.size+arguments.length,a=this._head,i=arguments.length-1;i>=0;i--)a={value:n[i],next:a};return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):jr(o,a)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&ya(n))return n;He(n.size);var o=this.size,a=this._head;return n.__iterate(function(i){o++,a={value:i,next:a}},!0),this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):jr(o,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Dn()},e.prototype.slice=function(n,o){if(Kn(n,o,this.size))return this;var a=Xr(n,this.size),i=jn(o,this.size);if(i!==this.size)return t.prototype.slice.call(this,n,o);for(var s=this.size-a,u=this._head;a--;)u=u.next;return this.__ownerID?(this.size=s,this._head=u,this.__hash=void 0,this.__altered=!0,this):jr(s,u)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?jr(this.size,this._head,n,this.__hash):this.size===0?Dn():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,o){var a=this;if(o)return new Bt(this.toArray()).__iterate(function(u,c){return n(u,c,a)},o);for(var i=0,s=this._head;s&&n(s.value,i++,this)!==!1;)s=s.next;return i},e.prototype.__iterator=function(n,o){if(o)return new Bt(this.toArray()).__iterator(n,o);var a=0,i=this._head;return new J(function(){if(i){var s=i.value;return i=i.next,re(n,a++,s)}return Pe()})},e}(zt);st.isStack=ya;var Ce=st.prototype;Ce[bc]=!0;Ce.shift=Ce.pop;Ce.unshift=Ce.push;Ce.unshiftAll=Ce.pushAll;Ce.withMutations=Qr;Ce.wasAltered=qa;Ce.asImmutable=tn;Ce["@@transducer/init"]=Ce.asMutable=en;Ce["@@transducer/step"]=function(t,e){return t.unshift(e)};Ce["@@transducer/result"]=function(t){return t.asImmutable()};function jr(t,e,r,n){var o=Object.create(Ce);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var Au;function Dn(){return Au||(Au=jr(0))}var kc="@@__IMMUTABLE_SET__@@";function Va(t){return Boolean(t&&t[kc])}function Tc(t){return Va(t)&&ot(t)}function Sc(t,e){if(t===e)return!0;if(!Ee(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||ie(t)!==ie(e)||$e(t)!==$e(e)||ot(t)!==ot(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!Vn(t);if(ot(t)){var n=t.entries();return e.every(function(u,c){var l=n.next().value;return l&&we(l[1],u)&&(r||we(l[0],c))})&&n.next().done}var o=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{o=!0;var a=t;t=e,e=a}var i=!0,s=e.__iterate(function(u,c){if(r?!t.has(u):o?!we(u,t.get(c,D)):!we(t.get(c,D),u))return i=!1,!1});return i&&t.size===s}function Xt(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ln(t){if(!t||typeof t!="object")return t;if(!Ee(t)){if(!qt(t))return t;t=it(t)}if(ie(t)){var e={};return t.__iterate(function(n,o){e[o]=Ln(n)}),e}var r=[];return t.__iterate(function(n){r.push(Ln(n))}),r}var F=function(t){function e(r){return r==null?Vr():Va(r)&&!ot(r)?r:Vr().withMutations(function(n){var o=t(r);He(o.size),o.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ze(n).keySeq())},e.intersect=function(n){return n=ue(n).toArray(),n.length?ke.intersect.apply(e(n.pop()),n):Vr()},e.union=function(n){return n=ue(n).toArray(),n.length?ke.union.apply(e(n.pop()),n):Vr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return ua(this,this._map.set(n,n))},e.prototype.remove=function(n){return ua(this,this._map.remove(n))},e.prototype.clear=function(){return ua(this,this._map.clear())},e.prototype.map=function(n,o){var a=this,i=[],s=[];return this.forEach(function(u){var c=n.call(o,u,u,a);c!==u&&(i.push(u),s.push(c))}),this.withMutations(function(u){i.forEach(function(c){return u.remove(c)}),s.forEach(function(c){return u.add(c)})})},e.prototype.union=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return n=n.filter(function(a){return a.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(a){for(var i=0;i<n.length;i++)t(n[i]).forEach(function(s){return a.add(s)})})},e.prototype.intersect=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.every(function(s){return s.includes(i)})||a.push(i)}),this.withMutations(function(i){a.forEach(function(s){i.remove(s)})})},e.prototype.subtract=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.some(function(s){return s.includes(i)})&&a.push(i)}),this.withMutations(function(i){a.forEach(function(s){i.remove(s)})})},e.prototype.sort=function(n){return Me(hr(this,n))},e.prototype.sortBy=function(n,o){return Me(hr(this,o,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,o){var a=this;return this._map.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){return this._map.__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n);return n?this.__make(o,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=o,this)},e}(St);F.isSet=Va;var ke=F.prototype;ke[kc]=!0;ke[Wr]=ke.remove;ke.merge=ke.concat=ke.union;ke.withMutations=Qr;ke.asImmutable=tn;ke["@@transducer/init"]=ke.asMutable=en;ke["@@transducer/step"]=function(t,e){return t.add(e)};ke["@@transducer/result"]=function(t){return t.asImmutable()};ke.__empty=Vr;ke.__make=Nc;function ua(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Nc(t,e){var r=Object.create(ke);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var Iu;function Vr(){return Iu||(Iu=Nc(nt()))}var jk=function(t){function e(r,n,o){if(!(this instanceof e))return new e(r,n,o);if(Ra(o!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),o=o===void 0?1:Math.abs(o),n<r&&(o=-o),this._start=r,this._end=n,this._step=o,this.size=Math.max(0,Math.ceil((n-r)/o-1)+1),this.size===0){if(ca)return ca;ca=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,o){return this.has(n)?this._start+Dt(this,n)*this._step:o},e.prototype.includes=function(n){var o=(n-this._start)/this._step;return o>=0&&o<this.size&&o===Math.floor(o)},e.prototype.slice=function(n,o){return Kn(n,o,this.size)?this:(n=Xr(n,this.size),o=jn(o,this.size),o<=n?new e(0,0):new e(this.get(n,this._end),this.get(o,this._end),this._step))},e.prototype.indexOf=function(n){var o=n-this._start;if(o%this._step===0){var a=o/this._step;if(a>=0&&a<this.size)return a}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,o){for(var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;u!==a&&n(s,o?a-++u:u++,this)!==!1;)s+=o?-i:i;return u},e.prototype.__iterator=function(n,o){var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;return new J(function(){if(u===a)return Pe();var c=s;return s+=o?-i:i,re(n,o?a-++u:u++,c)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:Sc(this,n)},e}(Ye),ca;function Ac(t,e,r){for(var n=sc(e),o=0;o!==n.length;)if(t=cc(t,n[o++],D),t===D)return r;return t}function Ic(t,e){return Ac(this,t,e)}function Vk(t,e){return Ac(t,e,D)!==D}function Jk(t){return Vk(this,t)}function Rc(){He(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}ue.isIterable=Ee;ue.isKeyed=ie;ue.isIndexed=$e;ue.isAssociative=Vn;ue.isOrdered=ot;ue.Iterator=J;Xt(ue,{toArray:function(){He(this.size);var e=new Array(this.size||0),r=ie(this),n=0;return this.__iterate(function(o,a){e[n++]=r?[a,o]:o}),e},toIndexedSeq:function(){return new Xu(this)},toJS:function(){return Ln(this)},toKeyedSeq:function(){return new $n(this,!0)},toMap:function(){return ce(this.toKeyedSeq())},toObject:Rc,toOrderedMap:function(){return Fe(this.toKeyedSeq())},toOrderedSet:function(){return Me(ie(this)?this.valueSeq():this)},toSet:function(){return F(ie(this)?this.valueSeq():this)},toSetSeq:function(){return new Zu(this)},toSeq:function(){return $e(this)?this.toIndexedSeq():ie(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return st(ie(this)?this.valueSeq():this)},toList:function(){return N(ie(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return G(this,kk(this,e))},includes:function(e){return this.some(function(r){return we(r,e)})},entries:function(){return this.__iterator(Ge)},every:function(e,r){He(this.size);var n=!0;return this.__iterate(function(o,a,i){if(!e.call(r,o,a,i))return n=!1,!1}),n},filter:function(e,r){return G(this,rc(this,e,r,!0))},find:function(e,r,n){var o=this.findEntry(e,r);return o?o[1]:n},forEach:function(e,r){return He(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){He(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(o){n?n=!1:r+=e,r+=o!=null?o.toString():""}),r},keys:function(){return this.__iterator(Zr)},map:function(e,r){return G(this,tc(this,e,r))},reduce:function(e,r,n){return Ru(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return Ru(this,e,r,n,arguments.length<2,!0)},reverse:function(){return G(this,Na(this,!0))},slice:function(e,r){return G(this,Aa(this,e,r,!0))},some:function(e,r){return!this.every(Bn(e),r)},sort:function(e){return G(this,hr(this,e))},values:function(){return this.__iterator(at)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return lr(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return _k(this,e,r)},equals:function(e){return Sc(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Bt(e._cache);var r=e.toSeq().map(Hk).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(Bn(e),r)},findEntry:function(e,r,n){var o=n;return this.__iterate(function(a,i,s){if(e.call(r,a,i,s))return o=[i,a],!1}),o},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(Mu,null,e)},flatMap:function(e,r){return G(this,Tk(this,e,r))},flatten:function(e){return G(this,oc(this,e,!0))},fromEntrySeq:function(){return new Qu(this)},get:function(e,r){return this.find(function(n,o){return we(o,e)},void 0,r)},getIn:Ic,groupBy:function(e,r){return xk(this,e,r)},has:function(e){return this.get(e,D)!==D},hasIn:Jk,isSubset:function(e){return e=typeof e.includes=="function"?e:ue(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:ue(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return we(r,e)})},keySeq:function(){return this.toSeq().map(Uk).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Pn(this,e)},maxBy:function(e,r){return Pn(this,r,e)},min:function(e){return Pn(this,e?wu(e):Cu)},minBy:function(e,r){return Pn(this,r?wu(r):Cu,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return G(this,nc(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(Bn(e),r)},sortBy:function(e,r){return G(this,hr(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return G(this,bk(this,e,r))},takeUntil:function(e,r){return this.takeWhile(Bn(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=$k(this))}});var Ne=ue.prototype;Ne[qu]=!0;Ne[Un]=Ne.values;Ne.toJSON=Ne.toArray;Ne.__toStringMapper=Ur;Ne.inspect=Ne.toSource=function(){return this.toString()};Ne.chain=Ne.flatMap;Ne.contains=Ne.includes;Xt(ze,{flip:function(){return G(this,ec(this))},mapEntries:function(e,r){var n=this,o=0;return G(this,this.toSeq().map(function(a,i){return e.call(r,[i,a],o++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return G(this,this.toSeq().flip().map(function(o,a){return e.call(r,o,a,n)}).flip())}});var Gn=ze.prototype;Gn[zu]=!0;Gn[Un]=Ne.entries;Gn.toJSON=Rc;Gn.__toStringMapper=function(t,e){return Ur(e)+": "+Ur(t)};Xt(zt,{toKeyedSeq:function(){return new $n(this,!1)},filter:function(e,r){return G(this,rc(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return G(this,Na(this,!1))},slice:function(e,r){return G(this,Aa(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=Xr(e,e<0?this.count():this.size);var o=this.slice(0,e);return G(this,n===1?o:o.concat(pt(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return G(this,oc(this,e,!1))},get:function(e,r){return e=Dt(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,o){return o===e},void 0,r)},has:function(e){return e=Dt(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return G(this,Sk(this,e))},interleave:function(){var e=[this].concat(pt(arguments)),r=Mn(this.toSeq(),Ye.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),G(this,n)},keySeq:function(){return jk(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return G(this,nc(this,e,r,!1))},zip:function(){var e=[this].concat(pt(arguments));return G(this,Mn(this,Fu,e))},zipAll:function(){var e=[this].concat(pt(arguments));return G(this,Mn(this,Fu,e,!0))},zipWith:function(e){var r=pt(arguments);return r[0]=this,G(this,Mn(this,e,r))}});var Yn=zt.prototype;Yn[Lu]=!0;Yn[yr]=!0;Xt(St,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});St.prototype.has=Ne.includes;St.prototype.contains=St.prototype.includes;Xt(It,ze.prototype);Xt(Ye,zt.prototype);Xt(Or,St.prototype);function Ru(t,e,r,n,o,a){return He(t.size),t.__iterate(function(i,s,u){o?(o=!1,r=i):r=e.call(n,r,i,s,u)},a),r}function Uk(t,e){return e}function Hk(t,e){return[e,t]}function Bn(t){return function(){return!t.apply(this,arguments)}}function wu(t){return function(){return-t.apply(this,arguments)}}function Fu(){return pt(arguments)}function Cu(t,e){return t<e?1:t>e?-1:0}function $k(t){if(t.size===1/0)return 0;var e=ot(t),r=ie(t),n=e?1:0,o=t.__iterate(r?e?function(a,i){n=31*n+Eu(qe(a),qe(i))|0}:function(a,i){n=n+Eu(qe(a),qe(i))|0}:e?function(a){n=31*n+qe(a)|0}:function(a){n=n+qe(a)|0});return Gk(o,n)}function Gk(t,e){return e=Lr(e,3432918353),e=Lr(e<<15|e>>>-15,461845907),e=Lr(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Lr(e^e>>>16,2246822507),e=Lr(e^e>>>13,3266489909),e=Hn(e^e>>>16),e}function Eu(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Me=function(t){function e(r){return r==null?va():Tc(r)?r:va().withMutations(function(n){var o=St(r);He(o.size),o.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ze(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(F);Me.isOrderedSet=Tc;var xr=Me.prototype;xr[yr]=!0;xr.zip=Yn.zip;xr.zipWith=Yn.zipWith;xr.__empty=va;xr.__make=wc;function wc(t,e){var r=Object.create(xr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var Pu;function va(){return Pu||(Pu=wc(Kr()))}var M=function(e,r){var n,o=function(s){var u=this;if(s instanceof o)return s;if(!(this instanceof o))return new o(s);if(!n){n=!0;var c=Object.keys(e),l=a._indices={};a._name=r,a._keys=c,a._defaultValues=e;for(var h=0;h<c.length;h++){var p=c[h];l[p]=h,a[p]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+Ua(this)+' with property "'+p+'" since that property name is part of the Record API.'):Yk(a,p)}}this.__ownerID=void 0,this._values=N().withMutations(function(d){d.setSize(u._keys.length),ze(s).forEach(function(y,g){d.set(u._indices[g],y===u._defaultValues[g]?void 0:y)})})},a=o.prototype=Object.create(Y);return a.constructor=o,r&&(o.displayName=r),o};M.prototype.toString=function(){for(var e=Ua(this)+" { ",r=this._keys,n,o=0,a=r.length;o!==a;o++)n=r[o],e+=(o?", ":"")+n+": "+Ur(this.get(n));return e+" }"};M.prototype.equals=function(e){return this===e||e&&this._keys===e._keys&&gr(this).equals(gr(e))};M.prototype.hashCode=function(){return gr(this).hashCode()};M.prototype.has=function(e){return this._indices.hasOwnProperty(e)};M.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],o=this._values.get(n);return o===void 0?this._defaultValues[e]:o};M.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return Ja(this,n)}return this};M.prototype.remove=function(e){return this.set(e)};M.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Ja(this,e)};M.prototype.wasAltered=function(){return this._values.wasAltered()};M.prototype.toSeq=function(){return gr(this)};M.prototype.toJS=function(){return Ln(this)};M.prototype.entries=function(){return this.__iterator(Ge)};M.prototype.__iterator=function(e,r){return gr(this).__iterator(e,r)};M.prototype.__iterate=function(e,r){return gr(this).__iterate(e,r)};M.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?Ja(this,r,e):(this.__ownerID=e,this._values=r,this)};M.isRecord=Jn;M.getDescriptiveName=Ua;var Y=M.prototype;Y[ju]=!0;Y[Wr]=Y.remove;Y.deleteIn=Y.removeIn=Fa;Y.getIn=Ic;Y.hasIn=Ne.hasIn;Y.merge=hc;Y.mergeWith=pc;Y.mergeIn=Da;Y.mergeDeep=mc;Y.mergeDeepWith=gc;Y.mergeDeepIn=Ba;Y.setIn=wa;Y.update=Ca;Y.updateIn=Ea;Y.withMutations=Qr;Y.asMutable=en;Y.asImmutable=tn;Y[Un]=Y.entries;Y.toJSON=Y.toObject=Ne.toObject;Y.inspect=Y.toSource=function(){return this.toString()};function Ja(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Ua(t){return t.constructor.displayName||t.constructor.name||"Record"}function gr(t){return Ta(t._keys.map(function(e){return[e,t.get(e)]}))}function Yk(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){Ra(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch(r){}}function nq(t,e){return Fc([],e||Wk,t,"",e&&e.length>2?[]:void 0,{"":t})}function Fc(t,e,r,n,o,a){var i=Array.isArray(r)?Ye:uc(r)?It:null;if(i){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),o&&n!==""&&o.push(n);var s=e.call(a,n,i(r).map(function(u,c){return Fc(t,e,u,c,o,r)}),o&&o.slice());return t.pop(),o&&o.pop(),s}return r}function Wk(t,e){return ie(e)?e.toMap():e.toList()}f();var U={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",FRAGMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",LEAF:"@@__SLATE_LEAF__@@",MARK:"@@__SLATE_MARK__@@",SELECTION:"@@__SLATE_SELECTION__@@",OPERATION:"@@__SLATE_OPERATION__@@",RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",TEXT:"@@__SLATE_TEXT__@@",VALUE:"@@__SLATE_VALUE__@@"};function Oe(t,e){return!!(e&&e[U[t]])}f();var pf=me(Wn());f();f();var v={};fk(v,{compare:()=>Xn,crop:()=>br,decrement:()=>Zk,increment:()=>Dc,isAbove:()=>nT,isAfter:()=>tT,isBefore:()=>Qk,isEqual:()=>Zn,isOlder:()=>rT,isSibling:()=>oT,isYounger:()=>eT,min:()=>Ha});f();function Ha(t,e){return Math.min(t.length,e.length)}function Xn(t,e){let r=Ha(t,e);for(let n=0;n<r;n++){let o=t[n],a=e[n];if(o<a)return-1;if(o>a)return 1}return t.length===e.length?0:null}function br(t,e,r=Ha(t,e)){let n=t.slice(0,r),o=e.slice(0,r);return[n,o]}function Dc(t,e=1,r=t.length-1){let o=t[r]+e,a=[...t];return a[r]=o,a}function Zk(t,e=1,r=t.length-1){return Dc(t,0-e,r)}function Qk(t,e){let[r,n]=br(t,e);return Xn(r,n)===-1}function eT(t,e){let r=t.length-1,[n,o]=br(t,e,r),a=t[r],i=e[r];return Zn(n,o)&&a<i}function tT(t,e){let[r,n]=br(t,e);return Xn(r,n)===1}function rT(t,e){let r=t.length-1,[n,o]=br(t,e,r),a=t[r],i=e[r];return Zn(n,o)&&a>i}function Zn(t,e){return t.toString()===e.toString()}function nT(t,e){let[r,n]=br(t,e);return t.length<e.length&&Xn(r,n)===0}function oT(t,e){if(t.length!==e.length)return!1;let r=t.slice(0,t.length-1),n=e.slice(0,e.length-1);return Zn(r,n)}f();f();f();var Qn,aT=new Uint8Array(16);function $a(){if(!Qn&&(Qn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Qn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qn(aT)}f();f();f();var Bc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function iT(t){return typeof t=="string"&&Bc.test(t)}var qc=iT;var Te=[];for(eo=0;eo<256;++eo)Te.push((eo+256).toString(16).substr(1));var eo;function sT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Te[t[e+0]]+Te[t[e+1]]+Te[t[e+2]]+Te[t[e+3]]+"-"+Te[t[e+4]]+Te[t[e+5]]+"-"+Te[t[e+6]]+Te[t[e+7]]+"-"+Te[t[e+8]]+Te[t[e+9]]+"-"+Te[t[e+10]]+Te[t[e+11]]+Te[t[e+12]]+Te[t[e+13]]+Te[t[e+14]]+Te[t[e+15]]).toLowerCase();if(!qc(r))throw TypeError("Stringified UUID is invalid");return r}var zc=sT;f();function uT(t,e,r){t=t||{};var n=t.random||(t.rng||$a)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return zc(n)}var Ga=uT;var Lc;jc();function ne(){return Lc()}function Kc(t){Lc=t}function jc(){let t=/-/g,e="";Kc(()=>Ga().replace(t,e))}f();var Ya=me(Vc()),cT=55296,fT=57343,lT=/\s/,hT=/['\u2018\u2019]/,pT=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function dT(t){return cT<=t&&t<=fT}function Jc(t,e){if(lT.test(t))return!1;if(hT.test(t)){let r=e.charAt(0),n=Wa(r);r=e.slice(0,n);let o=e.slice(n);if(Jc(r,o))return!0}return!pT.test(t)}function Wa(t){return dT(t.charCodeAt(0))?2:1}function Uc(t){let e=t.charAt(0);return Wa(e)}function Hc(t,e){return t=t.slice(0,e),t=(0,Ya.reverse)(t),Uc(t)}function $c(t,e){return t=t.slice(e),Uc(t)}function Gc(t){let e=0,r=0,n=!1;for(;;){let o=t.charAt(r);if(!o)break;let a=Wa(o);o=t.slice(r,r+a);let i=t.slice(r+a);if(Jc(o,i))n=!0,e+=a;else if(!n)e+=a;else break;r+=a}return e}function Yc(t,e){return t=t.slice(0,e),t=(0,Ya.reverse)(t),Gc(t)}function Wc(t,e){return t=t.slice(e),Gc(t)}f();var ee={create(t={}){return ce.isMap(t)?t:ce(t)}};f();var sf=me(ef());var uf=me(kr());f();var oo=class{constructor(e,r){this.ownerKey=e,this.m=new Map;for(let n of r)for(let o of n){if(this.m.get(o[0]))throw new Error(`Key "${o[0]}" is already indexed in the LookupIndex, it may indicate a duplicated key in the nodes`);this.m.set(o[0],o[1])}}get(e){let r=[],n=e;for(;n!==this.ownerKey;){let o=this.m.get(n);if(!o)return;n=o.parentKey,r.unshift(o.index)}return Object.freeze(r)}keys(){return this.m.keys()}};function xT(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){if(t[n]>e[n])return 1;if(t[n]<e[n])return-1}return t.length===e.length?0:t.length>e.length?1:-1}function af(t,e){return xT(t,e)===-1}var bT=ve("slate:operation");function Rt(t,e){return t.push(...e),t}var ei=new WeakMap;function Lt(t){return class extends M(t){getDataRef(){if(ei.has(this.data))return ei.get(this.data);let r=Object.freeze(this.data.toJS());return ei.set(this.data,r),r}isText(){return!1}isBlock(){return this.object==="block"}isInline(){return this.object==="inline"}isDocument(){return this.object==="document"}isFragment(){return this.object==="fragment"}getLookupIndex(){return new oo(this.key,this.getIndexPairs())}getIndexPairs(){if(!this.nodes&&!this.fragments)return[];let r=[];r.length=this.nodes.size+(this.isBlock()?this.fragments.size:0);let n=[r];return this.nodes.forEach((o,a)=>{if(r[a]=[o.key,{index:a,parentKey:this.key}],o.isText())return;let i=o.getIndexPairs();Rt(n,i)}),this.isBlock()&&this.fragments.toIndexedSeq().forEach((o,a)=>{let i=this.nodes.size+a;r[i]=[o.key,{index:i,parentKey:this.key}];let s=o.getIndexPairs();Rt(n,s)}),n}getByPath(r){return r.reduce((n,o)=>{if(!n||!n.nodes&&!n.fragments)return null;if(o<n.nodes.size)return n.nodes.get(o);{let a=n.isBlock()?n.fragments.toArray():[],i=o-n.nodes.size;return a[i]?a[i][1]:null}},this)}getPath(r){return r===this.key?[]:this.getLookupIndex().get(r)||null}getByKey(r){let n=this.getPath(r);return n?this.getByPath(n):null}areDescendantsSorted(r,n){let o=this.getPath(r),a=this.getPath(n);return!o||!a?null:af(o,a)}assertChild(r){let n=this.getChild(r);if(!n)throw new Error(`Could not find a child node with key "${r}".`);return n}assertDescendant(r){let n=this.getDescendant(r);if(!n)throw new Error(`Could not find a descendant node with key "${r}".`);return n}assertNode(r){let n=this.getNode(r);if(!n)throw new Error(`Could not find a node with key "${r}".`);return n}assertBlock(r){let n=this.assertNode(r);if(n.object!=="block")throw new Error(`Node "${r}" is not a block.`);return n}assertPath(r){let n=this.getByPath(r);if(!n)throw new Error(`Could not find a descendant at path "${r}".`);return n}filterDescendants(r,n){let o=[];return this.forEachDescendant(a=>{r(a)&&o.push(a)},n),N(o)}findDescendant(r){let n=null;return this.forEachDescendant(o=>{if(r(o))return n=o,!1}),n}forEachDescendant(r,n){let o;return this.nodes.forEach(a=>{if(r(a)===!1)return o=!1,!1;if(a.object!=="text")return o=a.forEachDescendant(r,n),o}),(n==null?void 0:n.withFragments)&&this.isBlock()&&this.fragments.toIndexedSeq().forEach(a=>r(a)===!1?(o=!1,!1):a.forEachDescendant(r,n)),o}getAncestors(r){if(r===this.key)return N();let n=this.getPath(r);if(!n)return null;let a=n.map((i,s)=>n.slice(0,s)).map(i=>this.getByPath(i));return new N(a)}getFragmentAncestors(r){if(r===this.key)return N();let n=this.getPath(r);if(!n)return null;let o=n.map((s,u)=>n.slice(0,u)),a=N(),i=null;for(let s=o.length-1;s>=0;s--){let u=this.getByPath(o[s]);if(u.isBlock()&&i!==null&&u.fragments.some(l=>l.key===i))break;i=u.key,a=a.unshift(u)}return a}getBlocks(){let r=this.getBlocksAsArray();return N(r)}getBlocksAsArray(){return this.nodes.reduce((r,n)=>(n.object!=="block"||(n.isLeafBlock()||Rt(r,n.getBlocksAsArray()),r.push(n)),r),[])}getLeafBlocks(){let r=this.getLeafBlocksAsArray();return N(r)}getLeafBlocksAsArray(){return this.nodes.reduce((r,n)=>n.object!=="block"?r:n.isLeafBlock()?(r.push(n),r):Rt(r,n.getLeafBlocksAsArray()),[])}getBlocksAtRange(r){let n=this.getBlocksAtRangeAsArray(r);return N(new Me(n))}getBlocksAtRangeAsArray(r){if(r=r.normalize(this),r.isUnset)return[];let{startKey:n,endKey:o}=r,a=this.getClosestBlock(n);if(n===o)return[a];let i=this.getClosestBlock(o),s=this.getBlocksAsArray(),u=s.indexOf(a),c=s.indexOf(i);return s.slice(u,c+1)}getBlocksByType(r){let n=this.getBlocksByTypeAsArray(r);return N(n)}getBlocksByTypeAsArray(r){return this.nodes.reduce((n,o)=>o.object!=="block"||(o.type===r&&n.push(o),o.isLeafBlock())?n:Rt(n,o.getBlocksByTypeAsArray(r)),[])}getChild(r){let n=this.getChildIndex(r);return n>=0?this.nodes.get(n):null}getChildIndex(r){let n=this.getPath(r);return!n||n.length!==1?-1:n[0]}getClosest(r,n){let o=this.getAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().findLast(n)}getClosestInFragment(r,n){let o=this.getFragmentAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().findLast(n)}getClosestBlock(r){return this.getClosest(r,n=>n.object==="block")}getClosestInline(r){return this.getClosest(r,n=>n.object==="inline")}getClosestVoid(r){return this.getClosestInFragment(r,n=>n.isVoid)}getFragmentParent(r){let n=this.getFragmentAncestors(r);return!n||n.isEmpty()?null:n.first()}getCommonAncestor(r,n){if(r===this.key)return this;if(n===this.key)return this;this.assertDescendant(r),this.assertDescendant(n);let o=new N,a=this.getParent(r),i=this.getParent(n);for(;a;)o=o.push(a),a=this.getParent(a.key);for(;i;){if(o.includes(i))return i;i=this.getParent(i.key)}return null}getDepth(r,n=1){return this.assertDescendant(r),this.hasChild(r)?n:this.getFurthestAncestor(r).getDepth(r,n+1)}getDescendant(r){let n=this.getPath(r);return n?this.getDescendantAtPath(n):null}getDescendantAtPath(r){return r.length<1?null:this.getByPath(r)}getFirstText(){let r=null,n=this.nodes.find(o=>o.object==="text"?!0:(r=o.getFirstText(),r));return r||n}getFurthest(r,n){let o=this.getAncestors(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);return o.rest().find(n)}getFurthestBlock(r){return this.getFurthest(r,n=>n.object==="block")}getFurthestInline(r){return this.getFurthest(r,n=>n.object==="inline")}getFurthestAncestor(r){let n=this.getPath(r);return n?this.getByPath(n.slice(0,1)):null}getFurthestOnlyChildAncestor(r){let n=this.getAncestors(r);if(!n)throw new Error(`Could not find a descendant node with key "${r}".`);let o=n.shift().reverse().takeUntil(a=>a.nodes.size>1).last();return o||null}getInlinesAtRange(r){let n=this.getInlinesAtRangeAsArray(r);return N(Me(n))}getInlinesAtRangeAsArray(r){return r=r.normalize(this),r.isUnset?[]:this.getTextsAtRangeAsArray(r).map(n=>this.getClosestInline(n.key)).filter(n=>n)}getKeysAsArray(){return[...this.getLookupIndex().keys()]}getKeys(){let r=this.getKeysAsArray();return F(r)}getLastText(){let r=null,n=this.nodes.findLast(o=>o.object==="text"?!0:(r=o.getLastText(),r));return r||n}getMarks(){let r=this.getMarksAsArray();return F(r)}getOrderedMarks(){let r=this.getMarksAsArray();return Me(r)}getMarksAsArray(){let r=[];return this.nodes.forEach(n=>{Rt(r,n.getMarksAsArray())}),r}getMarksAtRange(r){return new F(this.getOrderedMarksAtRange(r))}getInsertMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return F();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset);let{startKey:n,startOffset:o}=r;return this.getDescendant(n).getMarksAtIndex(o+1)}getOrderedMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return Me();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset);let{startKey:n,startOffset:o,endKey:a,endOffset:i}=r;return this.getOrderedMarksBetweenPositions(n,o,a,i)}getOrderedMarksBetweenPositions(r,n,o,a){if(r===o)return this.getDescendant(r).getMarksBetweenOffsets(n,a);let i=this.getTextsBetweenPositionsAsArray(r,o);return Me().withMutations(s=>{i.forEach(u=>{u.key===r?s.union(u.getMarksBetweenOffsets(n,u.text.length)):u.key===o?s.union(u.getMarksBetweenOffsets(0,a)):s.union(u.getMarks())})})}getActiveMarksAtRange(r){if(r=r.normalize(this),r.isUnset)return F();if(r.isCollapsed)return this.getMarksAtPosition(r.startKey,r.startOffset).toSet();let{startKey:n,endKey:o,startOffset:a,endOffset:i}=r,s=this.getDescendant(n);if(n!==o){for(;n!==o&&i===0;){let d=this.getPreviousText(o);o=d.key,i=d.text.length}for(;n!==o&&a===s.text.length;)s=this.getNextText(n),n=s.key,a=0}if(n===o)return s.getActiveMarksBetweenOffsets(a,i);let u=s.getActiveMarksBetweenOffsets(a,s.text.length);if(u.size===0)return F();let l=this.getDescendant(o).getActiveMarksBetweenOffsets(0,i),h=u.intersect(l);if(h.size===0)return h;let p=this.getNextText(n);for(;p.key!==o;){if(p.text.length!==0&&(h=h.intersect(p.getActiveMarks()),h.size===0))return F();p=this.getNextText(p.key)}return h}getMarksAtPosition(r,n){let a=this.getDescendant(r).getMarksAtIndex(n);if(n!==0)return a;let i=this.getClosestBlock(r);if(i.text==="")return a;let s=this.getPreviousText(r);return s?i.hasDescendant(s.key)?s.getMarksAtIndex(s.text.length):a:F()}getMarksByType(r){let n=this.getMarksByTypeAsArray(r);return F(n)}getOrderedMarksByType(r){let n=this.getMarksByTypeAsArray(r);return Me(n)}getMarksByTypeAsArray(r){return this.nodes.reduce((n,o)=>o.object==="text"?Rt(n,o.getMarksAsArray().filter(a=>a.type===r)):Rt(n,o.getMarksByTypeAsArray(r)),[])}getNextBlock(r){let n=this.assertDescendant(r),o;n.object==="block"?o=n.getLastText():o=this.getClosestBlock(r).getLastText();let a=this.getNextText(o.key);return a?this.getClosestBlock(a.key):null}getNextSibling(r){let o=this.getParent(r).nodes.skipUntil(a=>a.key===r);if(o.size===0)throw new Error(`Could not find a child node with key "${r}".`);return o.get(1)}getNextText(r){return this.getTexts().skipUntil(n=>n.key===r).get(1)}getNextTextAfterNode(r){let n=this.assertNode(r);return n.object==="text"?this.getNextText(n.key):this.getTexts().skipUntil(o=>n.hasDescendant(o.key)).skipUntil(o=>!n.hasDescendant(o.key)).get(0)}getNode(r){return this.key===r?this:this.getDescendant(r)}getNodeAtPath(r){return r.length>0?this.getDescendantAtPath(r):this}getOffset(r){this.assertDescendant(r);let n=this.getFurthestAncestor(r),o=this.nodes.takeUntil(a=>a===n).reduce((a,i)=>a+i.text.length,0);return this.hasChild(r)?o:o+n.getOffset(r)}getOffsetAtRange(r){if(r=r.normalize(this),r.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(r.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");let{startKey:n,startOffset:o}=r;return this.getOffset(n)+o}getParent(r){if(this.key===r)return null;let n=this.getPath(r);return n?this.getByPath(n.slice(0,-1)):null}refindPath(r,n){let o=this.getByPath(r);return o&&o.key===n?r:this.getPath(n)}refindNode(r,n){let o=this.getByPath(r);return o&&o.key===n?o:this.getByKey(n)}getPreviousBlock(r){let n=this.assertDescendant(r),o;n.object==="block"?o=n.getFirstText():o=this.getClosestBlock(r).getFirstText();let a=this.getPreviousText(o.key);return a?this.getClosestBlock(a.key):null}getPreviousSibling(r){let n=this.getParent(r),o=n.nodes.takeUntil(a=>a.key===r);if(o.size===n.nodes.size)throw new Error(`Could not find a child node with key "${r}".`);return o.last()}getPreviousText(r){return this.getTexts().takeUntil(n=>n.key===r).last()}getPreviousTextBeforeNode(r){let n=this.assertNode(r);return n.object==="text"?this.getPreviousText(n.key):this.getTexts().takeUntil(o=>n.hasDescendant(o.key)).last()}getSelectionIndexes(r,n=!0){let{startKey:o,endKey:a}=r;if(!n||r.isUnset)return null;if(o===a){let u=this.getFurthestAncestor(o),c=u?this.getChildIndex(u.key):null;return{start:c,end:c+1}}let i=null,s=null;return this.nodes.forEach((u,c)=>(u.object==="text"?(i==null&&u.key===o&&(i=c),s==null&&u.key===a&&(s=c+1)):(i==null&&u.hasDescendant(o)&&(i=c),s==null&&u.hasDescendant(a)&&(s=c+1)),i==null||s==null)),n&&i==null&&(i=0),n&&s==null&&(s=this.nodes.size),i==null?null:{start:i,end:s}}getText(r="",n=""){let o=!this.isInline()&&!this.isText()&&this.nodes.some(a=>a.object==="block")?r:n;return this.nodes.toArray().map(a=>a.getText(r,n)).join(o)}getTextAtOffset(r){if(r===0)return this.getFirstText();if(r===this.text.length)return this.getLastText();if(r<0||r>this.text.length)return null;let n=0;return this.getTexts().find((o,a,i)=>(n+=o.text.length,n>r))}getTextDirection(){let r=(0,sf.default)(this.text);return r==="neutral"?void 0:r}getTexts(){let r=this.getTextsAsArray();return new N(r)}getTextsAsArray(){let r=[];return this.nodes.concat(this.isBlock()?this.fragments.values():[]).forEach(n=>{n.object==="text"?r.push(n):Rt(r,n.getTextsAsArray())}),r}getTextsAtRange(r){if(r=r.normalize(this),r.isUnset)return N();let{startKey:n,endKey:o}=r;return new N(this.getTextsBetweenPositionsAsArray(n,o))}getTextsBetweenPositionsAsArray(r,n){let o=this.getDescendant(r);if(!o.isText())throw new Error(`Expected "${r}" to be a text`);if(r===n)return[o];let a=this.getDescendant(n);if(!a.isText())throw new Error(`Expected "${n}" to be a text`);let i=this.getTextsAsArray(),s=i.indexOf(o),u=i.indexOf(a,s);return i.slice(s,u+1)}getTextsAtRangeAsArray(r){if(r=r.normalize(this),r.isUnset)return[];let{startKey:n,endKey:o}=r;return this.getTextsBetweenPositionsAsArray(n,o)}hasChild(r){return!!this.getChild(r)}hasBlocks(r){let n=this.assertNode(r);return!!(n.nodes&&n.nodes.find(o=>o.object==="block"))}hasInlines(r){let n=this.assertNode(r);return!!(n.nodes&&n.nodes.find(o=>o.isInline||o.isText))}hasDescendant(r){let n=this.getPath(r);return n?n.length>0:!1}hasNode(r){return!!this.getNode(r)}hasNodeKeyConflict(r){if(this.key===r.key||this.hasNode(r.key))return!0;if(r.object==="text")return!1;let n=r.getKeysAsArray(),o=this.getKeysAsArray();return n.some(a=>o.includes(a))}hasVoidParent(r){return!!this.getClosestVoid(r)}isInFragment(r){var n;return((n=this.getFragmentParent(r))==null?void 0:n.object)==="fragment"}insertData(r,n){return this.merge({data:this.data.setIn(r,n)})}insertArrayData(r,n,o){let a=this.data.getIn(r);if(!Array.isArray(a))return this;let i=o>=-1?o:o+1,s=o===-1?a.concat(n):[...a.slice(0,i),n,...a.slice(i)];return this.merge({data:this.data.setIn(r,s)})}removeArrayData(r,n){let o=this.data.getIn(r);if(!Array.isArray(o))return this;let a=o.filter(i=>i!==n);return this.merge({data:this.data.setIn(r,a)})}removeData(r){return this.merge({data:this.data.removeIn(r)})}insertNode(r,n){n.object!=="text"&&(n=n.mapDescendants(a=>this.hasNode(a.key)?a.regenerateKey():a));let o=this.nodes.insert(r,n);return this.set("nodes",o)}isInRange(r){r=r.normalize(this);let n=this,{startKey:o,endKey:a,isCollapsed:i}=r;if(n.key===o||n.key===a||n.hasDescendant(o)||n.hasDescendant(a))return!0;if(i)return!1;let s=n.getTextsAtRange(r),u=!1;return s.forEach(c=>(n.hasDescendant(c.key)&&(u=!0),u)),u}isLeafBlock(){return this.object==="block"&&this.nodes.every(r=>r.object!=="block")}isLeafInline(){return this.object==="inline"&&this.nodes.every(r=>r.object!=="inline")}mergeNode(r,n){let o=this,a=o.nodes.get(r),i=o.nodes.get(n);if(a.object!==i.object)throw new Error(`Tried to merge two nodes of different objects: "${a.object}" and "${i.object}".`);if(a.object==="text")a=a.mergeText(i);else{let s=a.nodes.concat(i.nodes);a=a.set("nodes",s)}return o.removeNode(n).removeNode(r).insertNode(r,a)}mapChildren(r){let{nodes:n}=this;return n.forEach((o,a)=>{let i=r(o,a,this.nodes);i!==o&&(n=n.set(i.key,i))}),this.merge({nodes:n})}mapDescendants(r){let n=[],o,a=!1;return this.nodes&&this.nodes.forEach((i,s)=>{let u=i;u.object!=="text"&&(u=u.mapDescendants(r)),u=r(u,s,this.nodes),u&&n.push(u),u!==i&&(a=!0)}),this.isBlock()&&(o=[],this.fragments.toIndexedSeq().forEach((i,s)=>{let u=i;u=u.mapDescendants(r),u=r(u,s,this.fragments),u&&o.push(u),u!==i&&(a=!0)})),a?this.merge(x({nodes:N(n)},o?{fragments:Fe(o.map(i=>[i.fragmentKey,i]))}:{})):this}regenerateKey(){let r=ne();return this.merge({key:r})}regenerateTextKeys(){return this.mapDescendants(r=>r.object==="text"?r.regenerateKey():r)}regenerateAllKeys(){return this.regenerateKey().mapDescendants(n=>n.regenerateKey())}removeDescendant(r){let n=this,o=n.getParent(r);if(!o)throw new Error(`Could not find a descendant node with key "${r}".`);let a=o.getChildIndex(r),i=o.nodes.delete(a);return o=o.merge({nodes:i}),n=n.updateNode(o),n}removeNode(r){let n=this.nodes.delete(r);return this.merge({nodes:n})}splitNode(r,n,o=ne()){let a=this,i=a.nodes.get(r),s,u;if(i.object==="text")[s,u]=i.splitText(n);else{let l=i.nodes.take(n),h=i.nodes.skip(n);s=i.merge({nodes:l}),u=i.merge({nodes:h})}if(s.get("key")===o){let l=ne();bT.warning(`Passed key "${o}" is identical to the source node one. Generated a new one "${l}"."`),u=u.set("key",l)}else u=u.set("key",o);return a.removeNode(r).insertNode(r,u).insertNode(r,s)}updateNode(r){if(r.key===this.key)return r;let n=this.assertDescendant(r.key);return this.getAncestors(r.key).reverse().forEach(a=>{let{nodes:i,fragments:s}=a,u=a.getChildIndex(n.key);n=a,r.object==="fragment"&&a.fragments.has(r.fragmentKey)?(s=s.set(r.fragmentKey,r),a=a.set("fragments",s)):(i=i.set(u,r),a=a.set("nodes",i)),r=a}),r}toJS(){throw new Error("This method should not be used, instead use serialize/deserialize")}}}function Qt(t){if(t.object!=="text")throw new Error(`Expected node "${t.key}" to be a text`);return t}function Kt(t,e=[]){(0,uf.default)(t.prototype,["areDescendantsSorted","getAncestors","getBlocksAsArray","getBlocksAtRangeAsArray","getBlocksByTypeAsArray","getLeafBlocksAsArray","getChild","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getDepth","getDescendant","getDescendantAtPath","getFirstText","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getOrderedMarksBetweenPositions","getInsertMarksAtRange","getKeysAsArray","getLastText","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getText","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPositionsAsArray","isLeafBlock","isLeafInline","getLookupIndex","getIndexPairs",...e])}f();var hf=me(kr());f();f();var cf=me(kr()),ff=me(Wn());var q=class extends M({data:ce(),type:""}){get object(){return"mark"}static isMark(e){return Oe("MARK",e)}static create(e={}){return q.isMark(e)?e:(typeof e=="string"&&(e={type:e}),new q(k(x({},e),{data:ce(e.data||{})})))}static createSet(e){if(!e)return F();if(F.isSet(e))return e;if(Array.isArray(e))return F(e.map(r=>q.create(r)));throw new Error(`\`Mark.createSet\` only accepts sets, arrays or null, but you passed it: ${e}`)}static createProperties(e={}){if(q.isMark(e))return{data:e.data,type:e.type};if(typeof e=="string")return{type:e};if((0,ff.default)(e)){let r={};return"type"in e&&(r.type=e.type),"data"in e&&(r.data=ee.create(e.data)),r}throw new Error(`\`Mark.createProperties\` only accepts objects, strings or marks, but you passed it: ${e}`)}static isMarkSet(e){return F.isSet(e)&&e.every(r=>q.isMark(r))}getComponent(e){return e.__getComponent(this)}};q.prototype[U.MARK]=!0;(0,cf.default)(q.prototype,["getComponent"]);f();var ti=me(lk());var lf=me(Wn());var ao=ve("slate:range"),oe=class extends M({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null,isAtomic:!1,data:ce()}){get object(){return"range"}get isBlurred(){return!this.isFocused}get isCollapsed(){return this.anchorKey===this.focusKey&&this.anchorOffset===this.focusOffset}get isExpanded(){return!this.isCollapsed}get isForward(){return this.isBackward==null?null:!this.isBackward}get isSet(){return this.anchorKey!=null&&this.focusKey!=null}get isUnset(){return!this.isSet}get startKey(){return this.isBackward?this.focusKey:this.anchorKey}get startOffset(){return this.isBackward?this.focusOffset:this.anchorOffset}get endKey(){return this.isBackward?this.anchorKey:this.focusKey}get endOffset(){return this.isBackward?this.anchorOffset:this.focusOffset}static create(r={}){return oe.isRange(r)?r:new oe(k(x({},r),{data:ee.create(r.data||{}),marks:r.marks?q.createSet(r.marks):null}))}static createSet(r){if(!r)return F();if(F.isSet(r))return r;if(Array.isArray(r))return F(r.map(n=>oe.create(n)));throw new Error(`\`Range.createSet\` only accepts sets, arrays or null, but you passed it: ${r}`)}static createProperties(r={}){if(oe.isRange(r))return{anchorKey:r.anchorKey,anchorOffset:r.anchorOffset,focusKey:r.focusKey,focusOffset:r.focusOffset,isBackward:r.isBackward,isFocused:r.isFocused,marks:r.marks,isAtomic:r.isAtomic,data:r.data};if((0,lf.default)(r)){let n={};return"anchorKey"in r&&(n.anchorKey=r.anchorKey),"anchorOffset"in r&&(n.anchorOffset=r.anchorOffset),"focusKey"in r&&(n.focusKey=r.focusKey),"focusOffset"in r&&(n.focusOffset=r.focusOffset),"isBackward"in r&&(n.isBackward=r.isBackward),"isFocused"in r&&(n.isFocused=r.isFocused),"marks"in r&&(n.marks=r.marks?q.createSet(r.marks):null),"isAtomic"in r&&(n.isAtomic=r.isAtomic),"data"in r&&(n.data=ee.create(r.data)),n}throw new Error(`\`Range.createProperties\` only accepts objects or ranges, but you passed it: ${r}`)}static isRange(r){return!!(r&&r[U.RANGE])}hasAnchorAtStartOf(r){if(this.anchorOffset!==0)return!1;let n=io(r);return this.anchorKey===n.key}hasAnchorAtEndOf(r){let n=so(r);return this.anchorKey===n.key&&this.anchorOffset===n.text.length}hasAnchorBetween(r,n,o){return this.anchorOffset<=o&&n<=this.anchorOffset&&this.hasAnchorIn(r)}hasAnchorIn(r){return r.object==="text"?r.key===this.anchorKey:this.anchorKey!=null&&r.hasDescendant(this.anchorKey)}hasFocusAtEndOf(r){let n=so(r);return this.focusKey===n.key&&this.focusOffset===n.text.length}hasFocusAtStartOf(r){if(this.focusOffset!==0)return!1;let n=io(r);return this.focusKey===n.key}hasFocusBetween(r,n,o){return n<=this.focusOffset&&this.focusOffset<=o&&this.hasFocusIn(r)}hasFocusIn(r){return r.object==="text"?r.key===this.focusKey:this.focusKey!=null&&r.hasDescendant(this.focusKey)}hasOnlyNodeSelected(r){return this.isCollapsed&&this.hasFocusIn(r)}hasOnlyNodeFocused(r){return this.isFocused&&this.hasOnlyNodeSelected(r)}hasFocusInFragmentOf(r){if(!this.hasFocusIn(r))return null;let n=r.getAncestors(this.startKey);return n&&n.find(a=>a.object==="fragment")||null}isAtStartOf(r){return this.isCollapsed&&this.hasAnchorAtStartOf(r)}isAtEndOf(r){return this.isCollapsed&&this.hasAnchorAtEndOf(r)}focus(){return this.merge({isFocused:!0})}blur(){return this.merge({isFocused:!1})}deselect(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1,data:ce()})}flip(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:this.isBackward==null?null:!this.isBackward})}moveAnchor(r=1){let{anchorKey:n,focusKey:o,focusOffset:a,isBackward:i}=this,s=this.anchorOffset+r;return this.merge({anchorOffset:s,isBackward:n===o?s>a:i})}moveFocus(r=1){let{anchorKey:n,anchorOffset:o,focusKey:a,isBackward:i}=this,s=this.focusOffset+r;return this.merge({focusOffset:s,isBackward:a===n?o>s:i})}moveAnchorTo(r,n){let{anchorKey:o,focusKey:a,focusOffset:i,isBackward:s}=this;return this.merge({anchorKey:r,anchorOffset:n,isBackward:r===a?n>i:r===o?s:null})}moveFocusTo(r,n){let{focusKey:o,anchorKey:a,anchorOffset:i,isBackward:s}=this;return this.merge({focusKey:r,focusOffset:n,isBackward:r===a?i>n:r===o?s:null})}moveAnchorOffsetTo(r){return this.merge({anchorOffset:r,isBackward:this.anchorKey===this.focusKey?r>this.focusOffset:this.isBackward})}moveFocusOffsetTo(r){return this.merge({focusOffset:r,isBackward:this.anchorKey===this.focusKey?this.anchorOffset>r:this.isBackward})}moveOffsetsTo(r,n=r){return this.moveAnchorOffsetTo(r).moveFocusOffsetTo(n)}moveToAnchor(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}moveToFocus(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}moveAnchorToStartOf(r){return r=io(r),this.moveAnchorTo(r.key,0)}moveAnchorToEndOf(r){return r=so(r),this.moveAnchorTo(r.key,r.text.length)}moveFocusToStartOf(r){return r=io(r),this.moveFocusTo(r.key,0)}moveFocusToEndOf(r){return r=so(r),this.moveFocusTo(r.key,r.text.length)}moveToRangeOf(r,n=r){return(this.isBackward?this.flip():this).moveAnchorToStartOf(r).moveFocusToEndOf(n)}normalize(r){let n=this,{anchorOffset:o,focusOffset:a,isBackward:i}=n,{anchorKey:s,focusKey:u}=n,c=typeof o,l=typeof a;if((c!=="number"||l!=="number")&&ao.warning(`The range offsets should be numbers, but they were of type "${c}" and "${l}".`),s==null||u==null)return n.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});let h=r.getDescendant(s),p=r.getDescendant(u);if(!h||!p){ao.warning("The range was invalid and was reset. The range in question was:",n);let g=r.getFirstText();return n.merge({anchorKey:g?g.key:null,anchorOffset:0,focusKey:g?g.key:null,focusOffset:0,isBackward:!1})}if(h.object!=="text"){ao.warning("The range anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",h);let g=h.getTextAtOffset(o);o-=h.getOffset(g.key),h=g}if(p.object!=="text"){ao.warning("The range focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",p);let g=p.getTextAtOffset(a);a-=p.getOffset(g.key),p=g}i==null&&(h.key===p.key?i=o>a:i=!r.areDescendantsSorted(h.key,p.key));let d=r.getDescendant(s),y=r.getDescendant(u);return o=(0,ti.default)(o,0,d.text.length),a=(0,ti.default)(a,0,y.text.length),n.merge({anchorKey:h.key,anchorOffset:o,focusKey:p.key,focusOffset:a,isBackward:i})}hasMoved(r){return!we(this.merge({isFocused:!1,isBackward:!1,marks:null}),r.merge({isFocused:!1,isBackward:!1,marks:null}))}};oe.prototype[U.RANGE]=!0;var kT=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];kT.forEach(([t,e])=>{oe.prototype[`${t}${e}`]=function(...r){return this[`${t}Anchor${e}`](...r)[`${t}Focus${e}`](...r)}});var TT=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];TT.forEach(([t,e,r])=>{let n=`${t}Anchor${e}`,o=`${t}Focus${e}`;oe.prototype[`${t}Start${e}`]=function(...a){return this.isBackward?this[o](...a):this[n](...a)},oe.prototype[`${t}End${e}`]=function(...a){return this.isBackward?this[n](...a):this[o](...a)},r&&(oe.prototype[`${t}Edge${e}`]=function(...a){return this[n](...a)||this[o](...a)})});var ST=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];ST.forEach(([t,e])=>{oe.prototype[t]=function(...r){return this[e](...r)}});function io(t){return t.object==="text"?t:"getFirstText"in t?t.getFirstText():null}function so(t){return t.object==="text"?t:"getLastText"in t?t.getLastText():null}var B=class extends M({marks:F(),selections:F(),text:""}){get object(){return"leaf"}static isLeaf(e){return Oe("LEAF",e)}static create(e={}){return typeof e=="string"?new B({text:e}):new B({text:e.text||"",marks:q.createSet(e.marks||[]),selections:oe.createSet(e.selections||[])})}static createLeaves(e){if(e.size<=1)return e;let r=!1,n=N().withMutations(o=>{e.findLast((a,i)=>{let s=o.first();if(s){if(s.marks.equals(a.marks)&&s.selections.equals(a.selections))return r=!0,o.set(0,s.set("text",`${a.text}${s.text}`)),!1;if(s.text==="")return r=!0,o.set(0,a),!1;if(a.text==="")return r=!0,!1}return o.unshift(a),!1})});return r?n:e}static splitLeaves(e,r){if(r<0)return[N(),e];if(e.size===0)return[N(),N()];let n=0,o=-1,a,i;return e.find(s=>{o++;let u=n,{text:c}=s;if(n+=c?c.length:0,n<r||u>r)return!1;let l=r-u;return a=s.set("text",c.slice(0,l)),i=s.set("text",c.slice(l)),!0}),a?a.text===""?o===0?[N.of(a),e]:[e.take(o),e.skip(o)]:i.text===""?o===e.size-1?[e,N.of(i)]:[e.take(o+1),e.skip(o+1)]:[e.take(o).push(a),e.skip(o+1).unshift(i)]:[e,N()]}static isLeafList(e){return N.isList(e)&&e.every(r=>B.isLeaf(r))}updateMark(e,r){let{marks:n}=this;if(r.equals(e))return this;if(!n.has(e))return this;let o=n.withMutations(a=>{a.remove(e).add(r)});return this.set("marks",o)}addMarks(e){let{marks:r}=this;return this.set("marks",r.union(e))}removeMark(e){let{marks:r}=this;return this.set("marks",r.remove(e))}addSelection(e){let{selections:r}=this;return this.set("selections",r.add(e))}};B.prototype[U.LEAF]=!0;var z=class extends M({leaves:N(),key:""}){constructor(){super(...arguments);this.type="text"}get object(){return"text"}get isEmpty(){return this.text===""}get text(){return this.getString()}static isText(r){return Oe("TEXT",r)}static isTextList(r){return N.isList(r)&&r.every(n=>z.isText(n))}static create(r=""){return z.isText(r)?r:typeof r=="string"?new z({key:ne(),leaves:N([B.create(r)])}):"leaves"in r?new z({key:r.key||ne(),leaves:N.isList(r.leaves)?r.leaves:N(r.leaves||[])}):new z({key:r.key||ne(),leaves:N([B.create(r)])})}isText(){return!0}isBlock(){return!1}isInline(){return!1}getString(){return this.leaves.reduce((r,n)=>r+n.text,"")}getText(r="",n=""){return this.getString()}searchLeafAtOffset(r){let n=0,o=0,a=-1;return{leaf:this.leaves.find(s=>(a++,o=n,n=o+s.text.length,n>=r)),endOffset:n,index:a,startOffset:o}}addMark(r,n,o){let a=F.of(o);return this.addMarks(r,n,a)}addMarks(r,n,o){if(this.text===""&&n===0&&r===0){let{leaves:c}=this,l=c.first(null);if(!l)return this.set("leaves",N.of(B.create({text:"",marks:o})));let h=l.addMarks(o);return h===l?this:this.set("leaves",N.of(h))}if(this.text==="")return this;if(n===0)return this;if(r>=this.text.length)return this;let[a,i]=B.splitLeaves(this.leaves,r),[s,u]=B.splitLeaves(i,n);return this.setLeaves(a.concat(s.map(c=>c.addMarks(o)),u))}getLeaves(r=[],n=!1){let{leaves:o}=this;if(o.size===0)return N.of(B.create({}));if(!r||r.length===0||this.text.length===0)return o;let{key:a}=this;return r.forEach(i=>{let{startKey:s,endKey:u,startOffset:c,endOffset:l,marks:h}=i,p=s===a,d=u===a;if(p||d){let y=p?c:0,g=d?l-y:this.text.length-y;if(g<1||y>=this.text.length)return;if(y!==0||g<this.text.length){let[O,T]=B.splitLeaves(o,y),[S,C]=B.splitLeaves(T,g);o=O.concat(S.map(I=>(h&&h.size>0&&(I=I.addMarks(h)),n&&(I=I.addSelection(i)),I)),C);return}}o=o.map(y=>(h&&h.size>0&&(y=y.addMarks(h)),n&&(y=y.addSelection(i)),y))}),o===this.leaves?o:B.createLeaves(o)}getLeavesAndSelections(r,n){let o=this.getLeaves(r,!1);if(!n||n.size===0)return o;let a=this.getLeaves(n.toArray(),!0),{key:i}=this;return n.forEach(s=>{let{focusKey:u,focusOffset:c}=s;if(u===i)if(c!==0){let[h,p]=B.splitLeaves(a,c);a=h.push(s).concat(p)}else a=a.insert(0,s)}),a}getActiveMarksBetweenOffsets(r,n){if(r<=0&&n>=this.text.length)return this.getActiveMarks();if(r>=n)return F();if(this.text==="")return this.getActiveMarks();let o=null,a=0;return this.leaves.forEach(i=>{let s=a;if(a=s+i.text.length,!(a<=r)){if(s>=n)return!1;if(!o){o=i.marks;return}return o=o.intersect(i.marks),o&&o.size===0,!1}}),o||F()}getActiveMarks(){if(this.leaves.size===0)return F();let r=this.leaves.first(null).marks;return r.size===0?r:r.withMutations(n=>{this.leaves.forEach(o=>{if(n.intersect(o.marks),n.size===0)return!1})})}getMarksBetweenOffsets(r,n){if(r<=0&&n>=this.text.length)return this.getMarks();if(r>=n)return F();if(this.text==="")return this.getActiveMarks();let o=null,a=0;return this.leaves.forEach(i=>{let s=a;if(a=s+i.text.length,!(a<=r)){if(s>=n)return!1;if(!o){o=i.marks;return}o=o.union(i.marks)}}),o||F()}getMarks(){let r=this.getMarksAsArray();return Me(r)}getMarksAsArray(){if(this.leaves.size===0)return[];let r=this.leaves.first(null).marks;if(this.leaves.size===1)return r.toArray();let n=[];return this.leaves.forEach(o=>{n.push(o.marks.toArray())}),Array.prototype.concat.apply(r.toArray(),n)}getMarksAtIndex(r){let{leaf:n}=this.searchLeafAtOffset(r);return n?n.marks:F()}getNode(r){return this.key===r?this:null}hasNode(r){return!!this.getNode(r)}insertText(r,n,o=F()){if(this.text==="")return this.set("leaves",N.of(B.create({text:n,marks:o})));if(n.length===0)return this;let{startOffset:a,leaf:i,index:s}=this.searchLeafAtOffset(r),u=r-a,c=i.text.slice(0,u),l=i.text.slice(u),{leaves:h}=this;if(i.marks.equals(o))return this.set("leaves",h.set(s,i.set("text",c+n+l)));let p=h.splice(s,1,i.set("text",c),B.create({text:n,marks:o}),i.set("text",l));return this.setLeaves(p)}regenerateKey(){let r=ne();return this.merge({key:r})}removeMark(r,n,o){if(this.text===""&&r===0&&n===0){let l=this.leaves.first(null);if(!l)return this;let h=l.removeMark(o);return h===l?this:this.set("leaves",N.of(h))}if(n<=0)return this;if(r>=this.text.length)return this;let[a,i]=B.splitLeaves(this.leaves,r),[s,u]=B.splitLeaves(i,n),c=a.concat(s.map(l=>l.removeMark(o)),u);return this.setLeaves(c)}removeText(r,n){if(n<=0)return this;if(r>=this.text.length)return this;if(n===1){let{leaf:u,index:c,startOffset:l}=this.searchLeafAtOffset(r+1),h=r-l;if(u){if(u.text.length===1)return this.setLeaves(this.leaves.remove(c));let p=u.text.slice(0,h),d=u.text.slice(h+n),y=p+d;if(y.length>0)return this.set("leaves",this.leaves.set(c,u.set("text",y)))}}let[o,a]=B.splitLeaves(this.leaves,r),i=B.splitLeaves(a,n)[1],s=B.createLeaves(o.concat(i));if(s.size===1){let u=s.first(null);if(u.text==="")return this.set("leaves",N.of(u.set("marks",this.getActiveMarks())))}return this.merge({leaves:s})}updateMark(r,n,o,a){let i=o.merge(a);if(this.text===""&&n===0&&r===0){let p=this.leaves.first(null);if(!p)return this;let d=p.updateMark(o,i);return d===p?this:this.set("leaves",N.of(d))}if(n<=0)return this;if(r>=this.text.length)return this;let[s,u]=B.splitLeaves(this.leaves,r),[c,l]=B.splitLeaves(u,n),h=s.concat(c.map(p=>p.updateMark(o,i)),l);return this.setLeaves(h)}mapMark(r){return this.setLeaves(this.leaves.map(n=>n.merge({marks:n.marks.map(o=>r(o)).filter(Boolean)})))}splitText(r){let n=B.splitLeaves(this.leaves,r),o=this.set("leaves",n[0]),a=this.set("leaves",n[1]).regenerateKey();return[o,a]}splitBy(r){let o=this.getString().indexOf(r);if(o===-1)return[this];let[a,i]=this.splitText(o);return[a,...i.sliceText(r.length).splitBy(r)]}sliceText(r){let n=r,o=this.leaves.map(a=>{if(n<=0)return a;let i=Math.min(n,a.text.length);return n-=i,a.merge({text:a.text.slice(i)})});return this.merge({leaves:o})}mergeText(r){let n=this.leaves.concat(r.leaves);return this.setLeaves(n)}setLeaves(r){let n=B.createLeaves(r);if(n.size===1){let o=n.first(null);if((!o.marks||o.marks.size===0)&&o.text==="")return this.set("leaves",N())}return this.set("leaves",B.createLeaves(r))}toJS(){throw new Error("This method should not be used, instead use serialize/deserialize")}};z.prototype[U.TEXT]=!0;(0,hf.default)(z.prototype,["getActiveMarks","getMarks","getMarksAsArray","getString"]);var H=class extends Lt({key:"",isVoid:!1,type:"",data:ce(),fragments:Fe(),nodes:N()}){get object(){return"block"}get dataRef(){return this.getDataRef()}get isEmpty(){return!this.isVoid&&!this.nodes.some(r=>!r.isEmpty)}get text(){return this.getText()}get blockNodes(){return this.nodes.size===0||!H.isBlock(this.nodes.get(0))?N():this.nodes}static create(r={}){return H.isBlock(r)?r:typeof r=="string"?new H({key:ne(),type:r}):new H({type:r.type||"",key:r.key||ne(),data:ee.create(r.data||{}),isVoid:r.isVoid||!1,fragments:Fe.isOrderedMap(r.fragments)?r.fragments:Fe((r.fragments||[]).map(n=>[n.fragmentKey,n])),nodes:N.isList(r.nodes)?r.nodes:N(r.nodes)})}static createVoid(r={}){return H.isBlock(r)?r.merge({isVoid:!0,nodes:N([z.create()])}):typeof r=="string"?new H({key:ne(),type:r,isVoid:!0,nodes:N([z.create()])}):H.create(x({isVoid:!0,nodes:N([z.create()])},r))}static isBlock(r){return Oe("BLOCK",r)}static isBlockList(r){return N.isList(r)&&r.every(n=>H.isBlock(n))}setFragment(r){let n=this.fragments.set(r.fragmentKey,r);return this.merge({fragments:n})}insertFragment(r,n){if(this.hasFragment(r.fragmentKey)){if(r.fragment)throw new Error("Named fragment already exist");r=r.regenerateKey()}if(n>this.fragments.size)throw new Error(`The provided index (${n}) cannot be greater than the size of the map (${this.fragments.size})`);if(n===this.fragments.size)return this.setFragment(r);let o=this.fragments.slice(0,n),a=this.fragments.slice(n),i=o.set(r.fragmentKey,r).concat(a);return this.merge({fragments:i})}hasFragment(r){return this.fragments.has(r)}getFragmentByKey(r){return this.fragments.get(r)}removeFragmentByKey(r){let n=this.fragments.remove(r);return this.merge({fragments:n})}removeFragment(r){return this.removeFragmentByKey(r.fragmentKey)}};H.prototype[U.BLOCK]=!0;Kt(H);f();var ae=class extends Lt({key:"",data:ce(),nodes:N(),type:"",isVoid:!1}){get object(){return"inline"}get dataRef(){return this.getDataRef()}get isEmpty(){return!this.isVoid&&!this.nodes.some(r=>!r.isEmpty)}get text(){return this.getText()}static isInline(r){return Oe("INLINE",r)}static isInlineList(r){return N.isList(r)&&r.every(n=>ae.isInline(n))}static create(r={}){return ae.isInline(r)?r:typeof r=="string"?new ae({key:ne(),type:r}):new ae(k(x({},r),{key:r.key||ne(),data:ee.create(r.data||{}),nodes:N(r.nodes||[])}))}static createVoid(r={}){return ae.isInline(r)?r.merge({isVoid:!0,nodes:N([z.create()])}):typeof r=="string"?new ae({key:ne(),type:r,isVoid:!0,nodes:N([z.create()])}):ae.create(x({isVoid:!0,nodes:N([z.create()])},r))}};ae.prototype[U.INLINE]=!0;Kt(ae);function er(t={}){if(H.isBlock(t)||ae.isInline(t))return{key:t.key,data:t.data,fragments:t.fragments,isVoid:t.isVoid,type:t.type};if(typeof t=="string")return{type:t};if((0,pf.default)(t)){let e={};return"key"in t&&(e.key=t.key),"type"in t&&(e.type=t.type),"data"in t&&(e.data=ee.create(t.data)),"isVoid"in t&&(e.isVoid=t.isVoid),"fragments"in t&&(e.fragments=t.fragments),e}throw new Error(`\`Node.createProperties\` only accepts objects, strings, blocks or inlines, but you passed it: ${t}`)}var NT={length:void 0,mark:void 0,marks:void 0,newPath:void 0,node:void 0,offset:void 0,path:void 0,fragmentPath:void 0,position:void 0,properties:void 0,selection:void 0,target:void 0,text:void 0,type:void 0,data:void 0,dataPath:void 0,dataIndex:void 0,previousData:void 0},_=class extends M(NT){static create(r){switch(r.type){case"merge_node":case"split_node":return new _(k(x({},r),{properties:er(r.properties)}));case"set_node":return new _(k(x({},r),{properties:er(r.properties)}));default:return new _(r)}}static isOperation(r){return!!(r&&r[U.OPERATION])}get object(){return"operation"}};_.prototype[U.OPERATION]=!0;f();f();var AT=ve("slate:document"),ge=class extends Lt({key:"",data:ce(),nodes:N()}){constructor(){super(...arguments);this.type=void 0}get object(){return"document"}get isEmpty(){return!this.nodes.some(r=>!r.isEmpty)}get text(){return this.getText()}static isDocument(r){return Oe("DOCUMENT",r)}static create(r={}){return new ge({key:r.key||ne(),data:ee.create(r.data),nodes:N.isList(r.nodes)?r.nodes:N(r.nodes)})}getFragmentAtRange(r,n=!0){if(r=r.normalize(this),r.isUnset)return ge.create();let o=this,{startKey:a,startOffset:i,endKey:s,endOffset:u}=r,c=o.assertDescendant(a),l=o.assertDescendant(s);if(r.isCollapsed&&z.isText(c)&&c.isEmpty){let E=o.getParent(c.key);if(H.isBlock(E)&&E.isVoid)return ge.create({nodes:[E]})}let h=o.getFragmentParent(a),p=o.getFragmentParent(s);if((h==null?void 0:h.object)==="fragment"&&(p==null?void 0:p.object)==="fragment")if(h.key===p.key)o=h;else return null;let d=c,y,g,O=[];for(;g=o.getParent(d.key),!!g;){let E=g.getChildIndex(d.key),se=d.object==="text"?i:d.getChildIndex(y.key);g=g.splitNode(E,se),o=o.updateNode(g),y=g.nodes.get(E+1),O.unshift(y.key),d=g}d=a===s?o.getNextText(a):l;let T=[];for(;g=o.getParent(d.key),!!g;){let E=g.getChildIndex(d.key),se=d.object==="text"?a===s?u-i:u:d.getChildIndex(y.key);g=g.splitNode(E,se),o=o.updateNode(g),y=g.nodes.get(E+1),T.unshift(g.nodes.get(E).key),d=g}if(n){let E;if(O.forEach((se,V)=>{if(T[V]===se){let je=o.getByKey(se);je&&je.object!=="text"&&je.nodes.every(En=>H.isBlock(En))&&(E=je)}}),E)return ge.create({nodes:E.nodes})}let S=o.getNextSibling(o.getFurthestAncestor(a).key),C=a===s?o.getNextSibling(S.key):o.getNextSibling(o.getFurthestAncestor(s).key),I=o.getChildIndex(S.key),P=o.getChildIndex(C.key),$=o.nodes.slice(I,P);return ge.create({nodes:$})}fixDuplicatedKeys(){let r=new Set;return this.mapDescendants(n=>(r.has(n.key)&&(AT.warning(`duplicated key "${n.key}" (object "${n.object}" and type "${n.type}")`),n=n.set("key",df(r,n.key))),r.add(n.key),n))}};function df(t,e,r=1){let n=e.match(/^(\S+)-(\d+)$/),o=`${e}-${r}`;return n&&(o=`${n[1]}-${r}`),t.has(o)?df(t,e,r+1):o}ge.prototype[U.DOCUMENT]=!0;Kt(ge);f();var Ae=class extends Lt({key:"",type:void 0,fragment:void 0,nodes:N()}){get object(){return"fragment"}get fragmentKey(){return this.fragment||this.key}get isEmpty(){return!this.nodes.some(r=>!r.isEmpty)}get text(){return this.getText()}static isFragment(r){return Oe("FRAGMENT",r)}static create(r={}){let n=r.key||ne();return new Ae(k(x({key:n,fragment:n},r),{nodes:N.isList(r.nodes)?r.nodes:N(r.nodes||[])}))}};Ae.prototype[U.FRAGMENT]=!0;Kt(Ae);f();f();var mb=me(gf()),ds=me(om()),ms=me(Ci());f();f();var xm=ve("slate:operation:apply");function Vt(t,e,r){return t.selection&&e(t.selection)&&(t=t.set("selection",r(t.selection))),t}function Om(t,e){return Vt(t,({startKey:r,endKey:n})=>e.hasNode(r)||e.hasNode(n),r=>{let{startKey:n,endKey:o}=r,a=t.document.getPreviousTextBeforeNode(e.key),i=t.document.getNextTextAfterNode(e.key);return e.hasNode(n)&&(r=a?r.moveStartTo(a.key,a.text.length):i?r.moveStartTo(i.key,0):r.deselect()),e.hasNode(o)&&(r=a?r.moveEndTo(a.key,a.text.length):i?r.moveEndTo(i.key,0):r.deselect()),r.isSet?r.normalize(t.document):r})}function _m(t,e,r,n=null){return Vt(t,o=>{if(!o.isAtomic)return!1;let{startKey:a,startOffset:i,endKey:s,endOffset:u}=o;return a===e&&i<r&&(s!==e||u>r)||n&&a===e&&i<n&&(s!==e||u>n)},o=>o.deselect())}var cP={insert_node(t,e){let{path:r,node:n}=e,o=r[r.length-1],a=r.slice(0,-1),{document:i}=t;if(i.hasNodeKeyConflict(n))return xm.error(`skip insert_node, node "${n.key}" is conflicting with existing keys`),t;let s=i.assertPath(a);return s=s.insertNode(o,n),i=i.updateNode(s),t=t.set("document",i),t},remove_node(t,e){let{path:r}=e,{document:n}=t,{selection:o}=t,a=n.assertPath(r);o.isSet&&(t=Om(t,a));let i=n.getParent(a.key),s=i.getChildIndex(a.key);return i=i.removeNode(s),n=n.updateNode(i),t=t.set("document",n),t},move_node(t,e){let{path:r,newPath:n}=e,o=n[n.length-1],a=n.slice(0,-1),i=r.slice(0,-1),s=r[r.length-1],{document:u}=t,c=u.assertPath(r),l=u.getParent(c.key);l=l.removeNode(s),u=u.updateNode(l);let h;return i.every((p,d)=>p===a[d])&&i.length===a.length?h=l:(i.every((p,d)=>p===a[d])&&s<a[i.length]&&a[i.length]--,h=u.assertPath(a)),h=h.insertNode(o,c),u=u.updateNode(h),t=t.set("document",u),t},merge_node(t,e){let{path:r}=e,n=r.slice(0,r.length-1).concat([r[r.length-1]-1]),{document:o}=t,a=o.assertPath(n),i=o.assertPath(r),s=o.getParent(a.key),u=s.getChildIndex(a.key),c=s.getChildIndex(i.key);return s=s.mergeNode(u,c),o=o.updateNode(s),t=t.set("document",o),a.object==="text"&&(t=Vt(t,({anchorKey:l,focusKey:h})=>l===i.key||h===i.key,l=>(l.anchorKey===i.key&&(l=l.moveAnchorTo(a.key,a.text.length+l.anchorOffset)),l.focusKey===i.key&&(l=l.moveFocusTo(a.key,a.text.length+l.focusOffset)),l.normalize(o)))),t},split_node(t,e){let{path:r,position:n,properties:h}=e,p=h,{key:o}=p,a=na(p,["key"]),{document:i}=t,s=i.assertPath(r),u=i.getParent(s.key),c=u.getChildIndex(s.key);if(u=u.splitNode(c,n,o),a){let d=u.nodes.get(c+1);d.object!=="text"&&(u=u.updateNode(d.merge(a)))}i=i.updateNode(u);let l=i.getNextText(s.key);return t=Vt(t,({startKey:d,startOffset:y,endKey:g,endOffset:O})=>s.key===d&&n<=y||s.key===g&&n<=O,d=>{let{startKey:y,startOffset:g,endKey:O,endOffset:T}=d,S=!1;return s.key===y&&n<=g&&(d=d.moveStartTo(l.key,g-n),S=!0),s.key===O&&n<=T&&(d=d.moveEndTo(l.key,T-n),S=!0),S?d.normalize(i):d}),t=t.set("document",i),t},set_node(t,e){let{path:r,properties:n}=e,{document:o}=t,a=o.assertPath(r);return a=a.merge(n),o=o.updateNode(a),t=t.set("document",o),t},set_fragment(t,e){let{node:r,path:n}=e,{document:o}=t,a=o.assertPath(n);return a=a.setFragment(r),o=o.updateNode(a),t=t.set("document",o),t},insert_fragment(t,e){let{node:r,path:n,fragmentPath:o}=e,{document:a}=t,i=o[o.length-1]-1,s=a.assertPath(n);return s=s.insertFragment(r,i),a=a.updateNode(s),t=t.set("document",a),t},remove_fragment(t,e){let{node:r,path:n}=e,{document:o,selection:a}=t,i=o.assertPath(n),s=i.getFragmentByKey(r.fragmentKey);return a.isSet&&(t=Om(t,s)),i=i.removeFragmentByKey(r.fragmentKey),o=o.updateNode(i),t=t.set("document",o),t},insert_text(t,e){let{path:r,offset:n,text:o,marks:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.insertText(n,o,a),i=i.updateNode(s),t=t.set("document",i),t=_m(t,s.key,n),t=Vt(t,({anchorKey:u,anchorOffset:c,isBackward:l,isAtomic:h})=>u===s.key&&(c>n||c===n&&(!h||!l)),u=>u.moveAnchor(o.length)),t=Vt(t,({focusKey:u,focusOffset:c,isBackward:l,isAtomic:h})=>u===s.key&&(c>n||c===n&&(!h||l)),u=>u.moveFocus(o.length)),t},remove_text(t,e){let{path:r,offset:n,text:o}=e,{length:a}=o,i=n+a,{document:s}=t,u=s.assertPath(r);return t=_m(t,u.key,n,n+a),t=Vt(t,({anchorKey:c})=>c===u.key,c=>c.anchorOffset>=i?c.moveAnchor(-a):c.anchorOffset>n?c.moveAnchorTo(c.anchorKey,n):c),t=Vt(t,({focusKey:c})=>c===u.key,c=>c.focusOffset>=i?c.moveFocus(-a):c.focusOffset>n?c.moveFocusTo(c.focusKey,n):c),u=u.removeText(n,a),s=s.updateNode(u),t=t.set("document",s),t},add_mark(t,e){let{path:r,offset:n,length:o,mark:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.addMark(n,o,a),i=i.updateNode(s),t=t.set("document",i),t},remove_mark(t,e){let{path:r,offset:n,length:o,mark:a}=e,{document:i}=t,s=i.assertPath(r);return s=s.removeMark(n,o,a),i=i.updateNode(s),t=t.set("document",i),t},set_mark(t,e){let{path:r,offset:n,length:o,mark:a,properties:i}=e,{document:s}=t,u=s.assertPath(r);return u=u.updateMark(n,o,a,i),s=s.updateNode(u),t=t.set("document",s),t},set_selection(t,e){let{properties:r}=e,u=r,{anchorPath:n,focusPath:o}=u,a=na(u,["anchorPath","focusPath"]),{selection:i}=t,{document:s}=t;return n!==void 0&&(a.anchorKey=n==null?null:s.assertPath(n).key),o!==void 0&&(a.focusKey=o==null?null:s.assertPath(o).key),i=i.merge(a),i=i.normalize(s),t=t.set("selection",i),t},set_value_data(t,e){let{data:r}=e;return t=t.merge({data:r}),t},set_value(t,e){let{properties:r}=e;return t=t.merge(r),t},insert_data(t,e){let{path:r,data:n,dataPath:o}=e,{document:a}=t,i=a.assertPath(r);return i=i.insertData(o,n),a=a.updateNode(i),t=t.set("document",a),t},insert_array_data(t,e){let{data:r,dataPath:n,path:o,dataIndex:a}=e,{document:i}=t,s=i.assertPath(o);return s=s.insertArrayData(n,r,a),i=i.updateNode(s),t=t.set("document",i),t},remove_array_data(t,e){let{data:r,dataPath:n,path:o}=e,{document:a}=t,i=a.assertPath(o);return i=i.removeArrayData(n,r),a=a.updateNode(i),t=t.set("document",a),t},remove_data(t,e){let{path:r,data:n,dataPath:o}=e,{document:a}=t,i=a.assertPath(r);return i=i.removeData(o,n),a=a.updateNode(i),t=t.set("document",a),t},set_document(t,e){let{data:r}=e;return t=t.set("document",r).set("selection",t.selection.deselect()),t}};function bm(t,e){let{type:r}=e,n=cP[r];if(!n)throw new Error(`Unknown operation type: "${r}".`);return xm.debug(r,e),t=n(t,e),t}f();var Ao=me(Ci());var km=ve("slate:operation:invert");function yt(t){let{type:e}=t;if(km.debug(e,t),e==="insert_node")return t.set("type","remove_node");if(e==="set_fragment"){let r=t.set("type","remove_fragment");return r.set("fragment",r.get("node").key)}if(e==="insert_fragment"){let r=t.set("type","remove_fragment");return r.set("fragment",r.get("node").key)}if(e==="remove_node")return t.set("type","insert_node");if(e==="remove_fragment")return t.set("type","insert_fragment").remove("fragment");if(e==="move_node"){let{newPath:r,path:n}=t,o=r,a=n,i=n.length-1,s=r.length-1;return n.length<o.length&&n.slice(0,i).every((c,l)=>c===o[l])&&n[i]<o[i]&&(o=o.slice(0,i).concat([o[i]-1]).concat(o.slice(i+1,o.length))),r.length<a.length&&r.slice(0,s).every((c,l)=>c===a[l])&&r[s]<=a[s]&&(a=a.slice(0,s).concat([a[s]+1]).concat(a.slice(s+1,a.length))),t.set("path",o).set("newPath",a)}if(e==="merge_node"){let{path:r}=t,{length:n}=r,o=n-1,a=r.slice(0,o).concat([r[o]-1]);return t.set("type","split_node").set("path",a)}if(e==="split_node"){let{path:r}=t,{length:n}=r,o=n-1,a=r.slice(0,o).concat([r[o]+1]);return t.set("type","merge_node").set("path",a)}if(e==="set_node"){let{properties:r,node:n}=t,o=n.merge(r),a=(0,Ao.default)(n,Object.keys(r));return t.set("node",o).set("properties",a)}if(e==="insert_text")return t.set("type","remove_text");if(e==="remove_text")return t.set("type","insert_text");if(e==="insert_data")return t.set("type","remove_data");if(e==="remove_data")return t.set("type","insert_data");if(e==="insert_array_data")return t.set("type","remove_array_data").remove("dataIndex");if(e==="remove_array_data")return t.set("type","insert_array_data").set("dataIndex",0);if(e==="add_mark")return t.set("type","remove_mark");if(e==="remove_mark")return t.set("type","add_mark");if(e==="set_mark"){let{properties:r,mark:n}=t,o=n.merge(r),a=(0,Ao.default)(n,Object.keys(r));return t.set("mark",o).set("properties",a)}if(e==="set_selection"){let{properties:r,selection:n}=t,o=n.merge(r),a=(0,Ao.default)(n,Object.keys(r));return t.set("selection",o).set("properties",a)}if(e==="set_value_data"){let{previousData:r,data:n}=t;return t.set("previousData",n).set("data",r)}if(e==="set_document")return km.error("Trying to invert a `set_document` operation which is forbidden."),t}f();f();var qi=me(og());var oM=ve("slate:history"),aM=1e3,Jt=class extends M({operations:st(),timestamp:0}){static create(e){return new Jt({operations:st(e),timestamp:Date.now()})}push(e){return this.merge({operations:this.operations.push(e),timestamp:Date.now()})}shouldMerge(e){let r=this.operations.peek();return r?e.type==="set_selection"&&r.type==="set_selection"?!0:Date.now()-this.timestamp>aM?!1:!!(e.type==="insert_text"&&r.type==="insert_text"&&r.offset===e.offset+e.text.length&&(0,qi.default)(e.path,r.path)||e.type==="remove_text"&&r.type==="remove_text"&&r.offset+r.text.length===e.offset&&(0,qi.default)(e.path,r.path)):!1}shouldSkip(e){let r=this.operations.peek();return r?e.type==="set_selection"&&r.type==="set_selection":!1}},wt=class extends M({undos:st(),redos:st()}){get object(){return"history"}static isHistory(e){return Oe("HISTORY",e)}static create(e={}){return new wt(e)}save(e,r={}){let n=this,{undos:o,redos:a}=n,{merge:i,skip:s}=r,u=o.peek();if(s==null&&(s=u?u.shouldSkip(e):!1),s)return n;if(i==null&&(i=u?u.shouldMerge(e):!1),oM.debug("save",{operation:e,merge:i}),i&&u){let c=u.push(e);o=o.pop(),o=o.push(c)}else{let c=Jt.create([e]);o=o.push(c)}return o.size>100&&(o=o.take(100)),a=a.clear(),n=n.set("undos",o).set("redos",a),n}};wt.prototype[U.HISTORY]=!0;f();var Gg=me(kr()),ss=me(kg()),Yg=me(Hg());f();var Vi="child_object_invalid",Ji="child_required",Ui="child_type_invalid",Hi="child_unknown",$i="first_child_object_invalid",Gi="first_child_type_invalid",Yi="last_child_object_invalid",Wi="last_child_type_invalid",Xi="node_data_invalid",Zi="node_is_void_invalid",Qi="node_mark_invalid",es="node_missing_fragment",ts="node_text_invalid",rs="node_fragment_type_invalid",wo="node_unwanted_fragment",ns="parent_object_invalid",os="parent_type_invalid",as="fragment_type_invalid",is="fragment_type_missing";var xD=ve("slate:schema"),De=class extends M({validations:[],document:{},blocks:{},inlines:{}}){get object(){return"schema"}static create(r={}){return De.isSchema(r)?r:new De(r)}static isSchema(r){return!!(r&&r[U.SCHEMA])}static createNormalize(r){return(o,a,i)=>r[a]?r[a](o,i):void 0}combineWith(r){return Array.isArray(r)?r.reduce((n,o)=>n.combineWith(o),this):new De({validations:[...this.validations,...r.validations],document:Wg(this.document,r.document),blocks:$g(this.blocks,r.blocks),inlines:$g(this.inlines,r.inlines)})}getFirstInvalidNode(r){if(z.isText(r))return this.validateNode(r)?r:null;let n=null;return r.nodes.concat(H.isBlock(r)?r.fragments.values():[]).find(o=>(n=this.validateNode(o)?o:this.getFirstInvalidNode(o),n)),n}getRule(r){switch(r.object){case"document":return this.document;case"block":return this.blocks[r.type];case"inline":return this.inlines[r.type]}}getParentRules(){let{blocks:r,inlines:n}=this,o={};for(let a of Object.keys(r)){let i=r[a];i.parent!=null&&(o[a]=i)}for(let a of Object.keys(n)){let i=n[a];i.parent!=null&&(o[a]=i)}return Object.keys(o).length===0?null:o}fail(r,n){return o=>{xD.debug("normalizing",{violation:r,context:n});let{rule:a}=n,{size:i}=o.operations;a.normalize&&a.normalize(o,r,n),!(o.operations.size>i)&&this.normalize(o,r,n)}}normalize(r,n,o){switch(n){case Vi:case Ui:case Hi:case $i:case Gi:case Yi:case Wi:{let{child:a,node:i}=o;a.object==="text"&&i.object==="block"&&i.nodes.size===1?r.removeNodeByKey(i.key):r.removeNodeByKey(a.key);return}case Ji:case ts:case ns:case os:{let{node:a,fragmentParent:i}=o;if(a.object==="document"){a.nodes.forEach(s=>r.removeNodeByKey(s.key));return}else if(a.object==="fragment"){r.removeFragmentInParentByKey(i.key,a.fragmentKey);return}else{r.removeNodeByKey(a.key);return}}case Xi:{let{node:a,key:i}=o;a.data.get(i)===void 0&&a.object!=="document"?r.removeNodeByKey(a.key):r.setNodeByKey(a.key,{data:a.data.delete(i)});return}case Zi:{let{node:a}=o;r.setNodeByKey(a.key,{isVoid:!a.isVoid});return}case Qi:{let{node:a,mark:i}=o;a.getTexts().forEach(s=>r.removeMarkByKey(s.key,0,s.text.length,i));return}case wo:{let{node:a,key:i}=o;r.removeFragmentInParentByKey(a.key,i);return}case rs:{let{node:a,child:i}=o;r.removeFragmentInParentByKey(a.key,i.fragmentKey);return}case es:{let{node:a}=o;r.removeNodeByKey(a.key);return}case as:{let{node:a,child:i}=o;r.removeFragmentInParentByKey(a.key,i.fragmentKey);return}case is:{let{node:a}=o;r.removeNodeByKey(a.key);return}default:throw new Error(`Unhandled violation "${n}"`)}}validateNode(r){for(let i of this.validations){let s=i(r);if(s!=null)return s}if(r.object==="text")return;let n=this.getRule(r)||{},o=this.getParentRules(),a={node:r,rule:n};if(typeof n.isVoid<"u"&&r.isVoid!==n.isVoid)return this.fail(Zi,a);if(typeof n.data<"u")for(let i of Object.keys(n.data)){let s=n.data[i],u=r.data.get(i);if(!s(u))return this.fail(Xi,k(x({},a),{key:i,value:u}))}if(typeof n.marks<"u"){let i=r.getMarks().toArray();for(let s of i)if(!n.marks.some(u=>u.type===s.type))return this.fail(Qi,k(x({},a),{mark:s}))}if(typeof n.text<"u"){let{text:i}=r;if(!n.text.test(i))return this.fail(ts,k(x({},a),{text:i}))}if(typeof n.nodes<"u"||o!=null){let i=this.validateNodes(r,o,n.nodes,a);if(i)return i}if(typeof n.first<"u"){let{objects:i,types:s}=n.first,u=r.nodes.first();if(u&&i&&!i.includes(u.object))return this.fail($i,k(x({},a),{child:u}));if(u&&s&&!s.includes(u.type))return this.fail(Gi,k(x({},a),{child:u}))}if(typeof n.last<"u"){let{objects:i,types:s}=n.last,u=r.nodes.last();if(u&&i&&!i.includes(u.object))return this.fail(Yi,k(x({},a),{child:u}));if(u&&s&&!s.includes(u.type))return this.fail(Wi,k(x({},a),{child:u}))}if(typeof n.fragments<"u"){if(!H.isBlock(r))throw new Error(`Cannot validate fragments on non-block ("${r.object}")`);if(typeof n.fragments.keys<"u"){let i=bD(n.fragments.keys,r);if(i){let s=r.fragments.keySeq().toArray(),u=(0,ss.default)(s,Object.keys(i));if(u.length)return this.fail(wo,k(x({},a),{key:u[0]}));for(let[c,l]of Object.entries(i)){let h=r.getFragmentByKey(c);if(!h)return this.fail(es,k(x({},a),{key:c}));if(l&&h.type!==l)return this.fail(rs,k(x({},a),{key:c,child:h}))}}}if(typeof n.fragments.types<"u"){let i=Object.keys(n.fragments.types),s=r.fragments.valueSeq().toArray(),u=s.map(({type:l})=>l).reduce((l,h)=>(l[`${h}`]=(l[`${h}`]||0)+1,l),{}),c=(0,ss.default)(Object.keys(u),i);if(c.length)return this.fail(as,k(x({},a),{child:s.find(({type:l})=>`${l}`===c[0])}));for(let[l,h]of Object.entries(n.fragments.types)){if(typeof h.min<"u"&&(u[l]||0)<h.min)return this.fail(is,k(x({},a),{type:l}));if(typeof h.max<"u"&&(u[l]||0)>h.max){let d=s.reverse().find(({type:y})=>`${y}`===l);return this.fail(wo,k(x({},a),{key:d.fragmentKey}))}}for(let l of r.fragments.values()){let h=n.fragments.types[l.type],p=typeof h.nodes<"u"?h.nodes:n.fragments.nodes,d=this.validateNodes(l,o,p,{rule:n,node:l,fragmentParent:r});if(d)return d}}if(typeof n.fragments.nodes<"u"&&typeof n.fragments.types>"u")for(let i of r.fragments.values()){let s=this.validateNodes(i,o,n.fragments.nodes,{rule:n,node:i,fragmentParent:r});if(s)return s}}}validateNodes(r,n,o,a){let i=r.nodes.toArray(),s=o!==void 0?o.slice():[],u,c,l,h,p,d;function y(){return u=u==null?null:0,h=s.shift(),c=h&&(!("min"in h)||h.min==null?0:h.min),p=h&&(!("max"in h)||h.max==null?1/0:h.max),!!h}function g(){return l=l==null?0:l+1,u=u==null?0:u+1,d=i[l],p!=null&&u===p&&y(),!!d}function O(){u-=1,l-=1}for(o!==void 0&&y();g();){if(n!=null&&d.object!=="text"&&d.type in n){let T=n[d.type];if(T.parent.objects!=null&&!T.parent.objects.includes(r.object))return this.fail(ns,{node:d,parent:r,rule:T});if(T.parent.types!=null&&!T.parent.types.includes(r.type))return this.fail(os,{node:d,parent:r,rule:T})}if(o!==void 0){if(!h)return this.fail(Hi,k(x({},a),{child:d,index:l}));if("objects"in h&&h.objects!=null&&!h.objects.includes(d.object)){if(u>=c&&y()){O();continue}return this.fail(Vi,k(x({},a),{child:d,index:l}))}if("types"in h&&h.types!=null&&!h.types.includes(d.type)){if(u>=c&&y()){O();continue}return this.fail(Ui,k(x({},a),{child:d,index:l}))}}}if(o!==void 0)for(;c!=null;){if(u<c)return this.fail(Ji,k(x({},a),{index:l}));y()}}};function bD(t,e){let r=typeof t=="function"?t(e):t;return Array.isArray(r)?r.reduce((n,o)=>(n[o]=void 0,n),{}):r}function Wg(t,e){let r=x({},t);return(0,Yg.default)(r,e,kD),r}function $g(t,e){let r=x({},t);for(let n in e)e.hasOwnProperty(n)&&(r[n]=r[n]?Wg(r[n],e[n]):e[n]);return r}function kD(t,e,r){return r==="normalize"&&e&&t?(n,o,a)=>{let i=n.operations.size;t(n,o,a),!(n.operations.size>i)&&e(n,o,a)}:r==="objects"||r==="types"||r==="marks"?t==null?e:t.concat(e):e==null?t:e}De.prototype[U.SCHEMA]=!0;(0,Gg.default)(De.prototype,["getParentRules","getFirstInvalidNode","validateNode"]);f();f();function us(t){return["insert_text","remove_text"].includes(t.type)}function cs(t){return["add_mark","set_mark","remove_mark"].includes(t.type)}function TD(t){return["insert_fragment","set_fragment","remove_fragment"].includes(t.type)}function SD(t){return["insert_data","remove_data"].includes(t.type)}function ND(t){return["insert_array_data","remove_array_data"].includes(t.type)}function Xg(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])}function b(t,e){let{offset:r,length:n,text:o,path:a}=t,{type:i,path:s}=e,u=us(t)||cs(t),c=[...u?[...a].splice(0,a.length-1):a];if(us(e)||cs(e)||i==="set_node"||i==="set_selection"||a.length===0)return[t];let l=[...a],h=r,p=n,d=o,y=s.length-1,g=v.isEqual(s,c),O=v.isYounger(s,c),T=v.isAbove(s,c);if(i==="insert_node"&&(g||O||T)&&(l=v.increment(a,1,y)),i==="remove_node"&&(O?l=v.decrement(a,1,y):(g||T)&&(l=null)),i==="move_node"){let{newPath:S}=e;if(v.isEqual(s,S))return[t];if(v.isAbove(s,a))l=[...S,...a.slice(s.length-a.length)];else if(v.isEqual(s,a))l=S;else{let C=S.length-1;if(v.isYounger(s,a)){l=v.decrement(a,1,y);let I=[...S];v.isYounger(s,S)&&!v.isSibling(s,S)&&(I=v.decrement(I,1,y));let P=v.isEqual(I,l),$=v.isAbove(I,l),E=v.isYounger(I,l);(P||$||E)&&(l=v.increment(l,1,C))}else{let I=v.isEqual(S,a),P=v.isAbove(S,a),$=v.isYounger(S,a);(I||P||$)&&(l=v.increment(l,1,C))}}}if(i==="split_node")if(u){if(v.isYounger(s,a))l=v.increment(a,1,y);else if(v.isAbove(s,a)&&a[s.length]>=e.position)l=v.increment(l,1,y),l=v.decrement(l,e.position,s.length);else if(v.isEqual(s,a)){let S=o?o.length:n,C=r+S;if(e.position<r)l=v.increment(a,1,y),h=r-e.position;else if(C>e.position){let I=a,P=r,$=e.position-r,E=o?o.slice(0,$):null,se=v.increment(a,1,y),V=0,ye=S-$,je=o?o.slice(-ye):null;return[_.create(k(x({},t.toJSON()),{path:I,offset:P,length:$,text:E})),_.create(k(x({},t.toJSON()),{path:se,offset:V,length:ye,text:je}))]}}}else(T||O||g)&&(l=v.increment(a,1,y));return i==="merge_node"&&(O||g)&&(l=v.decrement(a,1,y)),l?[_.create(k(x({},t.toJSON()),{path:l,offset:h,length:p,text:d}))]:[]}function R(t,e,r){if(!TD(e))return[t];let{type:n,path:o,fragmentPath:a}=t,{type:i,path:s,fragmentPath:u}=e,c=v.isEqual(o,s),l=us(t)||cs(t);if(i==="insert_fragment"&&n==="insert_fragment"&&c){let h=v.isEqual(u,a);if(v.isYounger(u,a)||h&&r==="right"){let d=u.length-1,y=v.increment(a,1,d);return[_.create(k(x({},t.toJSON()),{fragmentPath:y}))]}}if(i==="set_fragment"&&u){let h=v.isAbove(u,o);if(l&&h)return[]}if(i==="remove_fragment"){if(l){let h=v.isAbove(u,o),p=v.isYounger(u,o);if(h)return[];if(p){let d=u.length-1,y=v.decrement(o,1,d);return[_.create(k(x({},t.toJSON()),{path:y}))]}}if(n==="remove_fragment"&&v.isEqual(a,u))return[]}return[t]}function We(t,e,r){if(!SD(e))return[t];let{type:n,path:o,dataPath:a}=t,{type:i,path:s,dataPath:u}=e,c=v.isEqual(o,s),l=Xg(a,u);return i==="insert_data"&&n==="insert_data"&&c&&l&&r==="right"?[]:[t]}function Xe(t,e,r){if(!ND(e))return[t];let{type:n,path:o,dataPath:a}=t,{type:i,path:s,dataPath:u}=e,c=v.isEqual(o,s),l=Xg(a,u);return i==="insert_array_data"&&n==="insert_array_data"&&c&&l&&r==="right"?[]:[t]}function fs(t){let e=[],r=[];return t.forEach(n=>{["merge_node","split_node"].includes(n.type)?r.push(n):(r.length>0&&(e.push(r),r=[]),e.push([n]))}),r.length>0&&e.push(r),e}function Zg(t,e){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")+t.get("length")<=e.get("offset")?[t]:t.get("offset")<e.get("offset")?[_.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset"),length:t.get("length")+e.get("text").length,mark:t.get("mark"),data:t.get("data")})]:[_.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset")+e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})]:[t]}function Qg(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("offset"),o=t.get("length"),a=n+o,i=e.get("offset"),s=e.get("text").length,u=i+s;if(a<=i)return[t];if(u<=n)return[_.create({object:"operation",type:"add_mark",path:t.get("path"),offset:t.get("offset")-e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})];{let c=Math.max(n,i),l=Math.min(a,u);if(c<=l){let h=l-c,p=o-h,d=0;return n<i?d=n:a>u?d=i:d=n+h,[_.create({object:"operation",type:"add_mark",path:t.get("path"),offset:d,length:p,mark:t.get("mark"),data:t.get("data")})]}}}return[t]}function ey(t,e){return[t]}function ty(t,e){return[t]}function ry(t,e){return b(t,e)}function ny(t,e){return b(t,e)}function oy(t,e){return b(t,e)}function ay(t,e){return b(t,e)}function iy(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].length)return r;r=r.map(a=>b(a,o)).flat()}return r}function sy(t,e){let[r]=b(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function uy(t,e){return R(t,e)}function cy(t,e){return R(t,e)}function fy(t,e){return R(t,e)}function ly(t,e){return[t]}function hy(t,e){return[t]}function py(t,e){return[t]}function dy(t,e){return[t]}f();function my(t,e){return[t]}function gy(t,e){return[t]}function yy(t,e){return[t]}function vy(t,e){return[t]}function Oy(t,e){return b(t,e)}function _y(t,e){return b(t,e)}function xy(t,e){return b(t,e)}function by(t,e){return b(t,e)}function ky(t,e){let r=e.length-1;return b(t,e[r])}function Ty(t,e){return b(t,e[0])}function Sy(t,e){return R(t,e)}function Ny(t,e){return R(t,e)}function Ay(t,e){return R(t,e)}function Iy(t,e){return We(t,e)}function Ry(t,e){return We(t,e)}function wy(t,e,r){return Xe(t,e,r)}function Fy(t,e){return Xe(t,e)}f();function Cy(t,e){return[t]}function Ey(t,e){return[t]}function Py(t,e){return[t]}function My(t,e){return[t]}function Dy(t,e){return b(t,e)}function By(t,e){return b(t,e)}function qy(t,e){return b(t,e)}function zy(t,e){return b(t,e)}function Ly(t,e){let r=e.length-1;return b(t,e[r])}function Ky(t,e){return b(t,e[0])}function jy(t,e){return R(t,e)}function Vy(t,e){return R(t,e)}function Jy(t,e){return R(t,e)}function Uy(t,e,r){return We(t,e,r)}function Hy(t,e){return We(t,e)}function $y(t,e){return Xe(t,e)}function Gy(t,e){return Xe(t,e)}f();function Yy(t,e){return[t]}function Wy(t,e){return[t]}function Xy(t,e){return[t]}function Zy(t,e){return[t]}function Qy(t,e){return b(t,e)}function ev(t,e){return b(t,e)}function tv(t,e){return b(t,e)}function rv(t,e){return b(t,e)}function nv(t,e){let r=e.length-1;return b(t,e[r])}function ov(t,e){return b(t,e[0])}function av(t,e,r){return R(t,e,r)}function iv(t,e){return R(t,e)}function sv(t,e){return R(t,e)}function uv(t,e){return[t]}function cv(t,e){return[t]}f();function fv(t,e){return[t]}function lv(t,e){return[t]}function hv(t,e){return[t]}function pv(t,e){return[t]}function dv(t,e,r){return(v.compare(t.get("path"),e.get("path"))===0||t.get("path").size===0&&e.get("path").size===0)&&r==="left"?[t]:b(t,e)}function mv(t,e){return v.isAbove(e.path,t.path)?[]:v.isEqual(e.path,t.path)?[t]:b(t,e)}function gv(t,e){return b(t,e)}function yv(t,e){return b(t,e)}function vv(t,e){let r=e.length-1;return b(t,e[r])}function Ov(t,e){if(e.length>1){let r=t.path.length-1,n=t.path[r];if(e[1].path[r]===n-1)return[t]}return b(t,e[0])}function _v(t,e){return[t]}function xv(t,e){return[t]}function bv(t,e){return[t]}function kv(t,e){return[t]}function Tv(t,e){return[t]}function Sv(t,e){return[t]}function Nv(t,e){return[t]}f();function Av(t,e,r){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")<e.get("offset")||t.get("offset")===e.get("offset")&&r==="left"?[t]:[_.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset")+e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]:[t]}function Iv(t,e){if(v.isEqual(t.get("path"),e.get("path"))){let n=t.get("offset"),o=e.get("offset"),a=e.get("text").length,i=o+a;return o<n&&n<i?[]:n<=o?[t]:n>=i?[_.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset")-e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]:[_.create({object:"operation",type:"insert_text",path:t.get("path"),offset:Math.max(n-a,0),text:t.get("text"),marks:t.get("marks"),data:t.get("data")})]}return[t]}function Rv(t,e){if(v.compare(t.get("path"),e.get("path"))===0){if(t.get("offset")<=e.get("offset"))return[t];if(t.get("offset")>=e.get("offset")+e.get("length"))return[t];{let n=e.get("mark"),o=t.get("marks");return o=o.add(q.create({type:n.type,data:{}})),[_.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset"),text:t.get("text"),marks:o,data:t.get("data")})]}}return[t]}function wv(t,e){if(v.compare(t.get("path"),e.get("path"))===0){if(t.get("offset")<=e.get("offset"))return[t];if(t.get("offset")>=e.get("offset")+e.get("length"))return[t];{let n=e.get("mark"),o=t.get("marks").filterNot(a=>a.get("type")===n.get("type"));return[_.create({object:"operation",type:"insert_text",path:t.get("path"),offset:t.get("offset"),text:t.get("text"),marks:o,data:t.get("data")})]}}return[t]}function Fv(t,e){return b(t,e)}function Cv(t,e){return b(t,e)}function Ev(t,e){return b(t,e)}function Pv(t,e){return b(t,e)}function Mv(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset)return r;r=r.map(a=>b(a,o)).flat()}return r}function Dv(t,e){let[r]=b(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)&&e[1].position<t.offset?[r.set("offset",r.offset+e[1].position)]:[r]}function Bv(t,e){return R(t,e)}function qv(t,e){return R(t,e)}function zv(t,e){return R(t,e)}function Lv(t,e){return[t]}function Kv(t,e){return[t]}function ls(t,e){return[t]}function hs(t,e){return[t]}f();function jv(t,e){if(t.length===1)return t;let r=t[0],n=t[1],o=v.isSibling(e.path,n.path),a=v.isYounger(e.path,n.path);if(o&&a&&n.position>=e.offset){let i=e.text.length,s=n.position+i;return[r,n.set("position",s)]}return t}function Vv(t,e){if(t.length===1)return t;let r=t[0],n=t[1];if(v.isSibling(e.path,n.path)&&v.isYounger(e.path,n.path)&&n.position>=e.offset){let o=e.text.length,a=n.position-o;return[_.create(x({},r.toJS())),_.create(k(x({},n.toJS()),{position:a}))]}return t}function Jv(t,e){return t}function Uv(t,e){return t}function Hv(t,e){if(t.length===1)return ED(t[0],e);let r=t[0],n=e.path,o=n.length-1;return v.isEqual(n,r.path)?[_.create({object:"operation",type:"move_node",path:v.increment(r.path,1,o),newPath:r.path}),...t]:v.isYounger(n,r.path)?t.map(a=>_.create(k(x({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function ED(t,e){let r=t.path,n=e.path;if(v.isEqual(n,r)||v.isYounger(n,r)||v.isAbove(n,r)){let o=n.length-1;return[_.create(k(x({},t.toJS()),{path:v.increment(r,1,o)}))]}return[t]}function $v(t,e){if(t.length===1)return PD(t[0],e);let r=t[0],n=t[1],o=e.path;if(v.isEqual(o,r.path)||v.isAbove(o,n.path))return[];if(v.isYounger(o,n.path)){let a=o.length-1;return t.map(i=>_.create(k(x({},i.toJS()),{path:v.decrement(i.path,1,a)})))}return t}function PD(t,e){let r=t.path,n=e.path;if(v.isEqual(n,r)||v.isAbove(n,r))return[];if(v.isYounger(n,r)){let o=n.length-1;return[_.create(k(x({},t.toJS()),{path:v.decrement(r,1,o)}))]}return[t]}function Gv(t,e){if(t.length===1)return MD(t[0],e);let r=t[0].path,n=t[1].path,o=e.path,a=e.newPath,i=o.length-1,s=a.length-1;if(v.isEqual(o,r))return[yt(e),...t];if(v.isAbove(o,n)){let d=v.increment(a,1,s);return[_.create({type:"move_node",path:o,newPath:d}),_.create(k(x({},t[0].toJS()),{path:d})),b(t[1],e)[0]]}let u=v.isBefore(o,r),c=o.length<r.length;if(u&&c&&v.isEqual(a,r)){let d=v.decrement(a,1,i),y=v.increment(d,1,s);return[_.create({object:"operation",type:"move_node",path:d,newPath:y}),_.create(k(x({},t[0].toJS()),{path:v.decrement(r,1,i)})),_.create(k(x({},t[1].toJS()),{path:v.decrement(n,1,i)}))]}let l=v.isSibling(o,r),p=v.isBefore(o,n)&&(l||o.length===1&&r.length===1);return!p&&v.isEqual(a,r)?[_.create({object:"operation",type:"move_node",path:a,newPath:v.increment(a,1,s)}),...t]:p&&v.isAbove(a,n)?[_.create({object:"operation",type:"move_node",path:a,newPath:v.increment(a,1,s)}),_.create(k(x({},t[0].toJS()),{path:v.decrement(r,1,s)})),_.create(k(x({},t[1].toJS()),{path:v.decrement(n,1,s)}))]:[b(t[0],e)[0],b(t[1],e)[0]]}function MD(t,e){return b(t,e)}function Yv(t,e){return t}function Wv(t,e){if(t.length===1&&e.length>1)return DD(t[0],e);if(e.length===1&&t.length>1)return BD(t,e[0]);if(t.length===1&&e.length===1)return qD(t[0],e[0]);let r=t[0],n=t[1],o=e[0],a=e[1],i=a.path.length-1;return v.isYounger(a.path,n.path)?t.map(s=>_.create(k(x({},s.toJS()),{path:v.increment(s.path,1,i)}))):v.isAbove(a.path,n.path)&&v.isYounger(o.path,n.path)?[_.create(k(x({},r.toJS()),{path:v.increment(r.path,1,i)})),_.create(k(x({},n.toJS()),{path:v.increment(n.path,1,i),position:n.position-a.target}))]:t}function DD(t,e){let r=t.path,n=e[0].path,o=e[1].path,a=o.length-1;return v.isYounger(n,r)||v.isYounger(o,r)?[_.create(k(x({},t.toJS()),{path:v.increment(r,1,a)}))]:[t]}function BD(t,e){let r=t[1].path,n=e.path,o=n.length-1;return v.isYounger(n,r)?t.map(a=>a.path[o]===void 0?a:_.create(k(x({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function qD(t,e){let r=e.path.length-1;return v.isYounger(e.path,t.path)?[_.create(k(x({},t.toJS()),{path:v.increment(t.path,1,r)}))]:[t]}function Xv(t,e){if(t.length===1)return zD(t[0],e);if(e.length===1)return LD(t,e[0]);let r=t[0],n=t[1],o=e[0],a=o.path.length-1,i=e[1];return v.isYounger(o.path,n.path)?t.map(s=>_.create(k(x({},s.toJS()),{path:v.decrement(s.path,1,a)}))):v.isAbove(o.path,n.path)?[_.create(k(x({},r.toJS()),{path:v.decrement(r.path,1,a)})),_.create(k(x({},n.toJS()),{path:v.decrement(n.path,1,a),position:n.position+i.position}))]:v.isEqual(o.path,r.path)?[]:t}function zD(t,e){let r=t.path,n=e[0].path,o=n.length-1;return v.isYounger(n,r)||v.isAbove(n,r)?[_.create(k(x({},t.toJS()),{path:v.decrement(r,1,o)}))]:[t]}function LD(t,e){return t}function Zv(t,e){return t}function Qv(t,e){return t}function eO(t,e){return t}function tO(t,e){return t}function rO(t,e){return t}function nO(t,e){return t}function oO(t,e){return t}f();function aO(t,e){return[t]}function iO(t,e){return[t]}function sO(t,e){return[t]}function uO(t,e){return[t]}function cO(t,e){let r=b(t,e);if(r[0]){let n=b(_.create(k(x({},t.toJS()),{path:t.newPath})),e);if(n[0])return[_.create(k(x({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function fO(t,e){let r=b(t,e);if(r[0]){let n=b(_.create(k(x({},t.toJS()),{path:t.newPath})),e);if(n[0])return[_.create(k(x({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function lO(t,e){let r=b(t,e);if(r[0]){let n=b(_.create(k(x({},t.toJS()),{path:t.newPath})),e);if(n[0])return[_.create(k(x({},r[0].toJS()),{newPath:n[0].path}))]}return[]}function hO(t,e){return b(t,e)}function pO(t,e){let r=e[e.length-1],n=r.path;if(v.isEqual(n,t.path))return[...e.reverse().map(yt),t];let o=b(t,r);if(o[0]){let a=b(_.create(k(x({},t.toJS()),{path:t.newPath})),r);if(a[0])return[_.create(k(x({},o[0].toJS()),{newPath:a[0].path}))]}return[]}function dO(t,e){let r=t.path;if(v.isEqual(r,e[0].path)||e.length>1&&v.isEqual(r,e[1].path))return e.reverse().map(yt).concat(t);if(!v.isAbove(r,e[0].path)&&e.length>1&&v.isAbove(r,e[1].path))return e.reverse().map(yt).concat(t);let n=b(t,e[0]);if(n[0]){let o=b(_.create(k(x({},t.toJS()),{path:t.newPath})),e[0]);if(o[0])return[_.create(k(x({},n[0].toJS()),{newPath:o[0].path}))]}return[]}function mO(t,e){return[t]}function gO(t,e){return[t]}function yO(t,e){return[t]}function vO(t,e){return[t]}function OO(t,e){return[t]}function _O(t,e){return[t]}function xO(t,e){return[t]}f();function bO(t,e){return[t]}function kO(t,e){return[t]}function TO(t,e){return[t]}function SO(t,e){return[t]}function NO(t,e){return b(t,e)}function AO(t,e){return b(t,e)}function IO(t,e){return b(t,e)}function RO(t,e){return b(t,e)}function wO(t,e){let r=e.length-1;return b(t,e[r])}function FO(t,e){return b(t,e[0])}function CO(t,e){return R(t,e)}function EO(t,e){return R(t,e)}function PO(t,e){return R(t,e)}function MO(t,e){return We(t,e)}function DO(t,e){return We(t,e)}function BO(t,e,r){return Xe(t,e,r)}function qO(t,e){return Xe(t,e)}f();function zO(t,e){return[t]}function LO(t,e){return[t]}function KO(t,e){return[t]}function jO(t,e){return[t]}function VO(t,e){return b(t,e)}function JO(t,e){return b(t,e)}function UO(t,e){return b(t,e)}function HO(t,e){return b(t,e)}function $O(t,e){let r=e.length-1;return b(t,e[r])}function GO(t,e){return b(t,e[0])}function YO(t,e){return R(t,e)}function WO(t,e){return R(t,e)}function XO(t,e){return R(t,e)}function ZO(t,e){return We(t,e)}function QO(t,e){return We(t,e)}function e_(t,e){return Xe(t,e)}function t_(t,e){return Xe(t,e)}f();function r_(t,e){return[t]}function n_(t,e){return[t]}function o_(t,e){return[t]}function a_(t,e){return[t]}function i_(t,e){return b(t,e)}function s_(t,e){return b(t,e)}function u_(t,e){return b(t,e)}function c_(t,e){return b(t,e)}function f_(t,e){let r=e.length-1;return b(t,e[r])}function l_(t,e){return b(t,e[0])}function h_(t,e){return R(t,e)}function p_(t,e){return R(t,e)}function d_(t,e){return R(t,e)}function m_(t,e){return[t]}function g_(t,e){return[t]}function y_(t,e){return[t]}function v_(t,e){return[t]}f();function O_(t,e){return v.compare(t.get("path"),e.get("path"))===0?t.get("offset")+t.get("length")<=e.get("offset")?[t]:t.get("offset")<e.get("offset")?[_.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset"),length:t.get("length")+e.get("text").length,mark:t.get("mark"),data:t.get("data")})]:[_.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset")+e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})]:[t]}function __(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("offset"),o=t.get("length"),a=n+o,i=e.get("offset"),s=e.get("text").length,u=i+s;if(a<=i)return[t];if(u<=n)return[_.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:t.get("offset")-e.get("text").length,length:t.get("length"),mark:t.get("mark"),data:t.get("data")})];{let c=Math.max(n,i),l=Math.min(a,u);if(c<=l){let h=l-c,p=o-h,d=0;return n<i?d=n:a>u?d=i:d=n+h,[_.create({object:"operation",type:"remove_mark",path:t.get("path"),offset:d,length:p,mark:t.get("mark"),data:t.get("data")})]}}}return[t]}function x_(t,e){return[t]}function b_(t,e){return[t]}function k_(t,e){return b(t,e)}function T_(t,e){return b(t,e)}function S_(t,e){return b(t,e)}function N_(t,e){return b(t,e)}function A_(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].length)return r;r=r.map(a=>b(a,o)).flat()}return r}function I_(t,e){let[r]=b(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function R_(t,e){return R(t,e)}function w_(t,e){return R(t,e)}function F_(t,e){return R(t,e)}function C_(t,e){return[t]}function E_(t,e){return[t]}function P_(t,e){return[t]}function M_(t,e){return[t]}f();function D_(t,e){return[t]}function B_(t,e){return[t]}function q_(t,e){return[t]}function z_(t,e){return[t]}function L_(t,e){return b(t,e)}function K_(t,e){return b(t,e)}function j_(t,e){return v.isAbove(t.path,e.path)&&!v.isSibling(e.path,e.newPath)?[t,_.create(k(x({},t.toJS()),{path:e.newPath}))]:b(t,e)}function V_(t,e){return b(t,e)}function J_(t,e){let r=e.length-1;return v.isEqual(e[r].path,t.path)?[_.create(x({},t.toJS())),_.create(k(x({},t.toJS()),{path:[4]}))]:b(t,e[r])}function U_(t,e){let r=t.path,n=e[0].path,[,o]=v.crop(r,e[e.length-1].path);return v.isEqual(r,n)||v.isEqual(r,o)?e.reverse().map(yt).concat(t):b(t,e[0])}function H_(t,e){return[t]}function $_(t,e){return[t]}function G_(t,e){return[t]}function Y_(t,e){return[t]}function W_(t,e){return[t]}function X_(t,e){return[t]}function Z_(t,e){return[t]}f();function Q_(t,e){if(v.compare(t.get("path"),e.get("path"))===0){let n=t.get("text").length,o=t.get("offset"),a=o+n,i=e.get("offset");if(a<=i)return[t];if(o>=i)return[_.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset")+e.get("text").length,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})];let s=i-o,u=t.get("text").slice(0,s),c=t.get("text").slice(s,n);return[_.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset"),text:u+e.get("text")+c,marks:t.get("marks"),data:t.get("data")})]}return[t]}function ex(t,e,r){if(v.isEqual(t.get("path"),e.get("path"))){let o=t.get("text").length,a=t.get("offset"),i=a+o,s=e.get("text").length,u=e.get("offset"),c=u+s;if(a===u&&o===s)return r==="left"?[t]:[];if(u<=a&&i<=c)return[];if(i<=u)return[t];if(a>=c)return[_.create({object:"operation",type:"remove_text",path:t.get("path"),offset:a-s,text:t.get("text"),marks:t.get("marks"),data:t.get("data")})];let l=Math.max(u-a,0),h=t.get("text").slice(0,l),p=Math.min(o,o-(i-c)),d=t.get("text").slice(p,o);return[_.create({object:"operation",type:"remove_text",path:t.get("path"),offset:t.get("offset")-Math.max(0,a-u),text:h+d,marks:t.get("marks"),data:t.get("data")})]}return[t]}function tx(t,e){return[t]}function rx(t,e){return[t]}function nx(t,e){return b(t,e)}function ox(t,e){return b(t,e)}function ax(t,e){return b(t,e)}function ix(t,e){return b(t,e)}function sx(t,e){let r=[t];for(let n=0;n<e.length;n++){let o=e[n];if(v.isEqual(o.path,r[0].path)&&o.position===r[0].offset+r[0].text.length)return r;r=r.map(a=>b(a,o)).flat()}return r}function ux(t,e){let[r]=b(t,e[0]);return e.length>1&&v.isSibling(e[1].path,r.path)?[r.set("offset",r.offset+e[1].position)]:[r]}function cx(t,e){return R(t,e)}function fx(t,e){return R(t,e)}function lx(t,e){return R(t,e)}function hx(t,e){return[t]}function px(t,e){return[t]}function dx(t,e){return[t]}function mx(t,e){return[t]}f();function gx(t,e){return[t]}function yx(t,e){return[t]}function vx(t,e){return[t]}function Ox(t,e){return[t]}function _x(t,e){return b(t,e)}function xx(t,e){return b(t,e)}function bx(t,e){return b(t,e)}function kx(t,e){return b(t,e)}function Tx(t,e){let r=e.length-1;return b(t,e[r])}function Sx(t,e){return b(t,e[0])}function Nx(t,e){return R(t,e)}function Ax(t,e){return R(t,e)}function Ix(t,e){return R(t,e)}function Rx(t,e){return[t]}function wx(t,e){return[t]}function Fx(t,e){return[t]}function Cx(t,e){return[t]}f();function Ex(t,e){return[t]}function Px(t,e){return[t]}function Mx(t,e){return[t]}function Dx(t,e){return[t]}function Bx(t,e){return b(t,e)}function qx(t,e){return b(t,e)}function zx(t,e){return b(t,e)}function Lx(t,e){return[t]}function Kx(t,e){let r=e.length-1;return v.isEqual(e[r].path,t.path)?[_.create(x({},t.toJS())),_.create(k(x({},t.toJS()),{path:[4]}))]:b(t,e[r])}function jx(t,e){return v.isEqual(t.path,e[0].path)?[]:b(t,e[0])}function Vx(t,e){return[t]}function Jx(t,e){return[t]}function Ux(t,e){return[t]}function Hx(t,e){return[t]}function $x(t,e){return[t]}function Gx(t,e){return[t]}function Yx(t,e){return[t]}f();function Wx(t,e){let r=t[0],n=t[1],o=t[2];if(v.isEqual(r.path,e.path)&&r.position>=e.offset){let a=e.text.length,i=r.position+a;return[_.create(k(x({},r.toJS()),{position:i})),...n?[_.create(k(x({},n.toJS()),{target:n.target+a}))]:[],...o?[o]:[]]}return t}function Xx(t,e){let r=t[0],n=t[1],o=t[2];if(v.isEqual(e.path,r.path)){let a=r.position,i=e.text.length,s=e.offset,u=e.offset+i,c=a;a>u?c=r.position-i:a>s&&(c=s);let l=c;return[_.create(k(x({},r.toJS()),{position:c})),...n?[_.create(k(x({},n.toJS()),{target:l}))]:[],...o?[o]:[]]}return t}function Zx(t,e){return t}function Qx(t,e){return t}function eb(t,e){let r=t[t.length-1],n=e.path,o=n.length-1;return v.isYounger(n,r.path)||v.isEqual(n,r.path)||v.isAbove(n,r.path)?t.map(a=>_.create(k(x({},a.toJS()),{path:v.increment(a.path,1,o)}))):t}function tb(t,e){let r=t[t.length-1],n=e.path,o=n.length-1;return v.isEqual(n,r.path)||v.isAbove(n,r.path)?[]:v.isYounger(n,r.path)?t.map(a=>_.create(k(x({},a.toJS()),{path:v.decrement(a.path,1,o)}))):t}function rb(t,e){let r=t[0],n=t[1],o=t[2],a=n.path;if(v.isEqual(a,e.path)){let i=_.create(k(x({},r.toJS()),{path:[...e.newPath,0]})),s=_.create(k(x({},n.toJS()),{path:[...e.newPath]}));return[i,s]}return[b(r,e)[0],b(n,e)[0],...o?b(o,e):[]]}function nb(t,e){return t}function ob(t,e){let r=t[0],n=t[1],o=t[2],a=o||n,i=e[0],s=e[1],u=e[2],c=u||s,l=c.path.length-1;if(v.isBefore(c.path,a.path)&&v.isYounger(c.path,a.path))return t.map(h=>_.create(k(x({},h.toJS()),{path:v.increment(h.path,1,l)})));if(v.isEqual(c.path,a.path)&&r.position>=i.position){let h=r.position-i.position;return[_.create(k(x({},r.toJS()),{path:v.increment(r.path,1,l),position:h})),_.create(k(x({},n.toJS()),{path:v.increment(n.path,1,l),target:h})),...o?[_.create(k(x({},o.toJS()),{path:v.increment(o.path,1,l)}))]:[]]}return t}function ab(t,e){let r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],s=a.path.length-1;if(v.isBefore(a.path,n.path)&&v.isYounger(a.path,n.path))return t.map(u=>_.create(k(x({},u.toJS()),{path:v.decrement(u.path,1,s)})));if(v.isEqual(n.path,a.path)){let u=r.position+i.position;return[_.create(k(x({},r.toJS()),{path:v.decrement(r.path,1,s),position:u})),_.create(k(x({},n.toJS()),{path:v.decrement(n.path,1,s),target:u})),...o?[_.create(k(x({},o.toJS()),{path:v.increment(o.path,1,s)}))]:[]]}return t}function ib(t,e){return t}function sb(t,e){return t}function ub(t,e){return t}function cb(t,e){return t}function fb(t,e){return t}function lb(t,e){return t}function hb(t,e){return t}var ZD=ve("slate:operation:transform");function ps(t,e,r="left"){if(t.length===0||e.length===0||t[0].get("type")==="set_selection"||e[0].get("type")==="set_selection")return t;let n=t[0].type,o=e[0].type;if(o==="set_document")return[];switch(n){case"insert_text":switch(o){case"insert_text":return Av(t[0],e[0],r);case"remove_text":return Iv(t[0],e[0]);case"add_mark":return Rv(t[0],e[0]);case"remove_mark":return wv(t[0],e[0]);case"insert_node":return Fv(t[0],e[0]);case"remove_node":return Cv(t[0],e[0]);case"move_node":return Ev(t[0],e[0]);case"set_node":return Pv(t[0],e[0]);case"split_node":return Mv(t[0],e);case"merge_node":return w(n,t.length,o,e.length),Dv(t[0],e);case"insert_fragment":return Bv(t[0],e[0]);case"set_fragment":return qv(t[0],e[0]);case"remove_fragment":return zv(t[0],e[0]);case"insert_data":return Lv(t[0],e[0]);case"remove_data":return Kv(t[0],e[0]);case"insert_array_data":return ls(t[0],e[0]);case"remove_array_data":return hs(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_text":switch(o){case"insert_text":return Q_(t[0],e[0]);case"remove_text":return ex(t[0],e[0],r);case"add_mark":return tx(t[0],e[0]);case"remove_mark":return rx(t[0],e[0]);case"insert_node":return nx(t[0],e[0]);case"remove_node":return ox(t[0],e[0]);case"move_node":return ax(t[0],e[0]);case"set_node":return ix(t[0],e[0]);case"split_node":return sx(t[0],e);case"merge_node":return w(n,t.length,o,e.length),ux(t[0],e);case"insert_fragment":return cx(t[0],e[0]);case"set_fragment":return fx(t[0],e[0]);case"remove_fragment":return lx(t[0],e[0]);case"insert_data":return hx(t[0],e[0]);case"remove_data":return px(t[0],e[0]);case"insert_array_data":return dx(t[0],e[0]);case"remove_array_data":return mx(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"add_mark":switch(o){case"insert_text":return Zg(t[0],e[0]);case"remove_text":return Qg(t[0],e[0]);case"add_mark":return ey(t[0],e[0]);case"remove_mark":return ty(t[0],e[0]);case"insert_node":return ry(t[0],e[0]);case"remove_node":return ny(t[0],e[0]);case"move_node":return oy(t[0],e[0]);case"set_node":return ay(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),iy(t[0],e);case"merge_node":return w(n,t.length,o,e.length),sy(t[0],e);case"insert_fragment":return uy(t[0],e[0]);case"set_fragment":return cy(t[0],e[0]);case"remove_fragment":return fy(t[0],e[0]);case"insert_data":return ly(t[0],e[0]);case"remove_data":return hy(t[0],e[0]);case"insert_array_data":return py(t[0],e[0]);case"remove_array_data":return dy(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_mark":switch(o){case"insert_text":return O_(t[0],e[0]);case"remove_text":return __(t[0],e[0]);case"add_mark":return x_(t[0],e[0]);case"remove_mark":return b_(t[0],e[0]);case"insert_node":return k_(t[0],e[0]);case"remove_node":return T_(t[0],e[0]);case"move_node":return S_(t[0],e[0]);case"set_node":return N_(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),A_(t[0],e);case"merge_node":return w(n,t.length,o,e.length),I_(t[0],e);case"insert_fragment":return R_(t[0],e[0]);case"set_fragment":return w_(t[0],e[0]);case"remove_fragment":return F_(t[0],e[0]);case"insert_data":return C_(t[0],e[0]);case"remove_data":return E_(t[0],e[0]);case"insert_array_data":return P_(t[0],e[0]);case"remove_array_data":return M_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_node":switch(o){case"insert_text":return fv(t[0],e[0]);case"remove_text":return lv(t[0],e[0]);case"add_mark":return hv(t[0],e[0]);case"remove_mark":return pv(t[0],e[0]);case"insert_node":return dv(t[0],e[0],r);case"remove_node":return mv(t[0],e[0]);case"move_node":return gv(t[0],e[0]);case"set_node":return yv(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),vv(t[0],e);case"merge_node":return w(n,t.length,o,e.length),Ov(t[0],e);case"insert_fragment":return _v(t[0],e[0]);case"set_fragment":return xv(t[0],e[0]);case"remove_fragment":return bv(t[0],e[0]);case"insert_data":return kv(t[0],e[0]);case"remove_data":return Tv(t[0],e[0]);case"insert_array_data":return Sv(t[0],e[0]);case"remove_array_data":return Nv(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_node":switch(o){case"insert_text":return D_(t[0],e[0]);case"remove_text":return B_(t[0],e[0]);case"add_mark":return q_(t[0],e[0]);case"remove_mark":return z_(t[0],e[0]);case"insert_node":return L_(t[0],e[0]);case"remove_node":return K_(t[0],e[0]);case"move_node":return j_(t[0],e[0]);case"set_node":return V_(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),J_(t[0],e);case"merge_node":return w(n,t.length,o,e.length),U_(t[0],e);case"insert_fragment":return H_(t[0],e[0]);case"set_fragment":return $_(t[0],e[0]);case"remove_fragment":return G_(t[0],e[0]);case"insert_data":return Y_(t[0],e[0]);case"remove_data":return W_(t[0],e[0]);case"insert_array_data":return X_(t[0],e[0]);case"remove_array_data":return Z_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"set_node":switch(o){case"insert_text":return Ex(t[0],e[0]);case"remove_text":return Px(t[0],e[0]);case"add_mark":return Mx(t[0],e[0]);case"remove_mark":return Dx(t[0],e[0]);case"insert_node":return Bx(t[0],e[0]);case"remove_node":return qx(t[0],e[0]);case"move_node":return zx(t[0],e[0]);case"set_node":return Lx(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),Kx(t[0],e);case"merge_node":return w(n,t.length,o,e.length),jx(t[0],e);case"insert_fragment":return Vx(t[0],e[0]);case"set_fragment":return Jx(t[0],e[0]);case"remove_fragment":return Ux(t[0],e[0]);case"insert_data":return Hx(t[0],e[0]);case"remove_data":return $x(t[0],e[0]);case"insert_array_data":return Gx(t[0],e[0]);case"remove_array_data":return Yx(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"move_node":switch(o){case"insert_text":return aO(t[0],e[0]);case"remove_text":return iO(t[0],e[0]);case"add_mark":return sO(t[0],e[0]);case"remove_mark":return uO(t[0],e[0]);case"insert_node":return cO(t[0],e[0]);case"remove_node":return fO(t[0],e[0]);case"move_node":return lO(t[0],e[0]);case"set_node":return hO(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),pO(t[0],e);case"merge_node":return w(n,t.length,o,e.length),dO(t[0],e);case"insert_fragment":return mO(t[0],e[0]);case"set_fragment":return gO(t[0],e[0]);case"remove_fragment":return yO(t[0],e[0]);case"insert_data":return vO(t[0],e[0]);case"remove_data":return OO(t[0],e[0]);case"insert_array_data":return _O(t[0],e[0]);case"remove_array_data":return xO(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"split_node":switch(o){case"insert_text":return w(n,t.length,o,e.length),Wx(t,e[0]);case"remove_text":return w(n,t.length,o,e.length),Xx(t,e[0]);case"add_mark":return Zx(t,e[0]);case"remove_mark":return Qx(t,e[0]);case"insert_node":return w(n,t.length,o,e.length),eb(t,e[0]);case"remove_node":return w(n,t.length,o,e.length),tb(t,e[0]);case"set_node":return nb(t,e[0]);case"split_node":return w(n,t.length,o,e.length),ob(t,e);case"merge_node":return w(n,t.length,o,e.length),ab(t,e);case"move_node":return w(n,t.length,o,e.length),rb(t,e[0]);case"insert_fragment":return ib(t,e[0]);case"set_fragment":return sb(t,e[0]);case"remove_fragment":return ub(t,e[0]);case"insert_data":return cb(t,e[0]);case"remove_data":return fb(t,e[0]);case"insert_array_data":return lb(t,e[0]);case"remove_array_data":return hb(t,e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"merge_node":switch(o){case"insert_text":return w(n,t.length,o,e.length),jv(t,e[0]);case"remove_text":return w(n,t.length,o,e.length),Vv(t,e[0]);case"add_mark":return Jv(t,e[0]);case"remove_mark":return Uv(t,e[0]);case"insert_node":return w(n,t.length,o,e.length),Hv(t,e[0]);case"remove_node":return w(n,t.length,o,e.length),$v(t,e[0]);case"set_node":return Yv(t,e[0]);case"split_node":return w(n,t.length,o,e.length),Wv(t,e);case"merge_node":return w(n,t.length,o,e.length),Xv(t,e);case"move_node":return w(n,t.length,o,e.length),Gv(t,e[0]);case"insert_fragment":return Zv(t,e[0]);case"set_fragment":return Qv(t,e[0]);case"remove_fragment":return eO(t,e[0]);case"insert_data":return tO(t,e[0]);case"remove_data":return rO(t,e[0]);case"insert_array_data":return nO(t,e[0]);case"remove_array_data":return oO(t,e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_fragment":switch(o){case"insert_text":return Yy(t[0],e[0]);case"remove_text":return Wy(t[0],e[0]);case"add_mark":return Xy(t[0],e[0]);case"remove_mark":return Zy(t[0],e[0]);case"insert_node":return Qy(t[0],e[0]);case"remove_node":return ev(t[0],e[0]);case"move_node":return tv(t[0],e[0]);case"set_node":return rv(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),nv(t[0],e);case"merge_node":return w(n,t.length,o,e.length),ov(t[0],e);case"insert_fragment":return av(t[0],e[0],r);case"set_fragment":return iv(t[0],e[0]);case"remove_fragment":return sv(t[0],e[0]);case"insert_data":return uv(t[0],e[0]);case"remove_data":return cv(t[0],e[0]);case"insert_array_data":return ls(t[0],e[0]);case"remove_array_data":return hs(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"set_fragment":switch(o){case"insert_text":return gx(t[0],e[0]);case"remove_text":return yx(t[0],e[0]);case"add_mark":return vx(t[0],e[0]);case"remove_mark":return Ox(t[0],e[0]);case"insert_node":return _x(t[0],e[0]);case"remove_node":return xx(t[0],e[0]);case"move_node":return bx(t[0],e[0]);case"set_node":return kx(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),Tx(t[0],e);case"merge_node":return w(n,t.length,o,e.length),Sx(t[0],e);case"insert_fragment":return Nx(t[0],e[0]);case"set_fragment":return Ax(t[0],e[0]);case"remove_fragment":return Ix(t[0],e[0]);case"insert_data":return Rx(t[0],e[0]);case"remove_data":return wx(t[0],e[0]);case"insert_array_data":return Fx(t[0],e[0]);case"remove_array_data":return Cx(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_fragment":switch(o){case"insert_text":return r_(t[0],e[0]);case"remove_text":return n_(t[0],e[0]);case"add_mark":return o_(t[0],e[0]);case"remove_mark":return a_(t[0],e[0]);case"insert_node":return i_(t[0],e[0]);case"remove_node":return s_(t[0],e[0]);case"move_node":return u_(t[0],e[0]);case"set_node":return c_(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),f_(t[0],e);case"merge_node":return w(n,t.length,o,e.length),l_(t[0],e);case"insert_fragment":return h_(t[0],e[0]);case"set_fragment":return p_(t[0],e[0]);case"remove_fragment":return d_(t[0],e[0]);case"insert_data":return m_(t[0],e[0]);case"remove_data":return g_(t[0],e[0]);case"insert_array_data":return y_(t[0],e[0]);case"remove_array_data":return v_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_data":switch(o){case"insert_text":return Cy(t[0],e[0]);case"remove_text":return Ey(t[0],e[0]);case"add_mark":return Py(t[0],e[0]);case"remove_mark":return My(t[0],e[0]);case"insert_node":return Dy(t[0],e[0]);case"remove_node":return By(t[0],e[0]);case"move_node":return qy(t[0],e[0]);case"set_node":return zy(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),Ly(t[0],e);case"merge_node":return w(n,t.length,o,e.length),Ky(t[0],e);case"insert_fragment":return jy(t[0],e[0]);case"set_fragment":return Vy(t[0],e[0]);case"remove_fragment":return Jy(t[0],e[0]);case"insert_data":return Uy(t[0],e[0],r);case"remove_data":return Hy(t[0],e[0]);case"insert_array_data":return $y(t[0],e[0]);case"remove_array_data":return Gy(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_data":switch(o){case"insert_text":return zO(t[0],e[0]);case"remove_text":return LO(t[0],e[0]);case"add_mark":return KO(t[0],e[0]);case"remove_mark":return jO(t[0],e[0]);case"insert_node":return VO(t[0],e[0]);case"remove_node":return JO(t[0],e[0]);case"move_node":return UO(t[0],e[0]);case"set_node":return HO(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),$O(t[0],e);case"merge_node":return w(n,t.length,o,e.length),GO(t[0],e);case"insert_fragment":return YO(t[0],e[0]);case"set_fragment":return WO(t[0],e[0]);case"remove_fragment":return XO(t[0],e[0]);case"insert_data":return ZO(t[0],e[0]);case"remove_data":return QO(t[0],e[0]);case"insert_array_data":return e_(t[0],e[0]);case"remove_array_data":return t_(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"insert_array_data":switch(o){case"insert_text":return my(t[0],e[0]);case"remove_text":return gy(t[0],e[0]);case"add_mark":return yy(t[0],e[0]);case"remove_mark":return vy(t[0],e[0]);case"insert_node":return Oy(t[0],e[0]);case"remove_node":return _y(t[0],e[0]);case"move_node":return xy(t[0],e[0]);case"set_node":return by(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),ky(t[0],e);case"merge_node":return w(n,t.length,o,e.length),Ty(t[0],e);case"insert_fragment":return Sy(t[0],e[0]);case"set_fragment":return Ny(t[0],e[0]);case"remove_fragment":return Ay(t[0],e[0]);case"insert_data":return Iy(t[0],e[0]);case"remove_data":return Ry(t[0],e[0]);case"insert_array_data":return wy(t[0],e[0],r);case"remove_array_data":return Fy(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}case"remove_array_data":switch(o){case"insert_text":return bO(t[0],e[0]);case"remove_text":return kO(t[0],e[0]);case"add_mark":return TO(t[0],e[0]);case"remove_mark":return SO(t[0],e[0]);case"insert_node":return NO(t[0],e[0]);case"remove_node":return AO(t[0],e[0]);case"move_node":return IO(t[0],e[0]);case"set_node":return RO(t[0],e[0]);case"split_node":return w(n,t.length,o,e.length),wO(t[0],e);case"merge_node":return w(n,t.length,o,e.length),FO(t[0],e);case"insert_fragment":return CO(t[0],e[0]);case"set_fragment":return EO(t[0],e[0]);case"remove_fragment":return PO(t[0],e[0]);case"insert_data":return MO(t[0],e[0]);case"remove_data":return DO(t[0],e[0]);case"insert_array_data":return BO(t[0],e[0],r);case"remove_array_data":return qO(t[0],e[0]);default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}default:throw new Error(`Unsupported operation type passed: ${n}, ${o}`)}}function Fo(t,e,r="left"){let n=fs(t),o=fs(e),a=n.map(s=>{let u=[...s];return o.forEach(c=>{u=ps(u,c,r)}),u});return[].concat(...a)}function pb(t,e,r="right"){let{history:n}=t,{undos:o,redos:a}=n,i=[];o.forEach(l=>{let h=Fo(l.operations.toArray(),e,r);return h.length>0&&i.push(Jt.create(h)),!0});let s=[];a.forEach(l=>{let h=Fo(l.operations.toArray(),e,r);return h.length>0&&s.push(Jt.create(h)),!0});let u=t.change(),c=n.merge({undos:st(i),redos:st(s)});return u.value.merge({history:c})}function w(t,e,r,n){ZD.warning(`Transform of ${e} ${t} against ${n} ${r} should be improved.`)}f();function db(t,e){return t.localeCompare(e,"en")<0?"left":"right"}var Co={apply:bm,invert:yt,transform:ps,transformManyToMany:Fo,transformHistory:pb,getUserSide:db};var Eo=ve("slate:change"),_e=class{constructor(e){let{value:r}=e;this.initialValue=r,this.value=r,this.operations=N(),this.flags=x({normalize:!0},(0,ms.default)(e,["merge","save","normalize"]))}get object(){return"change"}applyOperation(e,r={}){let{operations:n,flags:o}=this,{value:a}=this,{history:i}=a;r=x(x({},o),r);let{merge:s=n.size===0?void 0:!0,save:u=!0,skip:c}=r;return Eo.debug("apply",{operation:e,save:u,merge:s}),a=Co.apply(a,e),i&&u&&(i=i.save(Co.invert(e),{merge:s,skip:c}),a=a.set("history",i)),this.value=a,this.operations=n.push(e),this}applyOperations(e,r){return e.forEach(n=>this.applyOperation(n,r)),this}call(e,...r){return e(this,...r),this}withoutNormalization(e){let r=this.flags.normalize;this.setOperationFlag("normalize",!1);try{e(this)}finally{this.setOperationFlag("normalize",r)}return this}setOperationFlag(e,r){return this.flags[e]=r,this}getFlag(e,r={}){return r[e]!==void 0?r[e]:this.flags[e]}unsetOperationFlag(e){return delete this.flags[e],this}setValueData(e,r={}){e=ee.create(e);let{value:n}=this;return this.applyOperation(_.create({type:"set_value_data",data:e,previousData:n.data}),r),this}setValueDecoration(e){return this.value=this.value.merge({decorations:this.value.decorations.add(e)}),this}removeValueDecoration(e){return this.value=this.value.merge({decorations:this.value.decorations.remove(e)}),this}undo(){let{value:e}=this,{history:r}=e;if(!r)return this;let{undos:n,redos:o}=r,a=n.peek();return a?(n=n.pop(),o=o.push(a),a.operations.forEach(i=>{let{type:s,properties:u}=i;s==="set_selection"&&(i=i.set("properties",(0,ds.default)(u,"isFocused"))),this.applyOperation(i,{save:!1})}),e=this.value,r=r.set("undos",n).set("redos",o),e=e.set("history",r),this.value=e,this):this}redo(){let{value:e}=this,{history:r}=e;if(!r)return this;let{undos:n,redos:o}=r,a=o.peek();return a?(o=o.pop(),n=n.push(a),a.operations.slice().reverse().map(Co.invert).forEach(s=>{let{type:u,properties:c}=s;u==="set_selection"&&(s=s.set("properties",(0,ds.default)(c,"isFocused"))),this.applyOperation(s,{save:!1})}),e=this.value,r=r.set("undos",n).set("redos",o),e=e.set("history",r),this.value=e,this):this}select(e,r={}){let n=oe.createProperties(e),{snapshot:o=!1}=r,{value:a}=this,{document:i,selection:s}=a,u={},c=s.merge(n).normalize(i);if(!o&&s.equals(c))return Eo.warning("Skipping change.select because it's called with the same selection. It may indicate an issue with event handlers."),this;let l=s.toJS();n=(0,ms.default)(c,Object.keys(n));for(let p in n)o===!1&&n[p]===l[p]||(u[p]=n[p]);let h=["anchorKey","anchorOffset","focusKey","focusOffset"].some(p=>u.hasOwnProperty(p));return l.marks&&n.marks===l.marks&&h&&(u.marks=null),(0,mb.default)(u)?this:(this.applyOperation(_.create({type:"set_selection",properties:u,selection:c}),o?{skip:!1,merge:!1}:{}),this)}selectAll(){let{value:e}=this,{document:r,selection:n}=e,o=r.getFragmentParent(n.anchorKey);if(!o)return this;let a=n.moveToRangeOf(o);return this.select(a),this}snapshotSelection(){let{value:e}=this,{selection:r}=e;return this.select(r,{snapshot:!0}),this}moveAnchorCharBackward(){let{value:e}=this,{document:r,selection:n,anchorText:o,anchorBlock:a}=e,{anchorOffset:i}=n,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);return!u&&i>0?(this.moveAnchor(-1),this):s?(this.moveAnchorToEndOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveAnchor(-1),this):this}moveAnchorCharForward(){let{value:e}=this,{document:r,selection:n,anchorText:o,anchorBlock:a}=e,{anchorOffset:i}=n,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);return!u&&i<o.text.length?(this.moveAnchor(1),this):s?(this.moveAnchorToStartOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveAnchor(1),this):this}moveFocusCharBackward(){let{value:e}=this,{document:r,selection:n,focusText:o,focusBlock:a}=e,{focusOffset:i}=n,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);if(!u&&i>0){this.moveFocus(-1);return}if(!!s)return this.moveFocusToEndOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveFocus(-1),this}moveFocusCharForward(){let{value:e}=this,{document:r,selection:n,focusText:o,focusBlock:a}=e,{focusOffset:i}=n,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);if(!u&&i<o.text.length){this.moveFocus(1);return}if(!!s)return this.moveFocusToStartOf(s),!u&&!c&&a.hasNode(s.key)&&this.moveFocus(1),this}addMarkByKey(e,r,n,o,a={}){o=q.create(o);let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),h=u.getNode(e).getLeaves(),p=[],d=r,y=r+n,g=0;if(h.forEach(O=>{let T=g,S=T+O.text.length;if(g+=O.text.length,S<d||y<T||O.marks.has(o))return;let C=Math.max(T,d),I=Math.min(S,y);p.push(_.create({type:"add_mark",path:c,offset:C,length:I-C,mark:o}))}),this.applyOperations(p),i){let O=u.getParent(e);this.normalizeNodeByKey(O.key)}return this}insertDocumentByKey(e,r,n,o={}){let a=this.getFlag("normalize",o);return n.nodes.forEach((i,s)=>{this.insertNodeByKey(e,r+s,i)}),a&&this.normalizeNodeByKey(e),this}setFragmentByKey(e,r,n={}){if(!Ae.isFragment(r))return this;let{value:o}=this,{document:a}=o,i=a.getNode(e);if(!i||i.object!=="block")return this;let s=a.getPath(e),u=a.getPath(r.fragmentKey);return this.applyOperation(_.create({type:"set_fragment",path:s,fragmentPath:u||void 0,node:r}),n),this.getFlag("normalize",n)&&this.normalizeNodeByKey(e),this}insertFragmentByKey(e,r,n={}){if(!Ae.isFragment(r))return this;let{value:o}=this,{document:a}=o,i=a.getNode(e);if(!i||i.object!=="block")return this;let s=a.getPath(e),u=[...s,i.fragments.size];return this.applyOperation(_.create({type:"insert_fragment",path:s,fragmentPath:u,node:r}),n),this.getFlag("normalize",n)&&this.normalizeNodeByKey(e),this}insertNodeByKey(e,r,n,o={}){if(Ae.isFragment(n))return this;let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i;if(s.hasNodeKeyConflict(n))return Eo.error(`skip insertNodeByKey, node "${n.key}" is conflicting with existing keys`),this;let u=s.getPath(e);return this.applyOperation(_.create({type:"insert_node",path:[...u,r],node:n})),a&&this.normalizeNodeByKey(e),this}insertNodeAfterByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i)return this;let s=i.getChildIndex(e);return this.insertNodeByKey(i.key,s+1,r,n)}insertNodeBeforeByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i)return this;let s=i.getChildIndex(e);return this.insertNodeByKey(i.key,s,r,n)}insertTextByKey(e,r,n,o,a={}){let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),l=u.getNode(e),h=o?q.createSet(o):l.getMarksAtIndex(r);if(this.applyOperation(_.create({type:"insert_text",path:c,offset:r,text:n,marks:h})),i){let p=u.getParent(e);this.normalizeNodeByKey(p.key)}return this}appendNodeByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.assertNode(e).nodes.size;return this.insertNodeByKey(e,i,r,n),this}insertDataByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e);return this.applyOperation(_.create({type:"insert_data",path:u,dataPath:r,data:n}),o),a&&this.normalizeNodeByKey(e),this}setDataByKey(e,r,n,o={}){return this.insertDataByKey(e,r,n,o)}insertArrayDataByKey(e,r,n,o,a={}){let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e);return this.applyOperation(_.create({type:"insert_array_data",path:c,dataPath:r,data:n,dataIndex:o}),a),i&&this.normalizeNodeByKey(e),this}removeArrayDataByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e);return this.applyOperation(_.create({type:"remove_array_data",path:u,dataPath:r,data:n}),o),a&&this.normalizeNodeByKey(e),this}removeDataPathByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getPath(e),u=i.getNodeAtPath(s);return this.applyOperation(_.create({type:"remove_data",path:s,dataPath:r,data:u.data.getIn(r)})),o&&this.normalizeNodeByKey(e),this}mergeNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getPath(e),s=a.getDescendant(e),u=a.getPreviousSibling(e);if(!u)throw new Error(`Unable to merge node with key "${e}", no previous key.`);let c=u.object==="text"?u.text.length:u.nodes.size;if(this.applyOperation(_.create({type:"merge_node",path:i,position:c,properties:{key:s.key,type:s.type,data:s.data},target:null})),n){let l=a.getParent(e);this.normalizeNodeByKey(l.key)}return this}moveNodeByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getPath(r);if(this.applyOperation(_.create({type:"move_node",path:u,newPath:[...c,n]})),a){let l=s.getCommonAncestor(e,r);this.normalizeNodeByKey(l.key)}return this}moveAfterOrBefore(e,r,n,o={}){let{value:a}=this,{document:i}=a,s=i.getParent(r);if(!s)return this;let u=s.getChildIndex(r)+n,c=s.getChildIndex(e);return u===c?this:(c>=0&&(u=c<=u?u-1:u),this.moveNodeByKey(e,s.key,u,o))}moveAfterNodeByKey(e,r,n={}){return this.moveAfterOrBefore(e,r,1,n)}moveBeforeNodeByKey(e,r,n={}){return this.moveAfterOrBefore(e,r,0,n)}removeMarkByKey(e,r,n,o,a={}){o=q.create(o);let i=this.getFlag("normalize",a),{value:s}=this,{document:u}=s,c=u.getPath(e),h=u.getNode(e).getLeaves(),p=[],d=r,y=r+n,g=0;if(h.forEach(O=>{let T=g,S=T+O.text.length;if(g+=O.text.length,S<d||y<T||!O.marks.has(o))return;let C=Math.max(T,d),I=Math.min(S,y);p.push(_.create({type:"remove_mark",path:c,offset:C,length:I-C,mark:o}))}),this.applyOperations(p),i){let O=u.getParent(e);this.normalizeNodeByKey(O.key)}return this}removeInvalidMarksByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getNode(e),s=i.getLeaves();if(!s.size)return this;let u=i.getMarksAsArray().filter(l=>!r.includes(l.type));if(!u||!u.length)return this;let c=0;return s.forEach(l=>{l.marks.forEach(h=>{r.includes(h.type)||this.removeMarkByKey(i.key,c,l.text.length,h,n)}),c+=l.text.length}),this}removeAllMarksByKey(e,r={}){let{value:n}=this,{document:o}=n,a=o.getNode(e);return(a.object==="text"?[a]:a.getTextsAsArray()).forEach(s=>{s.getMarksAsArray().forEach(u=>{this.removeMarkByKey(s.key,0,s.text.length,u,r)})}),this}removeDataByKey(e,r,n={}){let{value:o}=this,{document:a}=o,i=a.getNode(e),s={isVoid:i.isVoid,type:i.type,data:i.data.deleteAll(r)};return this.setNodeByKey(i.key,s,n),this}removeNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getPath(e),s=a.getNode(e);if(s.object==="fragment")return this.removeFragmentInParentByKey(a.getParent(e).key,s.fragmentKey,r);if(this.applyOperation(_.create({type:"remove_node",path:i,node:s})),n){let u=a.getParent(e);this.normalizeNodeByKey(u.key),this.value.selection.isUnset&&this.normalizeSelection()}return this}removeFragmentByKey(e,r={}){let{value:n}=this,{document:o}=n,a=o.getNode(e);if(!a||a.object!=="fragment")return this;let i=o.getParent(e);if(!i||i.object!=="block")throw new Error("Fragment must be a direct child of a block");return this.removeFragmentInParentByKey(i.key,a.fragmentKey,r)}removeFragmentInParentByKey(e,r,n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.getNode(e);if(!s||s.object!=="block")return this;let u=s.getFragmentByKey(r);if(!u||u.object!=="fragment")return this;let c=a.getPath(s.key),l=a.getPath(u.key);return this.applyOperation(_.create({type:"remove_fragment",path:c,fragmentPath:l,node:u})),this.getFlag("normalize",n)&&(this.normalizeNodeByKey(s.key),i.isSet&&this.value.selection.isUnset&&this.normalizeSelection()),this}setTextByKey(e,r,n,o={}){let a=this.value.document.getDescendant(e);return this.replaceTextByKey(e,0,a.text.length,r,n,o),this}replaceTextByKey(e,r,n,o,a,i={}){let{document:s}=this.value,u=s.getDescendant(e);n+r>u.text.length&&(n=u.text.length-r);let c=oe.create({anchorKey:e,focusKey:e,anchorOffset:r,focusOffset:r+n}),l=s.getActiveMarksAtRange(c);this.removeTextByKey(e,r,n,{normalize:!1});let h=a?q.createSet(a):l;return l&&(l=l.filter(p=>!h.find(d=>p.type===d.type)),h=l.merge(h)),this.insertTextByKey(e,r,o,h,i),this}removeTextByKey(e,r,n,o={}){let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getNode(e),l=c.getLeaves(),{text:h}=c,p=[],d=r,y=r+n,g=0;if(l.forEach(O=>{let T=g,S=T+O.text.length;if(g+=O.text.length,S<d||y<T)return;let C=Math.max(T,d),I=Math.min(S,y),P=h.slice(C,I);p.push(_.create({type:"remove_text",path:u,offset:C,text:P,marks:O.marks}))}),this.applyOperations(p.reverse()),a){let O=s.getClosestBlock(e);this.normalizeNodeByKey(O.key)}return this}replaceNodeByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.assertNode(e),u=i.getParent(e);if(!u)throw new Error(`Parent not found for node "${e}"`);if(s.object==="fragment"){if(r.object!=="fragment")throw new Error("Replacing a fragment with a non-fragment is not allowed");this.removeFragmentByKey(e,{normalize:!1}),this.insertFragmentByKey(u.key,r,{normalize:!1})}else{let c=u.getChildIndex(s.key);this.removeNodeByKey(e,{normalize:!1}),this.insertNodeByKey(u.key,c,r,{normalize:!1})}return o&&this.normalizeNodeByKey(u.key),this}replaceWithDocumentByKey(e,r,n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getNode(e),u=i.getParent(e),c=u.getChildIndex(s.key);return this.removeNodeByKey(e,{normalize:!1}),this.insertDocumentByKey(u.key,c,r,{normalize:!1}),o&&this.normalizeNodeByKey(u.key),this}setMarkByKey(e,r,n,o,a,i={}){a=q.createProperties(a);let s=this.getFlag("normalize",i),{value:u}=this,{document:c}=u,l=c.getPath(e);if(this.applyOperation(_.create({type:"set_mark",path:l,offset:r,length:n,mark:q.create(o),properties:a})),s){let h=c.getParent(e);this.normalizeNodeByKey(h.key)}return this}setNodeByKey(e,r={},n={}){r=er(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getPath(e),u=i.getNode(e);return this.applyOperation(_.create({type:"set_node",path:s,node:u,properties:r})),o&&this.normalizeNodeByKey(u.key),this}splitNodeByKey(e,r,n={}){let{normalize:o=!0,target:a=null}=n,{value:i}=this,{document:s}=i,u=s.getPath(e),c=s.getDescendantAtPath(u),l=ne();if(this.applyOperation(_.create({type:"split_node",path:u,position:r,properties:{key:l,type:c.type,data:c.data},target:a})),o){let h=s.getParent(e);this.normalizeNodeByKey(h.key)}return this}splitDescendantsByKey(e,r,n,o={}){if(e===r)return this.splitNodeByKey(r,n,o),this;let a=this.getFlag("normalize",o),{value:i}=this,{document:s}=i,u=s.getNode(r),l=s.getAncestors(r).skipUntil(d=>d.key===e).reverse().unshift(u),h,p;if(l.forEach(d=>{let y=p==null?null:p;p=h?d.getChildIndex(h.key)+1:n,h=d,this.splitNodeByKey(d.key,p,{normalize:!1,target:y})}),a){let d=s.getParent(e);this.normalizeNodeByKey(d.key)}return this}unwrapInlineByKey(e,r={},n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.assertDescendant(e),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);return this.unwrapInlineAtRange(l,r,n),this}unwrapBlockByKey(e,r={},n={}){let{value:o}=this,{document:a,selection:i}=o,s=a.assertDescendant(e),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);return this.unwrapBlockAtRange(l,r,n),this}unwrapNodeByKey(e,r={}){let n=this.getFlag("normalize",r),{value:o}=this,{document:a}=o,i=a.getParent(e);if(!i||Ae.isFragment(i)||i.isBlock()&&i.hasFragment(e))return this;let s=i.getChild(e),u=i.getChildIndex(s.key),c=u===0,l=u===i.nodes.size-1,h=a.getParent(i.key),p=h.getChildIndex(i.key);return i.nodes.size===1?(this.moveNodeByKey(e,h.key,p,{normalize:!1}),this.removeNodeByKey(i.key,r)):c?this.moveNodeByKey(e,h.key,p,r):l?this.moveNodeByKey(e,h.key,p+1,r):(this.splitNodeByKey(i.key,u,{normalize:!1}),this.moveNodeByKey(e,h.key,p+1,{normalize:!1}),n&&this.normalizeNodeByKey(h.key)),this}wrapBlockByKey(e,r,n={}){let o=H.create(r);o=o.set("nodes",o.nodes.clear());let{document:a}=this.value,i=a.assertDescendant(e);if(i.object==="fragment")return this;let s=a.getParent(i.key),u=s.getChildIndex(i.key);return this.insertNodeByKey(s.key,u,o,{normalize:!1}),this.moveNodeByKey(i.key,o.key,0,n),this}wrapInlineByKey(e,r,n={}){let o=ae.create(r);o=o.set("nodes",o.nodes.clear());let{document:a}=this.value,i=a.assertDescendant(e),s=a.getParent(i.key),u=s.getChildIndex(i.key);return this.insertNodeByKey(s.key,u,o,{normalize:!1}),this.moveNodeByKey(i.key,o.key,0,n),this}addMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,startOffset:u,endKey:c,endOffset:l}=e;return i.getTextsAtRange(e).forEach(p=>{let{key:d}=p,y=0,{length:g}=p.text;d===s&&(y=u),d===c&&(g=l),d===s&&d===c&&(g=l-u),this.addMarkByKey(d,y,g,r,{normalize:o})}),this}addMarksAtRange(e,r,n={}){return r.forEach(o=>this.addMarkAtRange(e,o,n)),this}deleteAtRange(e,r={}){if(e.isCollapsed)return this;this.snapshotSelection();let n=this.getFlag("normalize",r),{value:o}=this,{startKey:a,startOffset:i,endKey:s,endOffset:u}=e,{document:c}=o,l=c.hasVoidParent(a),h=c.hasVoidParent(s),p=c.getClosestBlock(a),d=c.getClosestBlock(s),y=i===0&&u===0&&l===!1&&a===p.getFirstText().key&&s===d.getFirstText().key;if(y&&h){let g=c.getPreviousText(s);s=g.key,u=g.text.length,h=c.hasVoidParent(s)}for(;l;){let g=c.getClosestVoid(a),O=c.getNextText(a);if(this.removeNodeByKey(g.key,{normalize:!1}),a===s)return this;if(!O)return this;c=this.value.document,a=O.key,i=0,l=c.hasVoidParent(a)}for(;h;){let g=c.getClosestVoid(s),O=c.getPreviousText(s);this.removeNodeByKey(g.key,{normalize:!1}),c=this.value.document,s=O.key,u=O.text.length,h=c.hasVoidParent(s)}if(a===s&&y)this.removeNodeByKey(p.key,{normalize:n});else if(a===s){let g=i,O=u-i;this.removeTextByKey(a,g,O,{normalize:n})}else{p=c.getClosestBlock(a),d=c.getClosestBlock(s);let g=c.getNode(a),O=c.getNode(s),T=g.text.length-i,S=u,C=c.getCommonAncestor(a,s),I=C.getFurthestAncestor(a),P=C.getFurthestAncestor(s),$=c.getParent(p.key),E=$.getChildIndex(p.key),se=$.getChildIndex(d.key),V;for(V=g;V.key!==I.key;){let Ve=c.getParent(V.key),ta=Ve.getChildIndex(V.key);Ve.nodes.slice(ta+1).reverse().forEach(ra=>{this.removeNodeByKey(ra.key,{normalize:!1})}),V=Ve}let ye=C.getChildIndex(I.key),je=C.getChildIndex(P.key);for(C.nodes.slice(ye+1,je).reverse().forEach(Ve=>{this.removeNodeByKey(Ve.key,{normalize:!1})}),V=O;V.key!==P.key;){let Ve=c.getParent(V.key),ta=Ve.getChildIndex(V.key);Ve.nodes.slice(0,ta).reverse().forEach(ra=>{this.removeNodeByKey(ra.key,{normalize:!1})}),V=Ve}if(T!==0&&this.removeTextByKey(a,i,T,{normalize:!1}),S!==0&&this.removeTextByKey(s,0,u,{normalize:!1}),p.key!==d.key){c=this.value.document;let Ve=c.getFurthestOnlyChildAncestor(d.key);se!==E+1&&this.moveNodeByKey(d.key,$.key,E+1,{normalize:!1}),y?this.removeNodeByKey(p.key,{normalize:!1}):this.mergeNodeByKey(d.key,{normalize:!1}),Ve&&this.removeNodeByKey(Ve.key,{normalize:!1})}n&&this.normalizeNodeByKey(C.key)}return this}deleteCharBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Hc(l,c);return this.deleteBackwardAtRange(e,h,r),this}deleteLineBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,c=o.getClosestBlock(a).getOffset(a)+i;return this.deleteBackwardAtRange(e,c,r),this}deleteWordBackwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Yc(l,c);return this.deleteBackwardAtRange(e,h,r),this}deleteBackwardAtRange(e,r=1,n={}){if(r===0)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,focusOffset:u}=e;if(e.isExpanded)return this.deleteAtRange(e,{normalize:o}),this;let c=i.getClosestVoid(s);if(c)return this.removeNodeByKey(c.key,{normalize:o}),this;let l=i.getClosestBlock(s);if(l&&l.isEmpty&&i.nodes.size!==1)return this.removeNodeByKey(l.key,{normalize:o}),this;if(e.isAtStartOf(i))return this;let h=i.getDescendant(s);if(e.isAtStartOf(h)){let g=i.getPreviousText(h.key),O=i.getClosestBlock(g.key),T=i.getClosestVoid(g.key);if(T)return this.removeNodeByKey(T.key,{normalize:o}),this;if(r===1&&O!==l)return e=e.merge({anchorKey:g.key,anchorOffset:g.text.length}),this.deleteAtRange(e,{normalize:o}),this}if(r<u)return e=e.merge({focusOffset:u-r,isBackward:!0}),this.deleteAtRange(e,{normalize:o}),this;let p=h,d=0,y=u;for(;r>y;){p=i.getPreviousText(p.key);let g=y+p.text.length;if(r<=g){d=g-r;break}else y=g}return e=e.merge({focusKey:p.key,focusOffset:d,isBackward:!0}),this.deleteAtRange(e,{normalize:o}),this}deleteCharForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=$c(l,c);return this.deleteForwardAtRange(e,h,r),this}deleteLineForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i;return this.deleteForwardAtRange(e,s.text.length-c,r),this}deleteWordForwardAtRange(e,r={}){let{value:n}=this,{document:o}=n,{startKey:a,startOffset:i}=e,s=o.getClosestBlock(a),c=s.getOffset(a)+i,{text:l}=s,h=Wc(l,c);return this.deleteForwardAtRange(e,h,r),this}deleteForwardAtRange(e,r=1,n={}){if(r===0)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,{startKey:s,focusOffset:u}=e;if(e.isExpanded)return this.deleteAtRange(e,{normalize:o}),this;let c=i.getClosestVoid(s);if(c)return this.removeNodeByKey(c.key,{normalize:o}),this;let l=i.getClosestBlock(s);if(l&&l.isEmpty&&i.nodes.size!==1){let g=i.getNextBlock(l.key);return this.removeNodeByKey(l.key,{normalize:o}),g&&g.key&&this.moveToStartOf(g),this}if(e.isAtEndOf(i))return this;let h=i.getDescendant(s);if(e.isAtEndOf(h)){let g=i.getNextText(h.key),O=i.getClosestBlock(g.key),T=i.getClosestVoid(g.key);if(T)return this.removeNodeByKey(T.key,{normalize:o}),this;if(r===1&&O!==l)return e=e.merge({focusKey:g.key,focusOffset:0}),this.deleteAtRange(e,{normalize:o}),this}if(r<=h.text.length-u)return e=e.merge({focusOffset:u+r}),this.deleteAtRange(e,{normalize:o}),this;let p=h,d=u,y=h.text.length-u;for(;r>y;){p=i.getNextText(p.key);let g=y+p.text.length;if(r<=g){d=r-y;break}else y=g}if(i.hasVoidParent(p.key)){let g=i.getClosestVoid(p.key);p=i.getPreviousText(g.key),d=p.text.length}return e=e.merge({focusKey:p.key,focusOffset:d}),this.deleteAtRange(e,{normalize:o}),this}insertBlockAtRange(e,r,n={}){let o=H.create(r),a=this.getFlag("normalize",n);e.isExpanded&&(this.deleteAtRange(e),e=e.collapseToStart());let{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=s.getClosestBlock(u),h=s.getClosestInline(u),p=s.getParent(l.key),d=p.getChildIndex(l.key);if(l.isVoid){let y=e.isAtEndOf(l)?1:0;this.insertNodeByKey(p.key,d+y,o,{normalize:a})}else if(l.isEmpty)this.insertNodeByKey(p.key,d+1,o,{normalize:a});else if(e.isAtStartOf(l))this.insertNodeByKey(p.key,d,o,{normalize:a});else if(e.isAtEndOf(l))this.insertNodeByKey(p.key,d+1,o,{normalize:a});else{if(h&&h.isVoid){let y=e.isAtEndOf(h),g=y?s.getNextText(u):s.getPreviousText(u),O=y?e.moveToStartOf(g):e.moveToEndOf(g);u=O.startKey,c=O.startOffset}this.splitDescendantsByKey(l.key,u,c,{normalize:!1}),this.insertNodeByKey(p.key,d+1,o,{normalize:a})}return a&&this.normalizeNodeByKey(p.key),this}insertDocumentAtRange(e,r,n={}){let o=this.getFlag("normalize",n);if(e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),this.value.document.getDescendant(e.startKey)?e=e.collapseToStart():e=e.collapseTo(e.endKey,0)),!r.nodes.size)return this;r=r.regenerateAllKeys();let{startKey:a,startOffset:i}=e,{value:s}=this,{document:u}=s,c=u.getDescendant(a),l=u.getClosestBlock(c.key),h=l.getFurthestAncestor(c.key),p=e.isAtStartOf(l),d=u.getParent(l.key),y=d.getChildIndex(l.key),g=r.getLeafBlocks(),O=r.nodes.first(),T=r.nodes.last(),S=g.first(),C=g.last();if(S===C&&S.isVoid)return this.insertBlockAtRange(e,S,n),this;if(r.hasBlocks(O.key)||r.hasBlocks(T.key))return r.nodes.reverse().forEach(I=>{this.insertBlockAtRange(e,I,n)}),this;if(S!==C){let P=r.getFurthest(S.key,E=>E.nodes.size===1)||S,$=d.getChildIndex(l.key);r=r.removeDescendant(P.key),r.nodes.forEach((E,se)=>{let V=$+se+1;this.insertNodeByKey(d.key,V,E,{normalize:!1})})}if(i!==0&&this.splitDescendantsByKey(h.key,a,i,{normalize:!1}),u=this.value.document,c=u.getDescendant(a),l=u.getClosestBlock(a),h=l.getFurthestAncestor(c.key),S!==C){let I=p?h:l.getNextSibling(h.key),P=I?l.nodes.skipUntil(E=>E.key===I.key):N(),$=C.nodes.size;P.forEach((E,se)=>{let V=$+se;this.moveNodeByKey(E.key,C.key,V,{normalize:!1})})}if(l.isEmpty)this.removeNodeByKey(l.key,{normalize:!1}),this.insertNodeByKey(d.key,y,S,{normalize:!1}),this.insertNodeByKey(S.key,0,z.create(""),{normalize:!1});else{let I=l.getFurthestAncestor(c.key),P=l.getChildIndex(I.key);S.nodes.forEach(($,E)=>{let se=i===0?0:1,V=P+E+se;this.insertNodeByKey(l.key,V,$,{normalize:!1})})}return o&&this.normalizeNodeByKey(d.key),this}insertInlineAtRange(e,r,n={}){let o=this.getFlag("normalize",n),a=ae.create(r);e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),e=e.collapseToStart());let{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=s.getParent(u),h=s.assertDescendant(u),p=l.getChildIndex(h.key);return l.isVoid?this:(this.splitNodeByKey(u,c,{normalize:!1}),this.insertNodeByKey(l.key,p+1,a,{normalize:!1}),o&&this.normalizeNodeByKey(l.key),this)}insertTextAtRange(e,r,n,o={}){let{normalize:a}=o,{value:i}=this,{document:s}=i,{startKey:u,startOffset:c}=e,l=u,h=c;if(s.getParent(u).isVoid)return this;if(e.isExpanded&&(this.deleteAtRange(e,{normalize:!1}),this.value.startKey!==l&&(l=this.value.startKey,h=this.value.startOffset)),a===void 0&&(a=e.isExpanded&&n&&n.size!==0),this.insertTextByKey(l,h,r,n,{normalize:!1}),a){let d=s.getCommonAncestor(u,e.endKey),g=s.getAncestors(d.key).push(d).findLast(T=>this.value.document.getDescendant(T.key)),O=g?g.key:u;this.normalizeNodeByKey(O)}return this}removeMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getTextsAtRange(e),{startKey:u,startOffset:c,endKey:l,endOffset:h}=e;return s.forEach(p=>{let{key:d}=p,y=0,{length:g}=p.text;d===u&&(y=c),d===l&&(g=h),d===u&&d===l&&(g=h-c),this.removeMarkByKey(d,y,g,r,{normalize:o})}),this}setBlocksAtRange(e,r={},n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a,s=i.getBlocksAtRange(e),{startKey:u,startOffset:c,endKey:l,endOffset:h,isCollapsed:p}=e,d=i.hasVoidParent(u),y=i.getClosestBlock(u),g=i.getClosestBlock(l);return(p===!1&&c===0&&h===0&&d===!1&&u===y.getFirstText().key&&l===g.getFirstText().key?s.slice(0,-1):s).forEach(S=>{this.setNodeByKey(S.key,r,{normalize:o})}),this}setInlinesAtRange(e,r={},n={}){let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getInlinesAtRange(e).forEach(u=>{this.setNodeByKey(u.key,r,{normalize:o})}),this}splitBlockAtRange(e,r=1,n={}){let o=this.getFlag("normalize",n),{startKey:a,startOffset:i,endOffset:s,endKey:u}=e,{value:c}=this,{document:l}=c,h=l.assertDescendant(a),p=l.getClosestBlock(h.key),d=0;for(;p&&p.object==="block"&&d<r;)h=p,p=l.getClosestBlock(p.key),d++;if(this.splitDescendantsByKey(h.key,a,i,{normalize:o&&e.isCollapsed}),e.isExpanded){e.isBackward&&(e=e.flip());let y=this.value.document.getNextBlock(h.key);e=e.moveAnchorToStartOf(y),a===u&&(e=e.moveFocusTo(e.anchorKey,s-i)),this.deleteAtRange(e,{normalize:o})}return this}splitInlineAtRange(e,r=1/0,n={}){let o=this.getFlag("normalize",n);e.isExpanded&&(this.deleteAtRange(e,{normalize:o}),e=e.collapseToStart());let{startKey:a,startOffset:i}=e,{value:s}=this,{document:u}=s,c=u.assertDescendant(a),l=u.getClosestInline(c.key),h=0;for(;l&&l.object==="inline"&&h<r;)c=l,l=u.getClosestInline(l.key),h++;return this.splitDescendantsByKey(c.key,a,i,{normalize:o}),this}toggleMarkAtRange(e,r,n={}){if(e.isCollapsed)return this;r=q.create(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getActiveMarksAtRange(e).some(c=>c.equals(r))?this.removeMarkAtRange(e,r,{normalize:o}):this.addMarkAtRange(e,r,{normalize:o}),this}unwrapBlockAtRange(e,r={},n={}){r=er(r);let o=this.getFlag("normalize",n),a=this.value.document.getBlocksAtRange(e);return a.map(s=>this.value.document.getClosest(s.key,u=>!(u.object!=="block"||r.type!=null&&u.type!==r.type||r.isVoid!=null&&u.isVoid!==r.isVoid||r.data!=null&&!u.data.isSuperset(r.data)))).filter(s=>s).toOrderedSet().toList().forEach(s=>{let u=s.nodes.first(),c=s.nodes.last(),l=this.value.document.getParent(s.key),h=l.getChildIndex(s.key),p=s.nodes.filter(g=>a.some(O=>g===O||g.hasDescendant(O.key))),d=p.first(),y=p.last();if(u===d&&c===y)s.nodes.forEach((g,O)=>{this.moveNodeByKey(g.key,l.key,h+O,{normalize:!1})}),this.removeNodeByKey(s.key,{normalize:!1});else if(c===y)s.nodes.skipUntil(g=>g===d).forEach((g,O)=>{this.moveNodeByKey(g.key,l.key,h+1+O,{normalize:!1})});else if(u===d)s.nodes.takeUntil(g=>g===y).push(y).forEach((g,O)=>{this.moveNodeByKey(g.key,l.key,h+O,{normalize:!1})});else{let g=d.getFirstText();this.splitDescendantsByKey(s.key,g.key,0,{normalize:!1}),p.forEach((O,T)=>{if(T===0){let S=O;O=this.value.document.getNextBlock(O.key),this.removeNodeByKey(S.key,{normalize:!1})}this.moveNodeByKey(O.key,l.key,h+1+T,{normalize:!1})})}}),o&&this.normalizeDocument(),this}unwrapInlineAtRange(e,r={},n={}){r=er(r);let o=this.getFlag("normalize",n),{value:a}=this,{document:i}=a;return i.getTextsAtRange(e).map(c=>i.getClosest(c.key,l=>!(l.object!=="inline"||r.type!=null&&l.type!==r.type||r.isVoid!=null&&l.isVoid!==r.isVoid||r.data!=null&&!l.data.isSuperset(r.data)))).filter(c=>c).toOrderedSet().toList().forEach(c=>{let l=this.value.document.getParent(c.key),h=l.getChildIndex(c.key);c.nodes.forEach((p,d)=>{this.moveNodeByKey(p.key,l.key,h+d,{normalize:!1})})}),o&&this.normalizeDocument(),this}wrapBlockAtRange(e,r,n={}){let o=H.create(r);o=o.set("nodes",o.nodes.clear());let a=this.getFlag("normalize",n),{value:i}=this,{document:s}=i,u=s.getBlocksAtRange(e),c=u.first(),l=u.last(),h,p,d;if(u.length===1?(h=s.getParent(c.key),p=u):h=s.getClosest(c.key,y=>!!s.getClosest(l.key,g=>y===g)),h==null&&(h=s),p==null){let y=h.nodes.reduce((g,O,T)=>((O===c||O.hasDescendant(c.key))&&(g[0]=T),(O===l||O.hasDescendant(l.key))&&(g[1]=T),g),[]);d=y[0],p=h.nodes.slice(y[0],y[1]+1)}return d==null&&(d=h.nodes.indexOf(p.first())),this.insertNodeByKey(h.key,d,o,{normalize:!1}),p.forEach((y,g)=>{this.moveNodeByKey(y.key,o.key,g,{normalize:!1})}),a&&this.normalizeNodeByKey(h.key),this}wrapInlineAtRange(e,r,n={}){let{value:o}=this,{document:a}=o,i=this.getFlag("normalize",n),{startKey:s,startOffset:u,endKey:c,endOffset:l}=e;if(e.isCollapsed){let P=a.getClosestInline(s);return P.isVoid?this.wrapInlineByKey(P.key,r,n):void 0}let h=ae.create(r);h=h.set("nodes",h.nodes.clear());let p=a.getBlocksAtRange(e),d=a.getClosestBlock(s),y=a.getClosestBlock(c),g=a.getClosestInline(s),O=a.getClosestInline(c),T=d.getFurthestAncestor(s),S=y.getFurthestAncestor(c);(!g||g!==O)&&(this.splitDescendantsByKey(S.key,c,l,{normalize:!1}),this.splitDescendantsByKey(T.key,s,u,{normalize:!1})),a=this.value.document,d=a.getDescendant(d.key),y=a.getDescendant(y.key),T=d.getFurthestAncestor(s),S=y.getFurthestAncestor(c);let C=d.getChildIndex(T.key),I=y.getChildIndex(S.key);if(g&&g===O){let P=d.getTextsAtRange(e).get(0).splitText(u)[1].splitText(l-u)[0];h=h.set("nodes",N([P])),this.insertInlineAtRange(e,h,{normalize:!1});let $=h.getFirstText().key,E={anchorKey:$,focusKey:$,anchorOffset:0,focusOffset:l-u,isFocused:!0};this.select(E)}else if(d===y){a=this.value.document,d=a.getClosestBlock(s),T=d.getFurthestAncestor(s);let P=a.getNextSibling(T.key),$=d.getChildIndex(P.key),E=s===c?P:d.getFurthestAncestor(c),se=d.nodes.skipUntil(ye=>ye===P).takeUntil(ye=>ye===E).push(E),V=h.regenerateKey();this.insertNodeByKey(d.key,$,V,{normalize:!1}),se.forEach((ye,je)=>{this.moveNodeByKey(ye.key,V.key,je,{normalize:!1})}),i&&this.normalizeNodeByKey(d.key)}else{let P=d.nodes.slice(C+1),$=y.nodes.slice(0,I+1),E=h.regenerateKey(),se=h.regenerateKey();this.insertNodeByKey(d.key,C+1,E,{normalize:!1}),this.insertNodeByKey(y.key,I,se,{normalize:!1}),P.forEach((V,ye)=>{this.moveNodeByKey(V.key,E.key,ye,{normalize:!1})}),$.forEach((V,ye)=>{this.moveNodeByKey(V.key,se.key,ye,{normalize:!1})}),i&&this.normalizeNodeByKey(d.key).normalizeNodeByKey(y.key),p.slice(1,-1).forEach(V=>{let ye=h.regenerateKey();this.insertNodeByKey(V.key,0,ye,{normalize:!1}),V.nodes.forEach((je,En)=>{this.moveNodeByKey(je.key,ye.key,En,{normalize:!1})}),i&&this.normalizeNodeByKey(V.key)})}return this}wrapTextAtRange(e,r,n=r,o={}){let a=this.getFlag("normalize",o),{startKey:i,endKey:s}=e,u=e.collapseToStart(),c=e.collapseToEnd();return i===s&&(c=c.move(r.length)),this.insertTextAtRange(u,r,[],{normalize:a}),this.insertTextAtRange(c,n,[],{normalize:a}),this}addMark(e,r={}){let n=q.create(e),{value:o}=this,{document:a,selection:i}=o;if(i.isExpanded)this.addMarkAtRange(i,n,r);else if(i.marks){let s=i.marks.add(n),u=i.set("marks",s);this.select(u)}else{let s=a.getActiveMarksAtRange(i).add(n),u=i.set("marks",s);this.select(u)}return this}addMarks(e,r={}){return e.forEach(n=>this.addMark(n)),this}delete(e={}){let{value:r}=this,{selection:n}=r;return this.deleteAtRange(n,e),this.collapseToStart(),this}insertBlock(e,r={}){e=H.create(e);let{value:n}=this,{selection:o}=n;this.insertBlockAtRange(o,e,r);let a=this.value.document.getNode(e.key);return a&&this.collapseToEndOf(a),this}insertDocument(e,r={}){if(!e.nodes.size)return this;let{value:n}=this,{document:o}=n,{selection:a}=n,{startText:i,endText:s,startInline:u}=n,c=e.getLastText(),l=e.getClosestInline(c.key),h=e.nodes.first(),p=e.nodes.last(),d=o.getTexts().map(S=>S.key),y=!u||a.hasEdgeAtStartOf(i)||a.hasEdgeAtEndOf(s),g=e.hasBlocks(h.key)||e.hasBlocks(p.key);this.insertDocumentAtRange(a,e,r),n=this.value,o=n.document;let O=o.getTexts().filter(S=>!d.includes(S.key)),T=y?O.last():O.takeLast(2).first();return T&&(l||g)?this.select(a.collapseToEndOf(T)):T?this.select(a.collapseToStartOf(T).move(c.text.length)):this.select(a.collapseToStart().move(c.text.length)),this}insertInline(e,r={}){e=ae.create(e);let{value:n}=this,{selection:o}=n;this.insertInlineAtRange(o,e,r);let a=this.value.document.getNode(e.key);return a&&this.collapseToEndOf(a),this}insertText(e,r,n={}){let{value:o}=this,{document:a,selection:i}=o;return r=r||i.marks||a.getInsertMarksAtRange(i),this.insertTextAtRange(i,e,r,n),i.marks&&a!==this.value.document&&this.select({marks:null}),this}splitBlock(e=1,r={}){let{value:n}=this,{selection:o,document:a}=n,i=o.marks||a.getInsertMarksAtRange(o);return this.splitBlockAtRange(o,e,r).collapseToEnd(),i&&i.size!==0&&this.select({marks:i}),this}removeAllMarks(){let{value:e}=this;return e.activeMarks.forEach(r=>{this.removeMark(r)}),this}removeMark(e,r={}){let n=q.create(e),{value:o}=this,{document:a,selection:i}=o;if(i.isExpanded)this.removeMarkAtRange(i,n,r);else if(i.marks){let s=i.marks.remove(n),u=i.set("marks",s);this.select(u)}else{let s=a.getActiveMarksAtRange(i).remove(n),u=i.set("marks",s);this.select(u)}return this}replaceMark(e,r,n={}){return this.removeMark(e,n),this.addMark(r,n),this}toggleMark(e,r={}){let n=q.create(e),{value:o}=this;return o.activeMarks.has(n)?this.removeMark(n,r):this.addMark(n,r),this}wrapText(e,r=e,n={}){let{value:o}=this,{selection:a}=o;return this.wrapTextAtRange(a,e,r,n),a.isCollapsed&&this.moveStart(0-e.length),this.moveEnd(0-r.length),a.isForward!==this.value.selection.isForward&&this.flip(),this}normalize(){return this.normalizeDocument(),this}normalizeDocument(){let{value:e}=this,{document:r}=e;return this.normalizeNodeByKey(r.key),this}normalizeSelection(){let{value:e}=this,{selection:r,document:n}=e;return r.isSet?this.select(r.normalize(n)):n.nodes.size>0&&(this.collapseToStartOf(n),r.isFocused&&this.value.selection.isSet&&this.focus()),this}normalizeNodeByKey(e){let{value:r}=this,{schema:n}=r,{document:o}=r,a=o.assertNode(e);this.normalizeNodeAndChildren(a,n),o=this.value.document;let i=o.getAncestors(e);return i?(i.forEach(s=>{let u=this.value.document.getDescendant(s.key);u&&this.normalizeNode(u,n)}),this):this}normalizeNodeAndChildren(e,r){if(e.object==="text"){this.normalizeNode(e,r);return}let n=r.getFirstInvalidNode(e),o=this.value.document.getPath(e.key);for(;e&&n;)this.normalizeNodeAndChildren(n,r),e=this.value.document.refindNode(o,e.key),e?(o=this.value.document.refindPath(o,e.key),n=r.getFirstInvalidNode(e)):(o=[],n=null);e&&this.normalizeNode(e,r)}normalizeNode(e,r){let n=Math.max(e.object==="text"?1:e.nodes.size,1)*(r.validations.length+1),o=0,a=i=>{let s=r.validateNode(i);if(!s)return;let u=this.value.document.getPath(i.key);if(!!u&&(s(this),i=this.value.document.refindNode(u,i.key),!!i)){if(u=this.value.document.refindPath(u,i.key),o+=1,o>n)throw new Error(`A schema rule could not be validated after sufficient iterations for ${e.object}#${e.type||""}. This is usually due to a 'rule.validate' or 'rule.normalize' function of a schema being incorrectly written, causing an infinite loop.`);a(i)}};a(e)}};_e.logger=Eo,_e.isChange=Oe.bind(null,"CHANGE");["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlocks","setInlines","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"].forEach(t=>{_e.prototype[t]=function(...e){let{value:r}=this,{selection:n}=r,o=`${t}AtRange`;return this[o](n,...e),t.match(/Backward$/)?this.collapseToStart():t.match(/Forward$/)&&this.collapseToEnd(),this}});["Forward","Backward"].forEach(t=>{let e=`moveAnchorChar${t}`,r=`moveFocusChar${t}`;_e.prototype[`moveChar${t}`]=function(){return this[e](),this[r](),this},_e.prototype[`moveStartChar${t}`]=function(){return this.value.isBackward?this[r]():this[e](),this},_e.prototype[`moveEndChar${t}`]=function(){return this.value.isBackward?this[e]():this[r](),this},_e.prototype[`extendChar${t}`]=function(){return this[`moveFocusChar${t}`](),this},_e.prototype[`collapseChar${t}`]=function(){return this[t==="Forward"?"collapseToEnd":"collapseToStart"](),this[`moveChar${t}`](),this}});[["collapseLineBackward","collapseToStartOfBlock"],["collapseLineForward","collapseToEndOfBlock"],["extendLineBackward","extendToStartOfBlock"],["extendLineForward","extendToEndOfBlock"]].forEach(([t,e])=>{_e.prototype[t]=function(...r){return this[e](...r),this}});["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"].forEach(t=>{_e.prototype[t]=function(...e){let r=t!=="deselect",{value:n}=this,{document:o,selection:a}=n,i=a[t](...e);return r&&(i=i.normalize(o)),this.select(i),this}});["moveTo","moveAnchorTo","moveFocusTo","moveStartTo","moveEndTo","collapseTo","extendTo"].forEach(t=>{let e=["Start","End"],r=["Next","Previous"],n=["Block","Inline","Text"];t==="moveTo"&&e.push("Range"),e.forEach(o=>{let a=`${t}${o}Of`;n.forEach(i=>{let s=i==="Text"?"getNode":`getClosest${i}`;_e.prototype[`${a}${i}`]=function(){let{value:u}=this,{document:c,selection:l}=u,h=c[s](l.startKey);return h?(this[a](h),this):this},r.forEach(u=>{let c=`get${u}${i}`,l=u==="Next"?"startKey":"endKey";_e.prototype[`${a}${u}${i}`]=function(){let{value:h}=this,{document:p,selection:d}=h,y=p[s](d[l]);if(!y)return this;let g=p[c](y.key);return g?(this[a](g),this):this}})})})});_e.prototype[U.CHANGE]=!0;f();function gb(t,e){let r=t.nodes.filter(e);if(!!r.size)return n=>{r.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}}var gs=De.create({validations:[t=>{if(t.object==="document")return gb(t,e=>e.object!=="block")},t=>{if(t.object!=="block")return;let e=t.nodes.first();if(!e)return;let r=e.object==="block"?["block"]:["inline","text"],n=t.nodes.filter(o=>!r.includes(o.object));if(!!n.size)return o=>{n.forEach(a=>{o.removeNodeByKey(a.key,{normalize:!1})})}},t=>{if(t.object!=="inline")return;let e=t.nodes.filter(r=>r.object!=="inline"&&r.object!=="text");if(!!e.size)return r=>{e.forEach(n=>{r.removeNodeByKey(n.key,{normalize:!1})})}},t=>{if(!(t.object!=="block"&&t.object!=="inline")&&!(t.nodes.size>0))return e=>{let r=z.create();e.insertNodeByKey(t.key,0,r,{normalize:!1})}},t=>{if(t.object!=="inline"&&t.object!=="block")return;let e=t.nodes.filter(r=>r.object==="inline"&&r.isEmpty);if(!!e.size)return r=>{if(t.nodes.size===e.size){let n=z.create();r.insertNodeByKey(t.key,1,n,{normalize:!1})}e.forEach(n=>{r.removeNodeByKey(n.key,{normalize:!1})})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let e=t.nodes.reduce((r,n,o)=>{if(n.object!=="inline")return r;let a=o>0?t.nodes.get(o-1):null,i=t.nodes.get(o+1),s=!a,u=!i||i.object==="inline";return(u||s)&&(r=r.push({insertAfter:u,insertBefore:s,index:o})),r},new N);if(!!e.size)return r=>{let n=0;e.forEach(({index:o,insertAfter:a,insertBefore:i})=>{i&&(r.insertNodeByKey(t.key,n+o,z.create(),{normalize:!1}),n++),a&&(r.insertNodeByKey(t.key,n+o+1,z.create(),{normalize:!1}),n++)})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let e=t.nodes.map((r,n)=>{let o=t.nodes.get(n+1);if(r.object==="text"&&!(!o||o.object!=="text"))return o}).filter(Boolean);if(!!e.size)return r=>{e.reverse().forEach(n=>{r.mergeNodeByKey(n.key,{normalize:!1})})}},t=>{if(t.object!=="block"&&t.object!=="inline")return;let{nodes:e}=t;if(e.size<=1)return;let r=e.filter((n,o)=>{if(n.object!=="text"||n.text.length>0)return;let a=o>0?e.get(o-1):null,i=e.get(o+1);if(!(!a&&i.object==="inline")&&!(!i&&a.object==="inline")&&!(i&&a&&i.object==="inline"&&a.object==="inline"))return!0});if(!!r.size)return n=>{r.forEach(o=>{n.removeNodeByKey(o.key,{normalize:!1})})}},t=>{if(t.object==="fragment")return gb(t,e=>e.object!=="block")},t=>{if(t.object==="fragment"&&!(t.nodes.size>0))return e=>{e.removeNodeByKey(t.key)}}]});var Ft=class extends M({data:ee.create(),document:ge.create(),history:wt.create(),schema:De.create(),selection:oe.create(),decorations:F()}){get object(){return"value"}get hasUndos(){return this.history.undos.size>0}get hasRedos(){return this.history.redos.size>0}get isBlurred(){return this.selection.isBlurred}get isFocused(){return this.selection.isFocused}get isCollapsed(){return this.selection.isCollapsed}get isExpanded(){return this.selection.isExpanded}get isBackward(){return this.selection.isBackward}get isForward(){return this.selection.isForward}get startKey(){return this.selection.startKey}get endKey(){return this.selection.endKey}get startOffset(){return this.selection.startOffset}get endOffset(){return this.selection.endOffset}get anchorKey(){return this.selection.anchorKey}get focusKey(){return this.selection.focusKey}get anchorOffset(){return this.selection.anchorOffset}get focusOffset(){return this.selection.focusOffset}get startBlock(){return this.startKey&&this.document.getClosestBlock(this.startKey)}get endBlock(){return this.endKey&&this.document.getClosestBlock(this.endKey)}get anchorBlock(){return this.anchorKey&&this.document.getClosestBlock(this.anchorKey)}get focusBlock(){return this.focusKey&&this.document.getClosestBlock(this.focusKey)}get startInline(){return this.startKey&&this.document.getClosestInline(this.startKey)}get endInline(){return this.endKey&&this.document.getClosestInline(this.endKey)}get anchorInline(){return this.anchorKey&&this.document.getClosestInline(this.anchorKey)}get focusInline(){return this.focusKey&&this.document.getClosestInline(this.focusKey)}get startText(){let r=this.startKey&&this.document.getDescendant(this.startKey);return r?Qt(r):null}get endText(){let r=this.endKey&&this.document.getDescendant(this.endKey);return r?Qt(r):null}get anchorText(){let r=this.anchorKey&&this.document.getDescendant(this.anchorKey);return r?Qt(r):null}get focusText(){let r=this.focusKey&&this.document.getDescendant(this.focusKey);return r?Qt(r):null}get nextBlock(){let r=this.endKey&&this.document.getNextBlock(this.endKey);return r?Qt(r):null}get previousBlock(){let r=this.startKey&&this.document.getPreviousBlock(this.startKey);return r?Qt(r):null}get nextText(){return this.endKey&&this.document.getNextText(this.endKey)}get previousText(){return this.startKey&&this.document.getPreviousText(this.startKey)}get marks(){return this.selection.isUnset?F():this.selection.marks||this.document.getMarksAtRange(this.selection)}get activeMarks(){return this.selection.isUnset?F():this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}get blocks(){return this.selection.isUnset?N():this.document.getBlocksAtRange(this.selection)}get fragment(){return this.selection.isUnset?ge.create():this.document.getFragmentAtRange(this.selection)}get inlines(){return this.selection.isUnset?N():this.document.getInlinesAtRange(this.selection)}get texts(){return this.selection.isUnset?N():this.document.getTextsAtRange(this.selection)}get isEmpty(){return this.isCollapsed?!0:this.endOffset!==0&&this.startOffset!==0?!1:this.fragment.isEmpty}get isInVoid(){return this.selection.isUnset||this.isExpanded?!1:this.document.hasVoidParent(this.startKey)}static create(r={},n={}){if(Ft.isValue(r))return r;let{data:o={},document:a=ge.create(),selection:i=oe.create(),schema:s=De.create(),history:u=wt.create()}=r,c=ee.create(o);if(i.isUnset){let h=a.getFirstText();h&&(i=i.collapseToStartOf(h))}let l=new Ft({data:c,document:a,selection:i,schema:gs.combineWith(s),history:u});return n.normalize!==!1&&(l=l.change({save:!1}).normalize().value),l}static isValue(r){return!!(r&&r[U.VALUE])}change(r={}){return new _e(k(x({},r),{value:this}))}setSchema(r){return this.merge({schema:gs.combineWith(r)})}hasInline(r){return this.inlines.some(n=>n.type===r)}hasBlock(r){return this.blocks.some(n=>n.type===r)}};Ft.prototype[U.VALUE]=!0;function xe(t){switch(t.object||t.kind){case"mark":return q.create({type:t.type,data:t.data});case"leaf":return B.create({text:t.text,marks:t.marks.map(e=>xe(e))});case"text":return z.create(k(x({},t),{leaves:t.leaves?t.leaves.map(e=>xe(e)):t.ranges.map(e=>xe(k(x({},e),{kind:"leaf"})))}));case"inline":return ae.create(k(x({},t),{nodes:t.nodes.map(e=>xe(e))}));case"fragment":return Ae.create(k(x({},t),{nodes:t.nodes.map(e=>xe(e))}));case"block":return H.create(k(x({},t),{fragments:t.fragments?t.fragments.map(e=>xe(e)):[],nodes:t.nodes.map(e=>xe(e))}));case"document":return ge.create(k(x({},t),{nodes:t.nodes.map(e=>xe(e))}));case"range":return oe.create(t);case"value":return Ft.create({document:xe(t.document),data:ee.create(t.data||{}),selection:t.selection?xe(t.selection):void 0});case"operation":return tB(t);default:Yt(t)}}function pe(t,e){if(N.isList(t)||F.isSet(t))return t.toArray().map(r=>pe(r,e));switch(t.object){case"mark":return{object:t.object,type:t.type,data:t.data.toJS()};case"leaf":return{object:t.object,text:t.text,marks:t.marks.toArray().map(r=>pe(r)),selections:t.selections.toArray().map(r=>pe(r))};case"text":return x({object:t.object,leaves:t.getLeaves().toArray().map(r=>pe(r))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"inline":return x({object:t.object,type:t.type,isVoid:t.isVoid,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"fragment":return x(x(x({object:t.object,nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragment&&{fragment:t.fragment}),t.type&&{type:t.type});case"block":return x(x({object:t.object,type:t.type,isVoid:t.isVoid,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragments.size?{fragments:t.fragments.toArray().map(([r,n])=>pe(n,e))}:{});case"document":return x({object:t.object,data:t.data.toJS(),nodes:t.nodes.toArray().map(r=>pe(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key});case"range":return{object:t.object,anchorKey:t.anchorKey,anchorOffset:t.anchorOffset,focusKey:t.focusKey,focusOffset:t.focusOffset,isBackward:t.isBackward,isFocused:t.isFocused,isAtomic:t.isAtomic,marks:t.marks==null?null:t.marks.toArray().map(r=>pe(r)),data:t.data.toJS()};case"value":return QD(t,e);case"operation":return eB(t,e);default:Yt(t)}}function QD(t,e){let r=x({object:t.object,document:pe(t.document,e)},(e==null?void 0:e.preserveDataValue)&&{data:t.data.toJS()});if((e==null?void 0:e.preserveSelection)&&!(e!=null&&e.preserveKeys)){let{document:n,selection:o}=t;r.selection=pe(t.selection),r.selection.anchorPath=o.isSet?n.getPath(o.anchorKey):null,r.selection.focusPath=o.isSet?n.getPath(o.focusKey):null,delete r.selection.anchorKey,delete r.selection.focusKey}return r}function eB(t,e){switch(t.type){case"insert_text":case"remove_text":return{object:"operation",type:t.type,path:t.path,offset:t.offset,text:t.text,marks:t.marks.toArray().map(r=>pe(r,e))};case"add_mark":case"remove_mark":return{object:"operation",type:t.type,path:t.path,offset:t.offset,length:t.length,mark:pe(t.mark,e)};case"set_mark":return{object:"operation",type:t.type,path:t.path,offset:t.offset,length:t.length,mark:pe(t.mark,e),properties:t.properties};case"insert_node":case"remove_node":return{object:"operation",type:t.type,path:t.path,node:pe(t.node,e)};case"move_node":return{object:"operation",type:t.type,path:t.path,newPath:t.newPath};case"merge_node":case"split_node":return{object:"operation",type:t.type,path:t.path,position:t.position,properties:t.properties,target:t.target};case"set_node":return{object:"operation",type:t.type,path:t.path,node:pe(t.node,e),properties:t.properties};case"insert_fragment":case"set_fragment":case"remove_fragment":return k(x({object:"operation",type:t.type,path:t.path},t.fragmentPath?{fragmentPath:t.fragmentPath}:{}),{node:pe(t.node,e)});case"set_value_data":return{object:"operation",type:t.type,data:t.data.toJS(),previousData:t.previousData.toJS()};case"insert_data":case"remove_data":return{object:"operation",type:t.type,path:t.path,dataPath:t.dataPath,data:t.data};case"insert_array_data":case"remove_array_data":return{object:"operation",type:t.type,path:t.path,dataPath:t.dataPath,data:t.data,dataIndex:t.dataIndex};case"set_selection":return{object:"operation",type:t.type,selection:pe(t.selection),properties:t.properties};case"set_document":return{object:"operation",type:t.type,data:pe(t.data)};default:Yt(t)}}function tB(t){switch(t.type){case"insert_text":case"remove_text":return _.create({type:t.type,path:t.path,offset:t.offset,text:t.text,marks:q.createSet(t.marks.map(e=>xe(e)))});case"add_mark":case"remove_mark":return _.create({type:t.type,path:t.path,offset:t.offset,length:t.length,mark:xe(t.mark)});case"set_mark":return _.create({type:t.type,path:t.path,offset:t.offset,length:t.length,mark:xe(t.mark),properties:t.properties});case"insert_node":case"remove_node":return _.create({type:t.type,path:t.path,node:xe(t.node)});case"move_node":return _.create({type:t.type,path:t.path,newPath:t.newPath});case"merge_node":case"split_node":return _.create({type:t.type,path:t.path,position:t.position,properties:t.properties,target:t.target});case"set_node":return _.create({type:t.type,path:t.path,node:xe(t.node),properties:t.properties});case"insert_fragment":case"set_fragment":case"remove_fragment":return _.create(k(x({type:t.type,path:t.path},t.fragmentPath?{fragmentPath:t.fragmentPath}:{}),{node:xe(t.node)}));case"set_value_data":return _.create({type:t.type,data:ee.create(t.data),previousData:ee.create(t.previousData)});case"insert_data":case"remove_data":return _.create({type:t.type,path:t.path,dataPath:t.dataPath,data:t.data});case"insert_array_data":case"remove_array_data":return _.create({type:t.type,path:t.path,dataPath:t.dataPath,data:t.data,dataIndex:t.dataIndex});case"set_selection":return _.create({type:t.type,selection:xe(t.selection),properties:t.properties});case"set_document":return _.create({type:t.type,data:xe(t.data)});default:Yt(t)}}f();var uk=me(kr());f();var ak=me(tk());f();var UB={slate:{nested:{Document:{fields:{key:{type:"string",id:1},nodes:{rule:"repeated",type:"slate.Block",id:2},data:{keyType:"string",type:"string",id:3}}},Block:{fields:{key:{type:"string",id:1},type:{type:"string",id:2},nodes:{rule:"repeated",type:"slate.Node",id:3},fragments:{rule:"repeated",type:"slate.Fragment",id:4},data:{keyType:"string",type:"string",id:5},isVoid:{type:"bool",id:6}}},Node:{oneofs:{node:{oneof:["inline","text","block"]}},fields:{inline:{type:"slate.Inline",id:1},text:{type:"slate.Text",id:2},block:{type:"slate.Block",id:3}}},Fragment:{fields:{key:{type:"string",id:1},fragment:{type:"string",id:2},type:{type:"string",id:3},nodes:{rule:"repeated",type:"slate.Block",id:4}}},Inline:{fields:{key:{type:"string",id:1},type:{type:"string",id:2},nodes:{rule:"repeated",type:"slate.Node",id:3},data:{keyType:"string",type:"string",id:4},isVoid:{type:"bool",id:6}}},Text:{fields:{key:{type:"string",id:1},leaves:{rule:"repeated",type:"slate.TextLeaf",id:2}}},TextLeaf:{fields:{text:{type:"string",id:1},marks:{rule:"repeated",type:"slate.Mark",id:2}}},Mark:{fields:{type:{type:"string",id:1},data:{keyType:"string",type:"string",id:2}}}}}},nk={nested:UB};var ok=nk;var HB=ak.Root.fromJSON(ok),Zo=HB.lookupType("slate.Document");function N4(t,e={}){let r=$B(t,e),n=Zo.verify(r);if(n)throw new Error(`ProtoBufObject document is not valid: ${n}`);let o=Zo.create(r);return Zo.encode(o).finish()}function A4(t){let r=Zo.decode(t).toJSON();return ZB(r)}function $B(t,e){return k(x({},e.preserveKeys?{key:t.key}:{}),{nodes:t.nodes.map(r=>fu(r,e)).toArray(),data:Qo(t.data)})}function GB(t,e){return x(x(x({nodes:t.nodes.toArray().map(r=>fu(r,e))},(e==null?void 0:e.preserveKeys)&&{key:t.key}),t.fragment&&{fragment:t.fragment}),t.type&&{type:t.type})}function fu(t,e){return k(x({},e.preserveKeys?{key:t.key}:{}),{type:t.type,isVoid:t.isVoid,nodes:t.nodes.map(r=>ik(r,e)).toArray(),fragments:t.fragments.map(r=>GB(r,e)).valueSeq().toArray(),data:Qo(t.data)})}function YB(t,e){return k(x({},e.preserveKeys?{key:t.key}:{}),{type:t.type,isVoid:t.isVoid,nodes:t.nodes.map(r=>ik(r,e)).toArray(),data:Qo(t.data)})}function WB(t,e){return k(x({},e.preserveKeys?{key:t.key}:{}),{leaves:t.leaves.map(r=>XB(r)).toArray()})}function XB(t){return{text:t.text,marks:t.marks.map(e=>({type:e.type,data:Qo(e.data)})).toArray()}}function ik(t,e){switch(t.object){case"block":return{block:fu(t,e)};case"text":return{text:WB(t,e)};case"inline":return{inline:YB(t,e)};default:Yt(t)}}function Qo(t){return t.filter(e=>e!==void 0).map((e,r)=>JSON.stringify(e)).toObject()}function ZB(t){return ge.create({key:t.key,nodes:(t.nodes||[]).map(e=>lu(e)),data:ea(t.data||{})})}function lu(t){return H.create({key:t.key,type:t.type,isVoid:t.isVoid,nodes:(t.nodes||[]).map(e=>sk(e)),fragments:(t.fragments||[]).map(e=>rq(e)),data:ea(t.data||{})})}function QB(t){return ae.create({key:t.key,type:t.type,isVoid:t.isVoid,nodes:(t.nodes||[]).map(e=>sk(e)),data:ea(t.data||{})})}function eq(t){return z.create({key:t.key,leaves:(t.leaves||[]).map(e=>tq(e))})}function sk(t){if("block"in t)return lu(t.block);if("inline"in t)return QB(t.inline);if("text"in t)return eq(t.text);throw new Error("Unrecognized node type")}function tq(t){return B.create({text:t.text,marks:(t.marks||[]).map(e=>q.create({type:e.type,data:ea(e.data||{})}))})}function rq(t){return Ae.create({key:t.key,fragment:t.fragment,nodes:(t.nodes||[]).map(e=>lu(e)),type:t.type})}function ea(t){return ee.create(Object.keys(t).map(e=>{let r=t[e],n=JSON.parse(r);return[e,n]}))}export{we as a,N as b,M as c,nq as d,kr as e,Ga as f,ne as g,ee as h,Wn as i,q as j,oe as k,B as l,z as m,H as n,gf as o,Ae as p,ae as q,_ as r,ge as s,Vi as t,Ji as u,Ui as v,Gi as w,Xi as x,es as y,ns as z,os as A,is as B,De as C,Ft as D,xe as E,pe as F,N4 as G,A4 as H};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! https://mths.be/esrever v0.2.0 by @mathias */
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-ZGKCDLWL.min.js.map
