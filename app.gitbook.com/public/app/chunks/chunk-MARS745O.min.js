import{a as Gn}from"https://app.gitbook.com/public/app/chunks/chunk-SQMAY5AM.min.js";import{a as Gs}from"https://app.gitbook.com/public/app/chunks/chunk-MGXHCZSG.min.js";import{b as $s}from"https://app.gitbook.com/public/app/chunks/chunk-LVTVTWXC.min.js";import{$ as $a,$b as Tr,$c as Cl,$d as Ul,A as Na,Ab as Vn,Ac as Ie,Ad as Dl,B as Xt,Ba as es,Bb as Bs,Bc as Si,Bd as Ll,C as Be,Ca as kt,Cb as js,Cc as qn,Cd as Ml,Db as Ws,Dc as il,Dd as Al,E as mr,Ec as Xn,Ed as Nl,Fb as zn,Fc as $n,Fd as Vl,Ga as ts,Gc as A,Gd as Jn,H as Va,Ha as rs,Hc as al,Hd as xr,I as za,Ia as ns,Ib as mt,Ic as sl,Id as Mt,J as Ha,Ja as is,K as Ba,Ka as xn,Kb as Et,Kc as ll,La as as,Lc as cl,Ma as ss,Md as zl,N as xt,Na as ie,Nb as Hn,Nc as ul,Nd as Ue,Oa as ls,Oc as dl,P as gr,Pa as yi,Pb as wr,Pc as pl,Qa as ds,Qb as Bn,Qc as fl,R as pi,Ra as ps,Rb as Fs,S as ja,Sa as hs,Sb as bi,Sc as ml,T as Wa,Ta as ys,Tc as gl,Td as Hl,U as Fa,Ua as M,Uc as hl,Ud as Bl,V as fi,Vc as yl,Vd as Ti,W as mi,Wc as vl,X as Ua,Xb as jn,Xc as bl,Xd as Zr,Y as Ga,Ya as Qt,Yc as Sl,Yd as jl,Z as qa,Zc as wl,Zd as Wl,_ as Xa,_c as Tl,_d as Fl,a as pr,aa as gi,ab as Rs,ac as _t,ad as Pl,ae as Zn,ba as Ya,bb as Os,bd as Rl,be as Gl,c as ka,ca as Ka,cc as Us,cd as te,d as Xr,dc as Kr,dd as Lt,e as Ia,ec as Wn,ed as Ol,f as Ea,fc as qs,fd as Fe,g as _a,gc as Qr,gd as Yn,hb as xs,hc as Xs,hd as wi,he,id as ht,ie as ql,j as Da,jb as ks,jc as gt,jd as Zt,kb as Es,kc as Ys,kd as Kn,ke as Xl,lb as Ls,lc as Ks,ld as xl,le as $l,mb as Mn,mc as Fn,md as kl,me as Yl,nb as It,nc as Qs,ne as Ci,oa as Qa,oc as Js,od as er,oe as en,p as La,pa as Ja,pb as An,pc as Zs,pd as Jr,pe as Kl,q as Pn,qa as Za,qb as Nn,qc as Cr,r as Ma,ra as Rn,rb as Ms,rc as el,rd as Il,sc as Dt,tc as tl,td as Tt,ub as As,uc as rl,ud as Or,vc as Un,wc as nl,wd as Ee,xa as hi,xb as Vs,xc as Pr,xd as El,y as qt,yb as Sr,yc as Rr,yd as Qn,z as Aa,zb as Hs,zc as ol,zd as _l}from"https://app.gitbook.com/public/app/chunks/chunk-IC6NWSYA.min.js";import{f as Jt,g as zs}from"https://app.gitbook.com/public/app/chunks/chunk-OCT36YOL.min.js";import{A as Ln,C as Cs,D as Wp,I as Ps,J as br,K as Is,M as _s,O as Ds,R as ee,S as Ns,b as je,g as gs,h as En,i as jp,l as _n,o as oe,p as vs,q as bs,r as St,s as Yr,t as Ss,u as pt,v as ke,w as ft,y as Dn}from"https://app.gitbook.com/public/app/chunks/chunk-YJEDIBES.min.js";import{b as On,c as os,g as $r,h as xe,i as hr,n as Kt,p as fs,q as ms,r as vr,s as P,t as In,v as ve,w as vi,x as $,y as D}from"https://app.gitbook.com/public/app/chunks/chunk-I42ZVWTA.min.js";import{a as ws,d as wt,e as We,g as R,h as Ts}from"https://app.gitbook.com/public/app/chunks/chunk-QZEM46FP.min.js";import{A as G,C as Gt,H as dt,J as xa,L as ui,N as di,O as W,P as $t,Q as T,R as d,S as f,T as cs,V as us,Y as Yt,Z as kn,_ as yr,h as ge,k as w,l as Ra,m as zp,q as m,s as Ot,t as Hp,z as Oa}from"https://app.gitbook.com/public/app/chunks/chunk-OQEUZTXC.min.js";import{a as Vp}from"https://app.gitbook.com/public/app/chunks/chunk-ICYT6H5B.min.js";import{a as Cn}from"https://app.gitbook.com/public/app/chunks/chunk-HSIP75N4.min.js";import{a as fr,b as Ce,c as Bp}from"https://app.gitbook.com/public/app/chunks/chunk-7JB2LWEG.min.js";import{a as g,b as k,e as dr,g as ut,i as S,j as ci,l as s}from"https://app.gitbook.com/public/app/chunks/chunk-57DNK6NM.min.js";var kc=ut(on=>{"use strict";s();Vp();var Cf=w(),Oc=60103;on.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(Li=Symbol.for,Oc=Li("react.element"),on.Fragment=Li("react.fragment"));var Li,Pf=Cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rf=Object.prototype.hasOwnProperty,Of={key:!0,ref:!0,__self:!0,__source:!0};function xc(t,r,e){var n,o={},i=null,a=null;e!==void 0&&(i=""+e),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(a=r.ref);for(n in r)Rf.call(r,n)&&!Of.hasOwnProperty(n)&&(o[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)o[n]===void 0&&(o[n]=r[n]);return{$$typeof:Oc,type:t,key:i,ref:a,props:o,_owner:Pf.current}}on.jsx=xc;on.jsxs=xc});var Ec=ut((Ob,Ic)=>{"use strict";s();Ic.exports=kc()});var pd=ut(Zi=>{"use strict";s();Object.defineProperty(Zi,"__esModule",{value:!0});var mg={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};Zi.default={container:mg}});var fd=ut(Vo=>{"use strict";s();Object.defineProperty(Vo,"__esModule",{value:!0});var gg=function(){function t(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.minScale=.6,this.maxScale=10,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){}}return t}();Vo.Props=gg;var hg=function(){function t(){this.centerX=.5,this.centerY=.5}return t}();Vo.State=hg});var gd=ut(or=>{"use strict";s();var yg=or&&or.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vg=or&&or.__assign||Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};Object.defineProperty(or,"__esModule",{value:!0});var zo=w(),le=(W(),ci(di)),bg=pd(),md=fd(),Sg=function(t){yg(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new md.State,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new le.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new le.Animated.Value(0),e.scale=1,e.animatedScale=new le.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.imagePanResponder=null,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,le.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,le.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,le.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var n=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-n?e.positionY=-n:e.positionY>n&&(e.positionY=n),le.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var o=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-o?e.positionX=-o:e.positionX>o&&(e.positionX=o),le.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,le.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}).start(),le.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return r.prototype.componentWillMount=function(){var e=this;this.imagePanResponder=le.PanResponder.create({onStartShouldSetPanResponder:function(){return!0},onPanResponderTerminationRequest:function(){return!1},onPanResponderGrant:function(n){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var o=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=o-e.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress()},e.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.props.onDoubleClick&&e.props.onDoubleClick(),clearTimeout(e.longPressTimeout),e.doubleClickX=n.nativeEvent.changedTouches[0].pageX,e.doubleClickY=n.nativeEvent.changedTouches[0].pageY,e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var a=e.scale;e.scale=2;var l=e.scale-a;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*l/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*l/e.scale}e.imageDidMove("centerOn"),le.Animated.parallel([le.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100}),le.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100}),le.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,o){if(!e.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=o.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=o.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=o.dx,e.lastPositionY=o.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var l=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-l?(e.positionX=-l,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>l&&(e.positionX=l,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var c=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(c=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(c=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var p=void 0,h=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(p=n.nativeEvent.changedTouches[1].pageY,h=n.nativeEvent.changedTouches[0].pageY):(p=n.nativeEvent.changedTouches[0].pageY,h=n.nativeEvent.changedTouches[1].pageY);var v=u-c,x=h-p,C=Math.sqrt(v*v+x*x);if(e.zoomCurrentDistance=Number(C.toFixed(1)),e.zoomLastDistance!==null){var O=(e.zoomCurrentDistance-e.zoomLastDistance)/200,I=e.scale+O;I<(e.props.minScale||0)&&(I=e.props.minScale||0),I>(e.props.maxScale||0)&&(I=e.props.maxScale||0);var V=e.scale;e.scale=I,e.animatedScale.setValue(e.scale);var B=e.scale-V;e.positionX-=e.centerDiffX*B/e.scale,e.positionY-=e.centerDiffY*B/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,o){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(o.dx*o.dx+o.dy*o.dy),a=n.nativeEvent,l=a.locationX,c=a.locationY,u=a.pageX,p=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:l,locationY:c,pageX:u,pageY:p})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(o.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}})},r.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},r.prototype.componentWillReceiveProps=function(e){(e.centerOn&&!this.props.centerOn||e.centerOn&&this.props.centerOn&&this.didCenterOnChange(this.props.centerOn,e.centerOn))&&this.centerOn(e.centerOn)},r.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},r.prototype.didCenterOnChange=function(e,n){return e.x!==n.x||e.y!==n.y||e.scale!==n.scale},r.prototype.centerOn=function(e){var n=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var o=e.duration||300;le.Animated.parallel([le.Animated.timing(this.animatedScale,{toValue:this.scale,duration:o}),le.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:o}),le.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:o})]).start(function(){n.imageDidMove("centerOn")})},r.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},r.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},r.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=le.StyleSheet.flatten(this.props.style);return zo.createElement(le.View,g({style:vg({},bg.default.container,n,{width:this.props.cropWidth,height:this.props.cropHeight})},this.imagePanResponder.panHandlers),zo.createElement(le.Animated.View,{style:e,renderToHardwareTextureAndroid:!0},zo.createElement(le.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},r.defaultProps=new md.Props,r}(zo.Component);or.default=Sg});var hd=ut(ea=>{"use strict";s();Object.defineProperty(ea,"__esModule",{value:!0});var wg=gd();ea.default=wg.default});var ta=ut(Ho=>{"use strict";s();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=function(t,r,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:t,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:t,height:r,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:t,height:r,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:t,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:t,height:r},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Ho.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var oa=ut(Bo=>{"use strict";s();Object.defineProperty(Bo,"__esModule",{value:!0});var ra=w(),na=(W(),ci(di)),yd=ta(),Tg=function(){function t(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(r,e){return ra.createElement(na.View,{style:yd.simpleStyle.count},ra.createElement(na.Text,{style:yd.simpleStyle.countText},r+"/"+e))},this.renderImage=function(r){return ra.createElement(na.Image,r)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return t}();Bo.Props=Tg;var Cg=function(){function t(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return t}();Bo.State=Cg});var Sd=ut(Rt=>{"use strict";s();var Pg=Rt&&Rt.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ir=Rt&&Rt.__assign||Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Rg=Rt&&Rt.__rest||function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&(e[n[o]]=t[n[o]]);return e};Object.defineProperty(Rt,"__esModule",{value:!0});var J=w(),N=(W(),ci(di)),vd=hd(),bd=ta(),ia=oa(),Og=function(t){Pg(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new ia.State,e.fadeAnim=new N.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new N.Animated.Value(0),e.width=0,e.height=0,e.styles=bd.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(n){e.imageRefs[n]&&e.imageRefs[n].reset()},e.preloadImage=function(n){n<e.state.imageSizes.length&&e.loadImage(n+1)},e.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),e.positionXNumber=e.standardPositionX+n,e.positionX.setValue(e.positionXNumber);var o=N.I18nManager.isRTL?-n:n;o<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):o>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(n){n===void 0&&(n=0);var o=N.I18nManager.isRTL?-n:n,i=N.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=N.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(o>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(o<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=N.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,N.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime}).start();var n=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=N.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,N.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime}).start();var n=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(n){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(n)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(n){n.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=n.nativeEvent.layout.width,e.height=n.nativeEvent.layout.height,e.styles=bd.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(N.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return r.prototype.componentDidMount=function(){this.init(this.props)},r.getDerivedStateFromProps=function(e,n){return e.index!==n.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},r.prototype.componentDidUpdate=function(e,n){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),N.Animated.timing(this.fadeAnim,{toValue:1,duration:200}).start())},r.prototype.init=function(e){var n=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new ia.State);var o=[];e.imageUrls.forEach(function(i){o.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:o},function(){n.loadImage(e.index||0),n.jumpToCurrentImage(),N.Animated.timing(n.fadeAnim,{toValue:1,duration:200}).start()})},r.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(N.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},r.prototype.loadImage=function(e){var n=this;if(!!this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var o=this.props.imageUrls[e],i=ir({},this.state.imageSizes[e]),a=function(){if(!(n.state.imageSizes[e]&&n.state.imageSizes[e].status!=="loading")){var u=n.state.imageSizes.slice();u[e]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var l=!1,c=!1;if((!o.url||o.url.startsWith("file:"))&&(c=!0),o.width&&o.height){this.props.enablePreload&&c===!1&&N.Image.prefetch(o.url),i.width=o.width,i.height=o.height,i.status="success",a();return}N.Image.getSize(o.url,function(u,p){i.width=u,i.height=p,i.status="success",a()},function(){try{var u=N.Image.resolveAssetSource(o.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch(p){i.status="fail",a()}})}}},r.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,N.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150}).start()},r.prototype.getContent=function(){var e=this,n=this.width,o=this.height,i=this.props.imageUrls.map(function(a,l){if((e.state.currentShowIndex||0)>l+1||(e.state.currentShowIndex||0)<l-1)return J.createElement(N.View,{key:l,style:{width:n,height:o}});e.handleLongPressWithIndex.has(l)||e.handleLongPressWithIndex.set(l,e.handleLongPress.bind(e,a));var c=e.state.imageSizes[l]&&e.state.imageSizes[l].width,u=e.state.imageSizes[l]&&e.state.imageSizes[l].height,p=e.state.imageSizes[l];if(!p||!p.status)return J.createElement(N.View,{key:l,style:{width:n,height:o}});if(c>n){var h=n/c;c*=h,u*=h}if(u>o){var v=o/u;c*=v,u*=v}var x=function(C){var O=C.children,I=Rg(C,["children"]);return J.createElement(vd.default,g({cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(l),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval},I),O)};switch(p.status){case"loading":return J.createElement(x,{key:l,style:ir({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:n,imageHeight:o},J.createElement(N.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=ir({},e.styles.imageStyle,a.props.style,{width:c,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=ir({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),J.createElement(vd.default,{key:l,ref:function(C){return e.imageRefs[l]=C},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(l),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:c,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return J.createElement(x,{key:l,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:n,imageHeight:e.props.failImageSource?e.props.failImageSource.height:o},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return J.createElement(N.Animated.View,{style:{zIndex:9}},J.createElement(N.Animated.View,{style:ir({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),J.createElement(N.View,{style:this.styles.arrowLeftContainer},J.createElement(N.TouchableWithoutFeedback,{onPress:this.goBack},J.createElement(N.View,null,this.props.renderArrowLeft()))),J.createElement(N.View,{style:this.styles.arrowRightContainer},J.createElement(N.TouchableWithoutFeedback,{onPress:this.goNext},J.createElement(N.View,null,this.props.renderArrowRight()))),J.createElement(N.Animated.View,{style:ir({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&J.createElement(N.View,{style:this.styles.watchOrigin},J.createElement(N.TouchableOpacity,{style:this.styles.watchOriginTouchable},J.createElement(N.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),J.createElement(N.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},r.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?J.createElement(N.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):J.createElement(N.View,{style:this.styles.menuContainer},J.createElement(N.View,{style:this.styles.menuShadow}),J.createElement(N.View,{style:this.styles.menuContent},J.createElement(N.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},J.createElement(N.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),J.createElement(N.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},J.createElement(N.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},r.prototype.render=function(){var e=null;return e=J.createElement(N.View,null,this.getContent(),this.getMenu()),J.createElement(N.View,{onLayout:this.handleLayout,style:ir({flex:1,overflow:"hidden"},this.props.style)},e)},r.defaultProps=new ia.Props,r}(J.Component);Rt.default=Og});var Td=ut(hn=>{"use strict";s();Object.defineProperty(hn,"__esModule",{value:!0});var wd=Sd();hn.ImageViewer=wd.default;var xg=oa();hn.ImageViewerPropsDefine=xg.Props;hn.default=wd.default});s();(function(){"use strict";var t="ListFormat"in Intl;function r(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function e(y,_){for(var b=0;b<_.length;b++){var E=_[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function n(y,_,b){return _&&e(y.prototype,_),b&&e(y,b),y}var o=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function l(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(b){return typeof b}:l=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(y)}function c(y){return typeof Symbol=="function"&&l(Symbol.iterator)==="symbol"?c=function(b){return l(b)}:c=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":l(b)},c(y)}function u(y){if(y==null)throw new TypeError("Argument ".concat(y," cannot be converted to an Object"));return typeof y=="boolean"?new Boolean(y):typeof y=="number"?new Number(y):typeof y=="string"?new String(y):c(y)==="symbol"?new Object(y):y}var p;function h(y){p=y}function v(){return p}function x(){if(p==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return p}var C=new WeakMap,O={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function I(y,_,b){var E=C.get(y);E==null&&(E=Object.create(null),C.set(y,E)),E[_]=b}function V(y,_){var b=C.get(y);if(b==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return b[_]}function B(y,_){var b=C.get(y);return b!=null&&_ in b}var F=/-u(?:-[0-9a-z]{2,8})+/gi;function H(y){return y.replace(F,"")}function ne(y,_){for(var b=_;;){if(y.includes(b))return b;var E=b.lastIndexOf("-");if(E===-1)return;E>=2&&b.charAt(E-2)==="-"&&(E-=2),b=b.slice(0,E)}}function ot(y,_){var b=[],E=!0,U=!1,K=void 0;try{for(var ue=_[Symbol.iterator](),Z;!(E=(Z=ue.next()).done);E=!0){var ce=Z.value,se=H(ce),me=ne(y,se);me!==void 0&&b.push(ce)}}catch(Ve){U=!0,K=Ve}finally{try{!E&&ue.return!=null&&ue.return()}finally{if(U)throw K}}return b}function Ft(y,_){return ot(y,_)}function Ut(y){return typeof y=="string"||c(y)==="symbol"}function qr(y,_){if(c(y)!=="object")throw new TypeError("Given argument ".concat(y," must be of type Object"));if(!Ut(_))throw new TypeError("Given argument ".concat(_," must be a PropertyKey"));return y[_]}function Sp(y){return Boolean(y)}function wp(y){return y+""}function wn(y,_,b,E,U){var K=qr(y,_);if(K!==void 0){if(b!=="boolean"&&b!=="string")throw new TypeError("Expected type ".concat(b," to be 'boolean' or 'string"));if(b==="boolean"&&(K=Sp(K)),b==="string"&&(K=wp(K)),E!==void 0&&!E.includes(K))throw new RangeError("Value ".concat(K," out of range for options property ").concat(_));return K}else return U}function Tp(y,_,b){var E;return b!==void 0?(b=u(b),E=wn(b,"localeMatcher","string",a,"best fit")):E="best fit",E==="best fit"?Ft(y,_):ot(y,_)}function Sa(y){var _=y.availableLocales,b=y.requestedLocales,E=Object.create(null),U=!0,K=!1,ue=void 0;try{for(var Z=b[Symbol.iterator](),ce;!(U=(ce=Z.next()).done);U=!0){var se=ce.value,me=H(se),Ve=ne(_,me);if(Ve!==void 0){if(E.locale=Ve,se!==me){var it=se.match(F);E.extension=it==null?"":it[0]}return E}}}catch(Tn){K=!0,ue=Tn}finally{try{!U&&Z.return!=null&&Z.return()}finally{if(K)throw ue}}var ct=x();return E.locale=ct,E}function Cp(y){return Sa(y)}function Pp(y,_,b,E,U){var K=b.localeMatcher,ue=K==="lookup"?Sa({availableLocales:y,requestedLocales:_}):Cp({availableLocales:y,requestedLocales:_}),Z=ue.locale,ce=Object.create(null);ce.dataLocale=Z;var se="-u";if(se.length>2){var me=String.prototype.indexOf.call(Z,"-x-");if(me===-1)Z="".concat(Z).concat(se);else{var Ve=Z.slice(0,me),it=Z.slice(me);Z="".concat(Ve).concat(se).concat(it)}Z=Intl.getCanonicalLocales(Z)[0]}return ce.locale=Z,ce}function Rp(y){if(Array.isArray(y)){for(var _=0,b=new Array(y.length);_<y.length;_++)b[_]=y[_];return b}}function Op(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}function xp(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function kp(y){return Rp(y)||Op(y)||xp()}function wa(y){if(y===void 0)return[];var _=kp(y);if(_.some(function(b){return typeof b!="string"}))throw new TypeError("All List items must be strings");return _}function Ip(y){return Object.prototype.toString.call(y)==="[object Object]"}function Ep(y){return Array.isArray(y)||Ip(y)}function Ta(y,_){for(var b=[],E=String.prototype.indexOf.call(y,"{",0),U=0,K=y.length;y[E]!==void 0;){var ue=String.prototype.indexOf.call(y,"}",E);if(ue<=E)throw new TypeError("Expected endIndex: ".concat(ue," to be greater than beginIndex: ").concat(E));if(E>U){var Z=y.slice(U,E);b.push({type:"literal",value:Z})}var ce=y.slice(E+1,ue);if(_[Number(ce)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(ce));var se=_[Number(ce)];if(Ep(se.value)){var me=!0,Ve=!1,it=void 0;try{for(var ct=se.value[Symbol.iterator](),Tn;!(me=(Tn=ct.next()).done);me=!0){var Mp=Tn.value;b.push(Mp)}}catch(Np){Ve=!0,it=Np}finally{try{!me&&ct.return!=null&&ct.return()}finally{if(Ve)throw it}}}else b.push(se);U=ue+1,E=String.prototype.indexOf.call(y,"{",U)}if(U<K){var Ap=y.slice(U,K);b.push({type:"literal",value:Ap})}return b}function Ca(y,_){var b,E=_.length;if(E===0)return[];if(E===2){b=V(y,"templatePair");var U={type:"element",value:_[0]},K={type:"element",value:_[1]},ue={0:U,1:K};return Ta(b,ue)}for(var Z={type:"element",value:_[E-1]},ce=[Z],se=E-2;se>=0;){se===0?b=V(y,"templateStart"):se<E-2?b=V(y,"templateMiddle"):b=V(y,"templateEnd");var me={type:"element",value:_[se]},Ve={type:"element",value:ce},it={0:me,1:Ve};ce=Ta(b,it),se--}return ce}function _p(y,_){var b=Ca(y,_),E="",U=!0,K=!1,ue=void 0;try{for(var Z=b[Symbol.iterator](),ce;!(U=(ce=Z.next()).done);U=!0){var se=ce.value;E+=se.value}}catch(me){K=!0,ue=me}finally{try{!U&&Z.return!=null&&Z.return()}finally{if(K)throw ue}}return E}function Dp(y,_){return Ca(y,_)}var Pa=function(){function y(){r(this,y);var _=arguments[0],b=arguments[1];if((this instanceof y?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var E=Intl.getCanonicalLocales(_);b=b===void 0?Object.create(null):u(b);var U=Object.create(null),K=wn(b,"localeMatcher","string",a,"best fit");U.localeMatcher=K;var ue=wn(b,"type","string",o,"conjunction");I(this,"type",ue);var Z=wn(b,"style","string",i,"long");I(this,"style",Z);var ce=O.localeData,se=Pp(O.availableLocales,E,U),me=se.dataLocale,Ve=ce[me],it=Ve.formats[ue],ct=it[Z];I(this,"templatePair",ct.Pair),I(this,"templateStart",ct.Start),I(this,"templateMiddle",ct.Middle),I(this,"templateEnd",ct.End),I(this,"locale",se.locale),I(this,"initializedListFormat",this)}return n(y,[{key:"format",value:function(b){var E=this;if(!(E instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!B(E,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var U=wa(b);return _p(E,U)}},{key:"formatToParts",value:function(b){var E=this;if(!(E instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!B(E,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var U=wa(b);return Dp(E,U)}},{key:"resolvedOptions",value:function(){var b=this;if(!(b instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!B(b,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var E=V(this,"locale"),U=V(this,"type"),K=V(this,"style");return{locale:E,type:U,style:K}}}],[{key:"supportedLocalesOf",value:function(b){var E=arguments[1],U=O.availableLocales,K=Intl.getCanonicalLocales(b);return Tp(U,K,E)}},{key:"__addLocaleData",value:function(b){var E=b.data,U=b.locale,K=v();K==null&&h(U),O.localeData[U]=E,O.availableLocales.includes(U)||O.availableLocales.push(U)}}]),y}();Object.defineProperty(Pa.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Lp(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=Pa}t||Lp()})();s();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});s();var L=S(w());W();s();s();s();function tn(t,r){return tn=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},tn(t,r)}function eo(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,tn(t,r)}var Ge=S(w());var fy=S(Hp());s();function At(){return At=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},At.apply(this,arguments)}s();function rn(t,r){if(t==null)return{};var e={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(e[o]=t[o]);return e}var ro=function(t){eo(r,t);function r(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,n.history=Wa(n.props),n}var e=r.prototype;return e.render=function(){return Ge.default.createElement(mi,{history:this.history,children:this.props.children})},r}(Ge.default.Component),vy=function(t){eo(r,t);function r(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,n.history=Fa(n.props),n}var e=r.prototype;return e.render=function(){return Ge.default.createElement(mi,{history:this.history,children:this.props.children})},r}(Ge.default.Component),Pi=function(r,e){return typeof r=="function"?r(e):r},Ql=function(r,e){return typeof r=="string"?ja(r,null,null,e):r},Ri=function(r){return r},kr=Ge.default.forwardRef;typeof kr>"u"&&(kr=Ri);function Fp(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var Up=kr(function(t,r){var e=t.innerRef,n=t.navigate,o=t.onClick,i=rn(t,["innerRef","navigate","onClick"]),a=i.target,l=At({},i,{onClick:function(u){try{o&&o(u)}catch(p){throw u.preventDefault(),p}!u.defaultPrevented&&u.button===0&&(!a||a==="_self")&&!Fp(u)&&(u.preventDefault(),n())}});return Ri!==kr?l.ref=r||e:l.ref=e,Ge.default.createElement("a",l)}),Gp=kr(function(t,r){var e=t.component,n=e===void 0?Up:e,o=t.replace,i=t.to,a=t.innerRef,l=rn(t,["component","replace","to","innerRef"]);return Ge.default.createElement(fi.Consumer,null,function(c){c||pi(!1);var u=c.history,p=Ql(Pi(i,c.location),c.location),h=p?u.createHref(p):"",v=At({},l,{href:h,navigate:function(){var C=Pi(i,c.location),O=o?u.replace:u.push;O(C)}});return Ri!==kr?v.ref=r||a:v.innerRef=a,Ge.default.createElement(n,v)})});var Jl=function(r){return r},to=Ge.default.forwardRef;typeof to>"u"&&(to=Jl);function qp(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.filter(function(n){return n}).join(" ")}var by=to(function(t,r){var e=t["aria-current"],n=e===void 0?"page":e,o=t.activeClassName,i=o===void 0?"active":o,a=t.activeStyle,l=t.className,c=t.exact,u=t.isActive,p=t.location,h=t.strict,v=t.style,x=t.to,C=t.innerRef,O=rn(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return Ge.default.createElement(fi.Consumer,null,function(I){I||pi(!1);var V=p||I.location,B=Ql(Pi(x,V),V),F=B.pathname,H=F&&F.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),ne=H?Ua(V.pathname,{path:H,exact:c,strict:h}):null,ot=!!(u?u(ne,V):ne),Ft=ot?qp(l,i):l,Ut=ot?At({},v,{},a):v,qr=At({"aria-current":ot&&n||null,className:Ft,style:Ut,to:B},O);return Jl!==to?qr.ref=r||C:qr.innerRef=C,Ge.default.createElement(Gp,qr)})});s();var Ir=S(w()),no=S(jp());function Zl(t=5e3){let[r,e]=Ir.useState(!1),n=Ir.useRef(null);return Ir.useEffect(()=>(!r&&typeof window<"u"&&(n.current=setTimeout(()=>(0,no.unstable_runWithPriority)(no.unstable_IdlePriority,()=>e(!0)),t)),()=>{n.current&&clearTimeout(n.current)}),[]),r}s();var oo=S(w());function ec(t,r){let[e,n]=oo.useState(t);return oo.useEffect(()=>{let o=typeof r=="number"?r:r[t],i=setTimeout(()=>{n(t)},o);return()=>{clearTimeout(i)}},[t,r]),e}s();var tr=S(w());W();s();var io=S(w());W();var Xp=M.createResponsiveComponent(dt);function tc(t){let[,r]=P(Kp),{close:e}=It(),n=br()==="mobile",o=t.closeable||n,i=()=>{t.onClose&&t.onClose(),e(t.id)},a=Yr({mount:$p,unmount:Yp});return io.createElement(m,{ref:a},io.createElement(Xp,{mobileStyle:r.toastMobile,desktopStyle:r.toastDesktop,onPress:()=>{t.onOpen&&t.onOpen(),o&&i()}},io.createElement(Ns,k(g({},t),{onClose:o?i:void 0,style:r.alert}))))}var $p={duration:St.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},Yp={duration:St.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},Kp=D.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:d.small},toastMobile:{width:"100%",minWidth:0},alert:t=>k(g({},t.shadows.pop),{borderColor:t.colors.border.main})});function nc(t){let r=$r(Mn),e=$r(Ls),n=tr.useRef(null),o=Jp[r];return tr.createElement(ft,{ref:n},tr.createElement(M.View,{style:[Qp.toaster],mobileStyle:o.mobile,desktopStyle:o.desktop},tr.createElement(Ss,null,e.map(i=>tr.createElement(tc,k(g({},i),{key:i.id}))))))}var Qp=ge.create({toaster:{position:"absolute",zIndex:200}}),Jp={"bottom-right":ge.create({desktop:{bottom:d.medium,right:d.medium},mobile:{bottom:d.medium,right:d.medium,left:d.medium}}),"bottom-right-with-bar":ge.create({desktop:{bottom:d.xxlarge,right:d.medium},mobile:{bottom:d.xxlarge+d.xlarge+d.medium,right:d.medium,left:d.medium}})};s();var oc=S(w());function ic(t){let r=hr(Mn);oc.useEffect(()=>{r(t)},[r,t])}s();var ao=S(w());function so(t){let{children:r}=t;return ao.createElement(fs,null,ao.createElement(Ps,null,r),ao.createElement(nc,null))}s();var nn=S(w());s();function Zp(t){return mr(t).collection("page-feedbacks")}function ac(t,r){return Zp(t).doc(r)}function ef(t,r){return ac(t,r).collection("feedbacks")}function Oi(t,r,e){return ef(t,r).doc(e)}function sc(t,r){let e=Oi(r.space,r.page,r.visitorId),n=ac(r.space,r.page);t.set(e,{visitorId:r.visitorId,rating:r.rating,createdAt:Xr.firestore.Timestamp.now(),revision:r.revision,page:r.page}),t.set(n,{[r.rating]:Xr.firestore.FieldValue.increment(1),updatedAt:Xr.firestore.Timestamp.now()},{merge:!0}),r.previousRating&&t.update(n,{[r.previousRating]:Xr.firestore.FieldValue.increment(-1)})}s();W();function xi(t){let{src:r,bestHeight:e,maxWidth:n,style:o}=t;return Ra("img",{src:r,style:[{maxHeight:e,maxWidth:n,width:"auto",height:"auto"},o]})}s();var lc=S(Wp()),tf={getCurrentValue:()=>typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,subscribe:t=>(window.addEventListener("online",t),window.addEventListener("offline",t),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",t)})};function cc(){return(0,lc.useSubscription)(tf)}s();var qe=S(w());function rf(t){if(typeof t.key!="string")throw new Error("Need a key getter");return t.key}function uc(t){let{items:r,scrollTo:e,onSelect:n,getKey:o=rf}=t,[i,a]=(0,qe.useState)(null),l=(0,qe.useRef)(!1),c=(0,qe.useMemo)(()=>nf(r,i,o),[r,i,o]),u=gs(c),p=(0,qe.useCallback)(x=>a(o(x)),[a,o]),h=(0,qe.useCallback)(x=>{l.current||p(x)},[p]),v=(0,qe.useCallback)(x=>{if(x>0&&u.current.next){let{next:C}=u.current;p(C),e(C)}else if(x<0&&u.current.prev){let{prev:C}=u.current;p(C),e(C)}},[e,p]);return(0,qe.useEffect)(()=>{let x=()=>{l.current=!1,document.removeEventListener("mousemove",x)},C=O=>{let I=l.current;O.key==="Enter"?(O.preventDefault(),O.stopPropagation(),u.current.current&&n(u.current.current)):O.key==="ArrowDown"?(O.preventDefault(),O.stopPropagation(),l.current=!0,v(1)):O.key==="ArrowUp"&&(O.preventDefault(),O.stopPropagation(),l.current=!0,v(-1)),l.current&&I!==l.current&&document.addEventListener("mousemove",x)};return document.addEventListener("keydown",C,{capture:!0}),()=>{document.removeEventListener("keydown",C,{capture:!0}),document.removeEventListener("mousemove",x)}},[v,n]),{cursor:c,setCursor:p,hoverItem:h}}function nf(t,r,e){let n=null,o=null,i=null;return t.some(a=>(e(a)===r?i=a:i?i&&!o&&(o=a):n=a,i!=null&&o!=null)),i||(n=null,i=t[0],o=t[1]),{prev:n,next:o,current:i}}function dc(){let t=It();of(t)}function of(t){let r=cc(),e=nn.useRef(r),n=nn.useRef(0);nn.useEffect(()=>{if(r){e.current||ie({type:"app_back_online",offlineDuration:(Date.now()-n.current)/1e3});return}return n.current=Date.now(),t.notify({icon:R.CloudOff,title:"No connection.",details:"Go online to get the latest updates.",timeout:0,closeable:!1,kind:"danger"})},[r])}s();var af=os({key:"firestoreReacheable",default:!0,effects:[t=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{t.setSelf(!1)})}]});function pc(){return $r(af)}s();function lo(){let t=Ee(),[r]=Zt([gr(t.uid)]),e=Zt(r.map(n=>xt(n.organization)));return r.map((n,o)=>[e[o],n]).filter(([n])=>!!n)}s();var co=S(w());function fc(t){var o,i;let r=co.useContext(qs),e=r.preview||r.mode!=="public-content"||!((o=t==null?void 0:t.intercom)!=null&&o.enabled)||(i=t==null?void 0:t.intercom)==null?void 0:i.appID,n=Zl();return Jt(a=>{n&&e&&a.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),co.useEffect(()=>()=>{!window.Intercom||(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}s();var de=S(w());W();s();var re=S(w());W();s();var X=S(w());W();var mc="Label",gc="Label",hc="Label",yc="Caption",ki="Caption",vc=ki;function bc(t){let{command:r,query:e,active:n,inline:o,executeCommand:i,onHoverIn:a}=t,l=typeof r.checked=="boolean"&&r.checked,[c,u]=P($),[,p]=P(sf),[h,v]=hs(!1),x=u.text,C=u.textMid,O=u.primary,I=c.colors.background.main;l?(x=u.textInsideColor,C=u.textInsideColor,O=u.textInsideColor,I=c.colors.primary.main):n&&(x=u.textStandout,C=u.textMid,I=c.colors.background.muted);let V=[u.Bold],B=X.useCallback(()=>{let ne=i(r);ne instanceof Promise&&v(()=>ne)},[r,i]),F=X.useCallback(()=>a(r),[r,a]),H=oe.useInteractiveState({onHoverIn:F});return X.createElement(je,k(g({component:dt},H.events),{onMouseDown:ne=>{ne.preventDefault()},onPress:B,backgroundColor:I,style:[f.directionRow,f.alignCenter,o||r.size==="small"?d.Padding.smallVertical:d.Padding.mediumVertical,o?d.Padding.mediumHorizontal:d.Padding.largeHorizontal,{height:Ii(r,o)}]}),h?X.createElement(m,{style:[d.Padding.mediumRight]},X.createElement(pt,{size:T.ICON_M})):X.createElement(X.Fragment,null,r.icon?X.createElement(m,{style:[d.Padding.mediumRight]},X.createElement(r.icon,{size:T.ICON_M,style:O})):null),X.createElement(m,{style:f.flex1},X.createElement(m,{style:f.directionRow},X.createElement(m,{style:f.flex1},r.title?X.createElement(m,null,X.createElement(G,{style:[o?u[gc]:u[mc],x,r.subtitle?u.Bold:u.Medium],numberOfLines:1},X.createElement(Wn,{query:e,text:r.title,highlight:V}))):null,r.subtitle?X.createElement(m,null,X.createElement(G,{style:[o?u[yc]:u[hc],C],numberOfLines:o?1:void 0},X.createElement(Wn,{query:e,text:r.subtitle,highlight:V}))):null),r.label?X.createElement(m,{style:[f.directionRow,f.alignCenter,d.Margin.smallLeft,d.Padding.smallHorizontal,p.commandLabel]},r.label.icon?X.createElement(m,{style:[d.Padding.smallRight]},X.createElement(r.label.icon,{size:T.ICON_S,style:u.textInsideColor})):null,X.createElement(m,null,X.createElement(G,{style:[u.Caption,u.textInsideColor]},r.label.title))):null,o||!r.shortcut?null:X.createElement(m,{style:[f.directionRow,f.alignCenter]},X.createElement(m,{style:[d.Margin.smallLeft,d.Padding.smallHorizontal]},X.createElement(Hn,{shortcut:r.shortcut})))),r.body?X.createElement(m,{style:[p.commandBody,d.Padding.smallLeft,d.Margin.smallTop]},r.body.map((ne,ot)=>X.createElement(m,{key:ot},X.createElement(G,{style:[o?u[vc]:u[ki],u.textMid],numberOfLines:1},X.createElement(Wn,{query:e,text:ne,highlight:V}))))):null),typeof r.checked=="boolean"?X.createElement(m,{style:[d.Padding.mediumLeft]},X.createElement(Rs,{value:r.checked,onValueChange:B,size:o?T.ICON_S:T.ICON_M})):null)}function Ii(t,r){let e=0;return e+=2*(r||t.size==="small"?d.small:d.medium),e+=Math.max(t.title&&(r?Yt[gc]:Yt[mc]).lineHeight||0,t.icon?T.ICON_M:0,typeof t.checked=="boolean"?r?T.ICON_S:T.ICON_M:0),t.subtitle&&(e+=(r?Yt[yc]:Yt[hc]).lineHeight||0),t.body&&(e+=d.small,e+=t.body.length*((r?Yt[vc]:Yt[ki]).lineHeight||0)),e}var sf=D.create({commandLabel:t=>({height:T.BUTTON_S,borderRadius:T.RADIUS_L,backgroundColor:t.colors.primary.main,textColor:t.colors.primary.textInside}),commandBody:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.mid})});function Sc(t){let{computed:{listId:r,items:e,sections:n,areMoreLoading:o},palette:i,setPalette:a}=t,l=br(),c=re.useRef(null),u=re.useCallback(async H=>{a(await Ys(i,H))},[a]),p=re.useCallback(H=>{let ne=-1;return{sectionIndex:n.findIndex(Ft=>(ne=Ft.data.findIndex(Ut=>Ut.key===H),ne>=0)),itemIndex:ne,viewPosition:.5}},[n]),h=re.useCallback(H=>{var ne;return(ne=c.current)==null?void 0:ne.scrollToLocation(p(H.key))},[p]),{cursor:v,hoverItem:x}=uc({items:e,onSelect:u,scrollTo:h}),C=!!i.position,O=C?n.length>1:!0,I=re.useMemo(()=>ps({getItemHeight:({item:H})=>Ii(H,C),getSectionSeparatorHeight:({section:H,leadingItem:ne,leadingSection:ot,trailingItem:Ft,trailingSection:Ut})=>ot&&!ne&&!H.group.title?2*(d.small-1)+1:Ut&&!Ft?C?T.S/4:T.S/2:0,getSectionHeaderHeight:({section:H})=>O&&H.group.title?T.S:0}),[C,O]),V=re.useMemo(()=>O?({section:H})=>H.group.title?re.createElement(cf,{group:H.group,inline:C}):null:void 0,[C,O]),B=re.useCallback(H=>re.createElement(uf,k(g({},H),{inline:C})),[C]),F=o&&C;if(!F&&e.length===0){let H=i.placeholder||(i.controlled?"No items found":null);return H?re.createElement(lf,{placeholder:H,inline:C}):null}return re.createElement(m,{style:[f.flex1]},re.createElement(Oa,{key:r,ref:c,sections:n,extraData:v,getItemLayout:I,renderItem:({item:H})=>{var ne;return re.createElement(bc,{active:l==="desktop"&&H.key===((ne=v.current)==null?void 0:ne.key),command:H,query:i.query.text,inline:C,executeCommand:u,onHoverIn:x})},SectionSeparatorComponent:B,renderSectionHeader:V,contentContainerStyle:[C?d.Padding.smallVertical:d.Padding.mediumVertical]}),F?re.createElement(m,{style:[f.directionRow,f.justifyContentCenter,d.Padding.medium]},re.createElement(pt,{size:T.ICON_L})):null)}function lf(t){let{placeholder:r,inline:e}=t,[,n]=P($);return re.createElement(m,{style:[d.Padding.smallHorizontal,d.Padding.mediumVertical]},re.createElement(m,{style:[e?d.Padding.mediumHorizontal:d.Padding.largeHorizontal]},re.createElement(G,{style:[n.Caption,n.textMuted]},r)))}function cf(t){let{group:r,inline:e}=t,[,n]=P($);return re.createElement(m,{style:[df.paletteGroupHeader,f.directionRow,f.alignCenter,d.Padding.smallHorizontal]},re.createElement(m,{style:[e?d.Padding.mediumHorizontal:d.Padding.largeHorizontal]},re.createElement(G,{style:[n.Heading4,n.textMuted]},r.title)))}function uf(t){let{leadingSection:r,section:e,leadingItem:n,inline:o,trailingSection:i,trailingItem:a}=t,[,l]=P(pf);return r&&!n&&!e.group.title?re.createElement(m,{style:l.paletteDividerUntitled}):(i&&!a&&(m,o?l.paletteDividerFooterInline:l.paletteDividerFooter),null)}var df=ge.create({paletteGroupHeader:{height:T.S}}),pf=D.create({paletteDividerUntitled:(t,r)=>({marginTop:d.small-1,marginBottom:d.small-1,borderTopColor:r.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:T.S/2},paletteDividerFooterInline:{height:T.S/4}});s();var Er=S(w());W();function wc(t){let{error:r,inline:e}=t,[,n]=P($);return Er.createElement(m,{style:[f.directionRow,e?d.Padding.smallVertical:d.Padding.mediumVertical,e?d.Padding.mediumHorizontal:d.Padding.largeHorizontal]},Er.createElement(m,{style:[d.Padding.mediumRight,d.Padding.xsmallTop]},Er.createElement(R.Warning,{size:T.ICON_S,style:n.danger})),Er.createElement(m,{style:f.flex1},Er.createElement(G,{style:[n.danger,n.Label]},_a(r))))}s();var ye=S(w());W();var Tc=ye.forwardRef(function(r,e){let{palette:n,setPalette:o,defaultTitle:i,loading:a,withItems:l}=r,c=_n(2e3),[,u]=P(mf),[p,h]=P($),v=ec(a?"loading":"stale",{loading:400,stale:800}),x=En(()=>new Gt.Value(0)).current;ye.useEffect(()=>{let B=Gt.timing(x,{useNativeDriver:!0,toValue:v==="loading"?.7:0,duration:St.TRANSITION_DURATION_SHORT});return B.start(),()=>{B.stop()}},[x,v]);let[C,O]=ys(n.query.text,[n]),I=B=>{O(B),o(F=>!n||!F?n:Ks(F,B))},V=B=>{B.nativeEvent.key==="Backspace"&&n.query.text.length===0?o(F=>F&&Object.keys(F.query.filters).length>0?Js(F):F):B.nativeEvent.key==="Escape"?o(null):c(()=>{ie(g({type:"palette_search",length:n.query.text.length},n.analyticsContext))})};return ye.createElement(m,{style:l&&u.paletteInputWrapperWithBottomBorder},ye.createElement(m,{style:[f.directionRow,f.alignCenter,u.paletteInput,n.position?d.Margin.small:d.Margin.medium]},n.position?null:ye.createElement(m,{style:[d.Margin.largeLeft]},ye.createElement(R.Search,{size:T.ICON_L,style:h.textMuted})),ye.createElement(m,{style:[f.flex1]},ye.createElement(xa,{ref:e,value:C,placeholder:n.title?n.title:i,placeholderTextColor:p.colors.text.muted,onChangeText:I,onKeyPress:V,selectTextOnFocus:!0,style:[n.position?h.Caption:h.Body,h.text,n.position?d.Padding.mediumHorizontal:d.Padding.largeHorizontal,n.position?d.Padding.smallVertical:d.Padding.mediumVertical]})),n.position?null:ye.createElement(Gt.View,{style:[d.Margin.smallHorizontal,d.Margin.largeRight,{opacity:x}]},ye.createElement(pt,{spinnerIcon:R.SpinnerNeutral,size:T.ICON_M,style:h.textMuted})),ye.createElement(M.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[d.Margin.smallHorizontal]},ye.createElement(ee,{icon:R.X,size:"large",onPress:()=>o(null)}))),ye.createElement(ff,{palette:n,setPalette:o}))});function ff(t){let{palette:r,setPalette:e}=t,n=Object.entries(r.query.filters);if(n.length===0)return null;let o=i=>{e(a=>Qs(a,i))};return ye.createElement(m,{style:[f.directionRow,d.Padding.largeHorizontal,d.Padding.mediumBottom]},n.map(([i,a])=>ye.createElement(Os,{key:i,kind:"primary",size:"small",onPress:()=>o(i),style:d.Margin.smallRight},`${i}: ${a.text}`)))}var mf=D.create({paletteInputWrapperWithBottomBorder:(t,r)=>({borderBottomColor:r.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:t=>({backgroundColor:t.colors.background.muted,borderRadius:T.RADIUS_L})});s();var _r=S(w());function Cc(t){let[r,e]=_r.useState(!1),n=En(()=>new WeakMap),o=_r.useRef(null);return _r.useMemo(()=>{let i=[],a=[],l;t.groups.forEach(p=>{let h;try{h=gf(t,p)}catch(v){l=v;return}if(h instanceof Promise){let v=n.current.get(p);v&&i.push(v),a.push(h)}else h&&(n.current.set(p,h),i.push(h))});let c=i.filter(p=>p.data.length>0).sort((p,h)=>p.priority>h.priority?-1:p.priority<h.priority?1:0),u=c.reduce((p,h)=>(p.push(...h.data),p),[]);if(a.length>0){e(!0);let p=o.current=Promise.all(a);p.then(()=>{p===o.current&&(e(!1),o.current=null)}).catch(h=>Da(new Error(h)))}return{listId:Date.now(),items:u,sections:c,areMoreLoading:r,error:l}},[t,r,n])}function gf(t,r){try{if(Object.keys(t.query.filters).length>0&&typeof r.commands!="function")return;let e=typeof r.commands=="function"?r.commands(t):r.commands,n=typeof r.commands!="function"||r.commands.length===0,o=r.priority||5;if(n){let i=hf(t.query.text,e);o=i.reduce((a,l)=>typeof l.score<"u"?Math.max((1-l.score)*10,a):a,o),e=i.map(a=>a.item)}return{group:r,priority:o,data:e}}catch(e){if(e instanceof Promise)return e;throw e}}function hf(t,r){return t?new ts(r,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(t):r.map(n=>({item:n,score:void 0}))}s();var Di=S(Bp()),mo=S(w());var Ei=204,uo=246,_i=384,yf=630,po=180,fo=355;function Pc(t){let r=mo.useMemo(()=>bf(t),[t]),e=mo.useCallback(a=>vf(a,t),[t]),[n,o,i]=Is(t==null?void 0:t.anchorRef,e,r);return[n,o,i]}function vf(t,r){let e,n=(r==null?void 0:r.width)||"medium";switch(n){case"small":e={width:Ei,maxWidth:Ei,minWidth:Ei,minHeight:0,height:po,maxHeight:fo};break;case"medium":e={width:uo,maxWidth:uo,minWidth:uo,minHeight:0,height:po,maxHeight:fo};break;case"large":e={width:_i,maxWidth:_i,minWidth:_i,minHeight:0,height:po,maxHeight:fo};break;case"anchor":let o=Math.max(uo,t.width),i=(0,Di.default)(t.width,o,yf);e={width:(0,Di.default)(t.width,o,i),maxWidth:i,minWidth:o,minHeight:0,height:po,maxHeight:fo};break;default:fr(n)}return e}function bf(t){let r={cover:t==null?void 0:t.cover,spacingWithAnchor:d.small};return(t==null?void 0:t.width)==="anchor"&&(r.allowedPlacements=["bottom","top"]),r}var Sf=M.createResponsiveComponent(je);function go(t){let{defaultTitle:r="Type a command or search\u2026",defaultVariant:e}=t,[n,o]=xe(Zs),{color:i}=vr();return de.createElement(bs,null,n?de.createElement(wf,{palette:n,setPalette:o,defaultTitle:r,paletteVariant:n.variants||e||{color:i}}):null)}function wf(t){var h;let{palette:r,setPalette:e,paletteVariant:n}=t,[,o]=P(Rc);Yn(r.position?null:"palette",[!!r.position]);let i=()=>e(null),[a,l]=Pc(r.position),c=Yr(St.fade),u=Yr(r.position?St.slideToL[l]:St.pop),p=vs("OUTSIDE_CLICK");return Ln({opened:!0,closeOnEsc:!!r.controlled,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:i}),de.createElement(ft,null,de.createElement(ui,{onPressIn:()=>{p&&i()}},de.createElement(m,{ref:c,style:[o.paletteBackdrop,((h=r.position)==null?void 0:h.anchorRef)&&o.paletteBackdropInline]},de.createElement(ve,{theme:n},de.createElement(Tf,k(g({ref:u},t),{positionStyle:a}))))))}var Tf=de.forwardRef(function(r,e){let{palette:n,setPalette:o,positionStyle:i,defaultTitle:a}=r,l=de.useRef(null),[c,u]=P(Rc),p=Cc(n);return de.useEffect(()=>{!n.controlled&&l.current&&l.current.focus()},[n]),de.createElement(ui,{onPress:h=>h.preventDefault()},de.createElement(Sf,{ref:e,backgroundColor:c.colors.background.main,style:[u.palette],mobileStyle:u.paletteMobile,desktopStyle:n.position?[u.paletteInline,i]:u.paletteDesktop,onStartShouldSetResponder:()=>!0},n.controlled?null:de.createElement(Tc,{ref:l,palette:n,setPalette:o,defaultTitle:a,loading:p.areMoreLoading,withItems:p.items.length>0}),p.error?de.createElement(wc,{error:p.error,inline:!!n.position}):null,de.createElement(Sc,{computed:p,palette:n,setPalette:o})))}),Rc=D.create({paletteBackdrop:t=>({flexDirection:"row",alignItems:"flex-start",justifyContent:"center",position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:100,backgroundColor:t.colors.backdrop.background}),paletteBackdropInline:t=>({backgroundColor:"transparent"}),palette:t=>({borderRadius:T.RADIUS_XL,shadowColor:t.colors.border.muted,borderColor:t.colors.border.main,borderWidth:1,shadowOffset:{width:0,height:3},shadowOpacity:.37,shadowRadius:2.65,elevation:6,overflow:"hidden"}),paletteDesktop:{marginTop:d.xxlarge,width:640,maxHeight:480},paletteMobile:{position:"absolute",marginTop:0,top:d.small,left:d.small,right:d.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});s();var Lu=S(Ec()),Ro=S(w());s();var ze;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(ze||(ze={}));s();s();s();s();s();s();var Dr="dnd-core/INIT_COORDS",Nt="dnd-core/BEGIN_DRAG",Lr="dnd-core/PUBLISH_DRAG_SOURCE",Vt="dnd-core/HOVER",zt="dnd-core/DROP",Ht="dnd-core/END_DRAG";function Mi(t,r){return{type:Dr,payload:{sourceClientOffset:r||null,clientOffset:t||null}}}s();function ho(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ho=function(e){return typeof e}:ho=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(t)}function _c(t,r,e){return r.split(".").reduce(function(n,o){return n&&n[o]?n[o]:e||null},t)}function Dc(t,r){return t.filter(function(e){return e!==r})}function yo(t){return ho(t)==="object"}function Lc(t,r){var e=new Map,n=function(a){e.set(a,e.has(a)?e.get(a)+1:1)};t.forEach(n),r.forEach(n);var o=[];return e.forEach(function(i,a){i===1&&o.push(a)}),o}function Mc(t,r){return t.filter(function(e){return r.indexOf(e)>-1})}var xf={type:Dr,payload:{clientOffset:null,sourceClientOffset:null}};function Ac(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,l=n.getSourceClientOffset,c=t.getMonitor(),u=t.getRegistry();t.dispatch(Mi(a)),kf(e,c,u);var p=_f(e,c);if(p===null){t.dispatch(xf);return}var h=null;if(a){if(!l)throw new Error("getSourceClientOffset must be defined");If(l),h=l(p)}t.dispatch(Mi(a,h));var v=u.getSource(p),x=v.beginDrag(c,p);if(x!=null){Ef(x),u.pinSource(p);var C=u.getSourceType(p);return{type:Nt,payload:{itemType:C,item:x,sourceId:p,clientOffset:a||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}}}function kf(t,r,e){A(!r.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){A(e.getSource(n),"Expected sourceIds to be registered.")})}function If(t){A(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ef(t){A(yo(t),"Item must be an object.")}function _f(t,r){for(var e=null,n=t.length-1;n>=0;n--)if(r.canDragSource(t[n])){e=t[n];break}return e}s();function Nc(t){return function(){var e=t.getMonitor();if(e.isDragging())return{type:Lr}}}s();s();function an(t,r){return r===null?t===null:Array.isArray(t)?t.some(function(e){return e===r}):t===r}function Vc(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;Df(e);var i=e.slice(0),a=t.getMonitor(),l=t.getRegistry();Lf(i,a,l);var c=a.getItemType();return Mf(i,l,c),Af(i,a,l),{type:Vt,payload:{targetIds:i,clientOffset:o||null}}}}function Df(t){A(Array.isArray(t),"Expected targetIds to be an array.")}function Lf(t,r,e){A(r.isDragging(),"Cannot call hover while not dragging."),A(!r.didDrop(),"Cannot call hover after drop.");for(var n=0;n<t.length;n++){var o=t[n];A(t.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=e.getTarget(o);A(i,"Expected targetIds to be registered.")}}function Mf(t,r,e){for(var n=t.length-1;n>=0;n--){var o=t[n],i=r.getTargetType(o);an(i,e)||t.splice(n,1)}}function Af(t,r,e){t.forEach(function(n){var o=e.getTarget(n);o.hover(r,n)})}s();function zc(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function Hc(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?zc(Object(e),!0).forEach(function(n){Nf(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):zc(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Nf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Bc(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.getMonitor(),o=t.getRegistry();Vf(n);var i=Bf(n);i.forEach(function(a,l){var c=zf(a,l,o,n),u={type:zt,payload:{dropResult:Hc(Hc({},e),c)}};t.dispatch(u)})}}function Vf(t){A(t.isDragging(),"Cannot call drop while not dragging."),A(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function zf(t,r,e,n){var o=e.getTarget(t),i=o?o.drop(n,t):void 0;return Hf(i),typeof i>"u"&&(i=r===0?{}:n.getDropResult()),i}function Hf(t){A(typeof t>"u"||yo(t),"Drop result must either be an object or undefined.")}function Bf(t){var r=t.getTargetIds().filter(t.canDropOnTarget,t);return r.reverse(),r}s();function jc(t){return function(){var e=t.getMonitor(),n=t.getRegistry();jf(e);var o=e.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(e,o),n.unpinSource()}return{type:Ht}}}function jf(t){A(t.isDragging(),"Cannot call endDrag while not dragging.")}function Wc(t){return{beginDrag:Ac(t),publishDragSource:Nc(t),hover:Vc(t),drop:Bc(t),endDrag:jc(t)}}function Wf(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Fc(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ff(t,r,e){return r&&Fc(t.prototype,r),e&&Fc(t,e),t}var Uc=function(){function t(r,e){var n=this;Wf(this,t),this.isSetUp=!1,this.handleRefCountChange=function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))},this.store=r,this.monitor=e,r.subscribe(this.handleRefCountChange)}return Ff(t,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,n=this.store.dispatch;function o(a){return function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var p=a.apply(e,c);typeof p<"u"&&n(p)}}var i=Wc(this);return Object.keys(i).reduce(function(a,l){var c=i[l];return a[l]=o(c),a},{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),t}();s();s();s();function Xe(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Gc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ai=function(){return Math.random().toString(36).substring(7).split("").join(".")},qc={INIT:"@@redux/INIT"+Ai(),REPLACE:"@@redux/REPLACE"+Ai(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ai()}};function Uf(t){if(typeof t!="object"||t===null)return!1;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function Ni(t,r,e){var n;if(typeof r=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof r=="function"&&typeof e>"u"&&(e=r,r=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Xe(1));return e(Ni)(t,r)}if(typeof t!="function")throw new Error(Xe(2));var o=t,i=r,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function p(){if(c)throw new Error(Xe(3));return i}function h(O){if(typeof O!="function")throw new Error(Xe(4));if(c)throw new Error(Xe(5));var I=!0;return u(),l.push(O),function(){if(!!I){if(c)throw new Error(Xe(6));I=!1,u();var B=l.indexOf(O);l.splice(B,1),a=null}}}function v(O){if(!Uf(O))throw new Error(Xe(7));if(typeof O.type>"u")throw new Error(Xe(8));if(c)throw new Error(Xe(9));try{c=!0,i=o(i,O)}finally{c=!1}for(var I=a=l,V=0;V<I.length;V++){var B=I[V];B()}return O}function x(O){if(typeof O!="function")throw new Error(Xe(10));o=O,v({type:qc.REPLACE})}function C(){var O,I=h;return O={subscribe:function(B){if(typeof B!="object"||B===null)throw new Error(Xe(11));function F(){B.next&&B.next(p())}F();var H=I(F);return{unsubscribe:H}}},O[Gc]=function(){return this},O}return v({type:qc.INIT}),n={dispatch:v,subscribe:h,getState:p,replaceReducer:x},n[Gc]=C,n}s();s();s();var Gf=function(r,e){return r===e};function Xc(t,r){return!t&&!r?!0:!t||!r?!1:t.x===r.x&&t.y===r.y}function $c(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gf;if(t.length!==r.length)return!1;for(var n=0;n<t.length;++n)if(!e(t[n],r[n]))return!1;return!0}function Yc(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function Kc(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Yc(Object(e),!0).forEach(function(n){qf(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Yc(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function qf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Qc={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Jc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qc,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case Dr:case Nt:return{initialSourceClientOffset:e.sourceClientOffset,initialClientOffset:e.clientOffset,clientOffset:e.clientOffset};case Vt:return Xc(t.clientOffset,e.clientOffset)?t:Kc(Kc({},t),{},{clientOffset:e.clientOffset});case Ht:case zt:return Qc;default:return t}}s();s();var sn="dnd-core/ADD_SOURCE",ln="dnd-core/ADD_TARGET",cn="dnd-core/REMOVE_SOURCE",rr="dnd-core/REMOVE_TARGET";function Zc(t){return{type:sn,payload:{sourceId:t}}}function eu(t){return{type:ln,payload:{targetId:t}}}function tu(t){return{type:cn,payload:{sourceId:t}}}function ru(t){return{type:rr,payload:{targetId:t}}}function nu(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function $e(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?nu(Object(e),!0).forEach(function(n){Xf(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):nu(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Xf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var $f={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ou(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$f,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case Nt:return $e($e({},t),{},{itemType:e.itemType,item:e.item,sourceId:e.sourceId,isSourcePublic:e.isSourcePublic,dropResult:null,didDrop:!1});case Lr:return $e($e({},t),{},{isSourcePublic:!0});case Vt:return $e($e({},t),{},{targetIds:e.targetIds});case rr:return t.targetIds.indexOf(e.targetId)===-1?t:$e($e({},t),{},{targetIds:Dc(t.targetIds,e.targetId)});case zt:return $e($e({},t),{},{dropResult:e.dropResult,didDrop:!0,targetIds:[]});case Ht:return $e($e({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}s();function iu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case sn:case ln:return t+1;case cn:case rr:return t-1;default:return t}}s();s();var Mr=[],vo=[];Mr.__IS_NONE__=!0;vo.__IS_ALL__=!0;function au(t,r){if(t===Mr)return!1;if(t===vo||typeof r>"u")return!0;var e=Mc(r,t);return e.length>0}function su(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mr,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Vt:break;case sn:case ln:case rr:case cn:return Mr;case Nt:case Lr:case Ht:case zt:default:return vo}var e=r.payload,n=e.targetIds,o=n===void 0?[]:n,i=e.prevTargetIds,a=i===void 0?[]:i,l=Lc(o,a),c=l.length>0||!$c(o,a);if(!c)return Mr;var u=a[a.length-1],p=o[o.length-1];return u!==p&&(u&&l.push(u),p&&l.push(p)),l}s();function lu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function cu(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function uu(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?cu(Object(e),!0).forEach(function(n){Yf(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cu(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Yf(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function du(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:su(t.dirtyHandlerIds,{type:r.type,payload:uu(uu({},r.payload),{},{prevTargetIds:_c(t,"dragOperation.targetIds",[])})}),dragOffset:Jc(t.dragOffset,r),refCount:iu(t.refCount,r),dragOperation:ou(t.dragOperation,r),stateId:lu(t.stateId)}}s();s();function Kf(t,r){return{x:t.x+r.x,y:t.y+r.y}}function pu(t,r){return{x:t.x-r.x,y:t.y-r.y}}function fu(t){var r=t.clientOffset,e=t.initialClientOffset,n=t.initialSourceClientOffset;return!r||!e||!n?null:pu(Kf(r,n),e)}function mu(t){var r=t.clientOffset,e=t.initialClientOffset;return!r||!e?null:pu(r,e)}function Qf(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function gu(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jf(t,r,e){return r&&gu(t.prototype,r),e&&gu(t,e),t}var hu=function(){function t(r,e){Qf(this,t),this.store=r,this.registry=e}return Jf(t,[{key:"subscribeToStateChange",value:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;A(typeof e=="function","listener must be a function."),A(typeof i>"u"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,l=function(){var u=n.store.getState(),p=u.stateId;try{var h=p===a||p===a+1&&!au(u.dirtyHandlerIds,i);h||e()}finally{a=p}};return this.store.subscribe(l)}},{key:"subscribeToOffsetChange",value:function(e){var n=this;A(typeof e=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var l=n.store.getState().dragOffset;l!==o&&(o=l,e())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(e){if(!e)return!1;var n=this.registry.getSource(e);return A(n,"Expected to find a valid source. sourceId=".concat(e)),this.isDragging()?!1:n.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var n=this.registry.getTarget(e);if(A(n,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(e),i=this.getItemType();return an(o,i)&&n.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var n=this.registry.getSource(e,!0);if(A(n,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(e),i=this.getItemType();return o!==i?!1:n.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!e)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!an(i,a))return!1;var l=this.getTargetIds();if(!l.length)return!1;var c=l.indexOf(e);return o?c===l.length-1:c>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return fu(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return mu(this.store.getState().dragOffset)}}]),t}();s();s();var Zf=0;function yu(){return Zf++}s();function bo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bo=function(e){return typeof e}:bo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(t)}function vu(t){A(typeof t.canDrag=="function","Expected canDrag to be a function."),A(typeof t.beginDrag=="function","Expected beginDrag to be a function."),A(typeof t.endDrag=="function","Expected endDrag to be a function.")}function bu(t){A(typeof t.canDrop=="function","Expected canDrop to be a function."),A(typeof t.hover=="function","Expected hover to be a function."),A(typeof t.drop=="function","Expected beginDrag to be a function.")}function So(t,r){if(r&&Array.isArray(t)){t.forEach(function(e){return So(e,!1)});return}A(typeof t=="string"||bo(t)==="symbol",r?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}s();s();s();function un(t){vt.length||(wo(),Tu=!0),vt[vt.length]=t}var vt=[],Tu=!1,wo,yt=0,em=1024;function Su(){for(;yt<vt.length;){var t=yt;if(yt=yt+1,vt[t].call(),yt>em){for(var r=0,e=vt.length-yt;r<e;r++)vt[r]=vt[r+yt];vt.length-=yt,yt=0}}vt.length=0,yt=0,Tu=!1}var wu=typeof window<"u"?window:self,Cu=wu.MutationObserver||wu.WebKitMutationObserver;typeof Cu=="function"?wo=tm(Su):wo=Pu(Su);un.requestFlush=wo;function tm(t){var r=1,e=new Cu(t),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){r=-r,n.data=r}}function Pu(t){return function(){var e=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(e),clearInterval(n),t()}}}un.makeRequestCallFromTimer=Pu;var To=[],Vi=[],rm=un.makeRequestCallFromTimer(nm);function nm(){if(Vi.length)throw Vi.shift()}function Co(t){var r;To.length?r=To.pop():r=new om,r.task=t,un(r)}var om=function(){function t(){}return t.prototype.call=function(){try{this.task.call()}catch(r){Co.onerror?Co.onerror(r):(Vi.push(r),rm())}finally{this.task=null,To[To.length]=this}},t}();function im(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ru(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function am(t,r,e){return r&&Ru(t.prototype,r),e&&Ru(t,e),t}function sm(t,r){return dm(t)||um(t,r)||cm(t,r)||lm()}function lm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cm(t,r){if(!!t){if(typeof t=="string")return Ou(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ou(t,r)}}function Ou(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function um(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var e=[],n=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),l;!(n=(l=a.next()).done)&&(e.push(l.value),!(r&&e.length===r));n=!0);}catch(c){o=!0,i=c}finally{try{!n&&a.return!=null&&a.return()}finally{if(o)throw i}}return e}}function dm(t){if(Array.isArray(t))return t}function pm(t){var r=yu().toString();switch(t){case ze.SOURCE:return"S".concat(r);case ze.TARGET:return"T".concat(r);default:throw new Error("Unknown Handler Role: ".concat(t))}}function xu(t){switch(t[0]){case"S":return ze.SOURCE;case"T":return ze.TARGET;default:A(!1,"Cannot parse handler ID: ".concat(t))}}function ku(t,r){var e=t.entries(),n=!1;do{var o=e.next(),i=o.done,a=sm(o.value,2),l=a[1];if(l===r)return!0;n=!!i}while(!n);return!1}var Iu=function(){function t(r){im(this,t),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=r}return am(t,[{key:"addSource",value:function(e,n){So(e),vu(n);var o=this.addHandler(ze.SOURCE,e,n);return this.store.dispatch(Zc(o)),o}},{key:"addTarget",value:function(e,n){So(e,!0),bu(n);var o=this.addHandler(ze.TARGET,e,n);return this.store.dispatch(eu(o)),o}},{key:"containsHandler",value:function(e){return ku(this.dragSources,e)||ku(this.dropTargets,e)}},{key:"getSource",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;A(this.isSourceId(e),"Expected a valid source ID.");var o=n&&e===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(e);return i}},{key:"getTarget",value:function(e){return A(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return A(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return A(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){var n=xu(e);return n===ze.SOURCE}},{key:"isTargetId",value:function(e){var n=xu(e);return n===ze.TARGET}},{key:"removeSource",value:function(e){var n=this;A(this.getSource(e),"Expected an existing source."),this.store.dispatch(tu(e)),Co(function(){n.dragSources.delete(e),n.types.delete(e)})}},{key:"removeTarget",value:function(e){A(this.getTarget(e),"Expected an existing target."),this.store.dispatch(ru(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var n=this.getSource(e);A(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}},{key:"unpinSource",value:function(){A(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,n,o){var i=pm(e);return this.types.set(i,n),e===ze.SOURCE?this.dragSources.set(i,o):e===ze.TARGET&&this.dropTargets.set(i,o),i}}]),t}();function Eu(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=fm(n),i=new hu(o,new Iu(o)),a=new Uc(o,i),l=t(a,r,e);return a.receiveBackend(l),a}function fm(t){var r=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ni(du,t&&r&&r({name:"dnd-core",instanceId:"dnd-core"}))}var mm=["children"];function gm(t,r){return bm(t)||vm(t,r)||ym(t,r)||hm()}function hm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ym(t,r){if(!!t){if(typeof t=="string")return _u(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _u(t,r)}}function _u(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function vm(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],o=!0,i=!1,a,l;try{for(e=e.call(t);!(o=(a=e.next()).done)&&(n.push(a.value),!(r&&n.length===r));o=!0);}catch(c){i=!0,l=c}finally{try{!o&&e.return!=null&&e.return()}finally{if(i)throw l}}return n}}function bm(t){if(Array.isArray(t))return t}function Sm(t,r){if(t==null)return{};var e=wm(t,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(e[n]=t[n]))}return e}function wm(t,r){if(t==null)return{};var e={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(e[o]=t[o]);return e}var Du=0,Po=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Mu=(0,Ro.memo)(function(r){var e=r.children,n=Sm(r,mm),o=Tm(n),i=gm(o,2),a=i[0],l=i[1];return(0,Ro.useEffect)(function(){if(l){var c=Au();return++Du,function(){--Du===0&&(c[Po]=null)}}},[]),(0,Lu.jsx)($n.Provider,Object.assign({value:a},{children:e}),void 0)});function Tm(t){if("manager"in t){var r={dragDropManager:t.manager};return[r,!1]}var e=Cm(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function Cm(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Au(),e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=r;return o[Po]||(o[Po]={dragDropManager:Eu(t,r,e,n)}),o[Po]}function Au(){return window}s();var zi=S(w());function Pm(t,r){return km(t)||xm(t,r)||Om(t,r)||Rm()}function Rm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Om(t,r){if(!!t){if(typeof t=="string")return Nu(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Nu(t,r)}}function Nu(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function xm(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],o=!0,i=!1,a,l;try{for(e=e.call(t);!(o=(a=e.next()).done)&&(n.push(a.value),!(r&&n.length===r));o=!0);}catch(c){i=!0,l=c}finally{try{!o&&e.return!=null&&e.return()}finally{if(i)throw l}}return n}}function km(t){if(Array.isArray(t))return t}function Oo(t){var r=al(),e=r.getMonitor(),n=sl(e,t),o=Pm(n,2),i=o[0],a=o[1];return(0,zi.useEffect)(function(){return e.subscribeToOffsetChange(a)}),(0,zi.useEffect)(function(){return e.subscribeToStateChange(a)}),i}s();var ad=S(w());s();s();s();s();s();function Im(t,r){var e;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(e=Em(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,l;return{s:function(){e=t[Symbol.iterator]()},n:function(){var u=e.next();return i=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!i&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function Em(t,r){if(!!t){if(typeof t=="string")return Vu(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Vu(t,r)}}function Vu(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _m(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Hi(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function xo(t,r){var e=zu(t,r,"get");return Dm(t,e)}function Dm(t,r){return r.get?r.get.call(t):r.value}function Lm(t,r,e){var n=zu(t,r,"set");return Mm(t,n,e),e}function zu(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function Mm(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}var Ar=new WeakMap,Hu=function t(){var r=this;_m(this,t),Ar.set(this,{writable:!0,value:void 0}),Hi(this,"register",function(e){xo(r,Ar).push(e)}),Hi(this,"unregister",function(e){for(var n;(n=xo(r,Ar).indexOf(e))!==-1;)xo(r,Ar).splice(n,1)}),Hi(this,"backendChanged",function(e){var n=Im(xo(r,Ar)),o;try{for(n.s();!(o=n.n()).done;){var i=o.value;i.backendChanged(e)}}catch(a){n.e(a)}finally{n.f()}}),Lm(this,Ar,[])};function Am(t){return Hm(t)||zm(t)||Vm(t)||Nm()}function Nm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vm(t,r){if(!!t){if(typeof t=="string")return Wi(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Wi(t,r)}}function zm(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hm(t){if(Array.isArray(t))return Wi(t)}function Wi(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Bm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function bt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function z(t,r){var e=Fu(t,r,"get");return jm(t,e)}function jm(t,r){return r.get?r.get.call(t):r.value}function Nr(t,r,e){var n=Fu(t,r,"set");return Wm(t,n,e),e}function Fu(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function Wm(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}var Ye=new WeakMap,ko=new WeakMap,Ke=new WeakMap,Bt=new WeakMap,nr=new WeakMap,Bu=new WeakMap,ju=new WeakMap,Wu=new WeakMap,Bi=new WeakMap,ji=new WeakMap,Io=new WeakMap,Fi=function t(r,e,n){var o=this;if(Bm(this,t),Ye.set(this,{writable:!0,value:void 0}),ko.set(this,{writable:!0,value:void 0}),Ke.set(this,{writable:!0,value:void 0}),Bt.set(this,{writable:!0,value:void 0}),nr.set(this,{writable:!0,value:void 0}),Bu.set(this,{writable:!0,value:function(a,l,c){var u,p;if(!c.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(c)));var h=c.backend(a,l,c.options),v=c.id,x=!c.id&&h&&h.constructor;if(x&&(v=h.constructor.name),v)x&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(c),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(z(o,Ke)[v])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(c)," (conflicts with: ").concat(JSON.stringify(z(o,Ke)[v]),")"));return{id:v,instance:h,preview:(u=c.preview)!==null&&u!==void 0?u:!1,transition:c.transition,skipDispatchOnTransition:(p=c.skipDispatchOnTransition)!==null&&p!==void 0?p:!1}}}),bt(this,"setup",function(){if(!(typeof window>"u")){if(t.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");t.isSetUp=!0,z(o,ju).call(o,window),z(o,Ke)[z(o,Ye)].instance.setup()}}),bt(this,"teardown",function(){typeof window>"u"||(t.isSetUp=!1,z(o,Wu).call(o,window),z(o,Ke)[z(o,Ye)].instance.teardown())}),bt(this,"connectDragSource",function(i,a,l){return z(o,Io).call(o,"connectDragSource",i,a,l)}),bt(this,"connectDragPreview",function(i,a,l){return z(o,Io).call(o,"connectDragPreview",i,a,l)}),bt(this,"connectDropTarget",function(i,a,l){return z(o,Io).call(o,"connectDropTarget",i,a,l)}),bt(this,"profile",function(){return z(o,Ke)[z(o,Ye)].instance.profile()}),bt(this,"previewEnabled",function(){return z(o,Ke)[z(o,Ye)].preview}),bt(this,"previewsList",function(){return z(o,ko)}),bt(this,"backendsList",function(){return z(o,Bt)}),ju.set(this,{writable:!0,value:function(a){z(o,Bt).forEach(function(l){l.transition&&a.addEventListener(l.transition.event,z(o,Bi))})}}),Wu.set(this,{writable:!0,value:function(a){z(o,Bt).forEach(function(l){l.transition&&a.removeEventListener(l.transition.event,z(o,Bi))})}}),Bi.set(this,{writable:!0,value:function(a){var l=z(o,Ye);if(z(o,Bt).some(function(h){return h.id!==z(o,Ye)&&h.transition&&h.transition.check(a)?(Nr(o,Ye,h.id),!0):!1}),z(o,Ye)!==l){var c;z(o,Ke)[l].instance.teardown(),Object.keys(z(o,nr)).forEach(function(h){var v,x=z(o,nr)[h];x.unsubscribe(),x.unsubscribe=(v=z(o,ji)).call.apply(v,[o,x.func].concat(Am(x.args)))}),z(o,ko).backendChanged(o);var u=z(o,Ke)[z(o,Ye)];if(u.instance.setup(),u.skipDispatchOnTransition)return;var p=null;try{p=a.constructor(a.type,a)}catch(h){p=document.createEvent("Event"),p.initEvent(a.type,a.bubbles,a.cancelable)}(c=a.target)===null||c===void 0||c.dispatchEvent(p)}}}),ji.set(this,{writable:!0,value:function(a,l,c,u){return z(o,Ke)[z(o,Ye)].instance[a](l,c,u)}}),Io.set(this,{writable:!0,value:function(a,l,c,u){var p="".concat(a,"_").concat(l),h=z(o,ji).call(o,a,l,c,u);return z(o,nr)[p]={func:a,args:[l,c,u],unsubscribe:h},function(){z(o,nr)[p].unsubscribe(),delete z(o,nr)[p]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);Nr(this,ko,new Hu),Nr(this,Ke,{}),Nr(this,Bt,[]),n.backends.forEach(function(i){var a=z(o,Bu).call(o,r,e,i);z(o,Ke)[a.id]=a,z(o,Bt).push(a)}),Nr(this,Ye,z(this,Bt)[0].id),Nr(this,nr,{})};bt(Fi,"isSetUp",!1);var Eo=function(r,e,n){return new Fi(r,e,n)};s();var Vr=function(r,e){return{event:r,check:e}};s();var Ui=Vr("touchstart",function(t){var r=t;return r.touches!==null&&r.touches!==void 0}),Fm=Vr("dragstart",function(t){return t.type.indexOf("drag")!==-1||t.type.indexOf("drop")!==-1}),Um=Vr("mousedown",function(t){return t.type.indexOf("touch")===-1&&t.type.indexOf("mouse")!==-1}),Gi=Vr("pointerdown",function(t){var r=t;return r.pointerType=="mouse"});s();var _o=S(w());var Uu=(0,_o.createContext)(null);s();var Lo=S(w()),Ku=S(zp());s();s();var $u=S(w());s();var qu=S(w());s();var qi=function(r,e){return{x:r.x-e.x,y:r.y-e.y}},Gm=function(r){var e=r.getInitialClientOffset(),n=r.getInitialSourceClientOffset();return e===null||n===null||e.x===void 0||e.y===void 0?{x:0,y:0}:qi(e,n)},Gu=function(r,e){var n=r.getClientOffset();if(n===null)return null;if(!e.current||!e.current.getBoundingClientRect)return qi(n,Gm(r));var o=e.current.getBoundingClientRect(),i={x:o.width/2,y:o.height/2};return qi(n,i)};var qm=function(r){var e="translate(".concat(r.x,"px, ").concat(r.y,"px)");return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:e,WebkitTransform:e}},Do=function(){var r=(0,qu.useRef)(null),e=Oo(function(n){return{currentOffset:Gu(n,r),isDragging:n.isDragging(),itemType:n.getItemType(),item:n.getItem(),monitor:n}});return!e.isDragging||e.currentOffset===null?{display:!1}:{display:!0,itemType:e.itemType,item:e.item,style:qm(e.currentOffset),monitor:e.monitor,ref:r}};s();var Xu=S(w()),dn=(0,Xu.createContext)(void 0);function Xm(t,r){if(t==null)return{};var e=$m(t,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(e[n]=t[n]))}return e}function $m(t,r){if(t==null)return{};var e={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(e[o]=t[o]);return e}var Xi=function(r){var e=Do();if(!e.display)return null;var n=e.display,o=Xm(e,["display"]),i;return"children"in r&&typeof r.children=="function"?i=r.children(o):"children"in r?i=r.children:i=r.generator(o),$u.default.createElement(dn.Provider,{value:o},i)};s();var zr=S(w());function Ym(t,r){return Zm(t)||Jm(t,r)||Qm(t,r)||Km()}function Km(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qm(t,r){if(!!t){if(typeof t=="string")return Yu(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Yu(t,r)}}function Yu(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Jm(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var e=[],n=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),l;!(n=(l=a.next()).done)&&(e.push(l.value),!(r&&e.length===r));n=!0);}catch(c){o=!0,i=c}finally{try{!n&&a.return!=null&&a.return()}finally{if(o)throw i}}return e}}function Zm(t){if(Array.isArray(t))return t}var $i=function(){var r=(0,zr.useState)(!1),e=Ym(r,2),n=e[0],o=e[1],i=(0,zr.useContext)($n);return(0,zr.useEffect)(function(){var a,l=i==null||(a=i.dragDropManager)===null||a===void 0?void 0:a.getBackend(),c={backendChanged:function(p){o(p.previewEnabled())}};return o(l.previewEnabled()),l.previewsList().register(c),function(){l.previewsList().unregister(c)}},[i,i.dragDropManager]),n};var eg=function(r){var e=$i(),n=(0,Lo.useContext)(Uu);if(!e)return null;var o=Lo.default.createElement(Xi,r);return n!==null?(0,Ku.createPortal)(o,n):o};eg.Context=dn;s();s();s();var tg=S(w());s();s();s();s();s();var Ct;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Ct||(Ct={}));s();var ng={Left:1,Right:2,Center:4},og={Left:0,Center:1,Right:2};function Mo(t){return t.button===void 0||t.button===og.Left}function Qu(t){return t.buttons===void 0||(t.buttons&ng.Left)===0}function Ao(t){return!!t.targetTouches}s();var ig=1;function Ju(t){var r=t.nodeType===ig?t:t.parentElement;if(!!r){var e=r.getBoundingClientRect(),n=e.top,o=e.left;return{x:o,y:n}}}function ag(t,r){if(t.targetTouches.length===1)return pn(t.targetTouches[0]);if(r&&t.touches.length===1&&t.touches[0].target===r.target)return pn(t.touches[0])}function pn(t,r){return Ao(t)?ag(t,r):{x:t.clientX,y:t.clientY}}s();function Zu(t,r,e,n){return Math.sqrt(Math.pow(Math.abs(e-t),2)+Math.pow(Math.abs(n-r),2))}function ed(t,r,e,n,o){if(!o)return!1;for(var i=Math.atan2(n-r,e-t)*180/Math.PI+180,a=0;a<o.length;++a)if((o[a].start==null||i>=o[a].start)&&(o[a].end==null||i<=o[a].end))return!0;return!1}s();var Yi=function(){var t=!1;try{addEventListener("test",function(){},Object.defineProperty({},"passive",{get:function(){return t=!0,!0}}))}catch(r){}return t}();s();function sg(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function td(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lg(t,r,e){return r&&td(t.prototype,r),e&&td(t,e),t}function rd(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var nd=function(){function t(r,e){sg(this,t),rd(this,"args",void 0),rd(this,"context",void 0),this.args=r,this.context=e}return lg(t,[{key:"delay",get:function(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}},{key:"scrollAngleRanges",get:function(){return this.args.scrollAngleRanges}},{key:"getDropTargetElementsAtPoint",get:function(){return this.args.getDropTargetElementsAtPoint}},{key:"ignoreContextMenu",get:function(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}},{key:"enableHoverOutsideTarget",get:function(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}},{key:"enableKeyboardEvents",get:function(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}},{key:"enableMouseEvents",get:function(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}},{key:"enableTouchEvents",get:function(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}},{key:"touchSlop",get:function(){return this.args.touchSlop||0}},{key:"delayTouchStart",get:function(){var e,n,o,i;return(e=(n=(o=this.args)===null||o===void 0?void 0:o.delayTouchStart)!==null&&n!==void 0?n:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&e!==void 0?e:0}},{key:"delayMouseStart",get:function(){var e,n,o,i;return(e=(n=(o=this.args)===null||o===void 0?void 0:o.delayMouseStart)!==null&&n!==void 0?n:(i=this.args)===null||i===void 0?void 0:i.delay)!==null&&e!==void 0?e:0}},{key:"window",get:function(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}},{key:"document",get:function(){var e;if((e=this.context)!==null&&e!==void 0&&e.document)return this.context.document;if(this.window)return this.window.document}},{key:"rootElement",get:function(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}}]),t}();var fn;function cg(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function od(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ug(t,r,e){return r&&od(t.prototype,r),e&&od(t,e),t}function Q(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var mn=(fn={},Q(fn,Ct.mouse,{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"}),Q(fn,Ct.touch,{start:"touchstart",move:"touchmove",end:"touchend"}),Q(fn,Ct.keyboard,{keydown:"keydown"}),fn),Ki=function(){function t(r,e,n){var o=this;cg(this,t),Q(this,"options",void 0),Q(this,"actions",void 0),Q(this,"monitor",void 0),Q(this,"sourceNodes",void 0),Q(this,"sourcePreviewNodes",void 0),Q(this,"sourcePreviewNodeOptions",void 0),Q(this,"targetNodes",void 0),Q(this,"_mouseClientOffset",void 0),Q(this,"_isScrolling",void 0),Q(this,"listenerTypes",void 0),Q(this,"moveStartSourceIds",void 0),Q(this,"waitingForDelay",void 0),Q(this,"timeout",void 0),Q(this,"dragOverTargetIds",void 0),Q(this,"draggedSourceNode",void 0),Q(this,"draggedSourceNodeRemovalObserver",void 0),Q(this,"lastTargetTouchFallback",void 0),Q(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&Ju(a)}),Q(this,"handleTopMoveStartCapture",function(i){!Mo(i)||(o.moveStartSourceIds=[])}),Q(this,"handleMoveStart",function(i){Array.isArray(o.moveStartSourceIds)&&o.moveStartSourceIds.unshift(i)}),Q(this,"handleTopMoveStart",function(i){if(!!Mo(i)){var a=pn(i);a&&(Ao(i)&&(o.lastTargetTouchFallback=i.targetTouches[0]),o._mouseClientOffset=a),o.waitingForDelay=!1}}),Q(this,"handleTopMoveStartDelay",function(i){if(!!Mo(i)){var a=i.type===mn.touch.start?o.options.delayTouchStart:o.options.delayMouseStart;o.timeout=setTimeout(o.handleTopMoveStart.bind(o,i),a),o.waitingForDelay=!0}}),Q(this,"handleTopMoveCapture",function(){o.dragOverTargetIds=[]}),Q(this,"handleMove",function(i,a){o.dragOverTargetIds&&o.dragOverTargetIds.unshift(a)}),Q(this,"handleTopMove",function(i){if(o.timeout&&clearTimeout(o.timeout),!(!o.document||o.waitingForDelay)){var a=o.moveStartSourceIds,l=o.dragOverTargetIds,c=o.options.enableHoverOutsideTarget,u=pn(i,o.lastTargetTouchFallback);if(!!u){if(o._isScrolling||!o.monitor.isDragging()&&ed(o._mouseClientOffset.x||0,o._mouseClientOffset.y||0,u.x,u.y,o.options.scrollAngleRanges)){o._isScrolling=!0;return}if(!o.monitor.isDragging()&&o._mouseClientOffset.hasOwnProperty("x")&&a&&Zu(o._mouseClientOffset.x||0,o._mouseClientOffset.y||0,u.x,u.y)>(o.options.touchSlop?o.options.touchSlop:0)&&(o.moveStartSourceIds=void 0,o.actions.beginDrag(a,{clientOffset:o._mouseClientOffset,getSourceClientOffset:o.getSourceClientOffset,publishSource:!1})),!!o.monitor.isDragging()){var p=o.sourceNodes.get(o.monitor.getSourceId());o.installSourceNodeRemovalObserver(p),o.actions.publishDragSource(),i.cancelable&&i.preventDefault();var h=(l||[]).map(function(F){return o.targetNodes.get(F)}).filter(function(F){return!!F}),v=o.options.getDropTargetElementsAtPoint?o.options.getDropTargetElementsAtPoint(u.x,u.y,h):o.document.elementsFromPoint(u.x,u.y),x=[];for(var C in v)if(!!v.hasOwnProperty(C)){var O=v[C];for(x.push(O);O;)O=O.parentElement,O&&x.indexOf(O)===-1&&x.push(O)}var I=x.filter(function(F){return h.indexOf(F)>-1}).map(function(F){return o._getDropTargetId(F)}).filter(function(F){return!!F}).filter(function(F,H,ne){return ne.indexOf(F)===H});if(c)for(var V in o.targetNodes){var B=o.targetNodes.get(V);if(p&&B&&B.contains(p)&&I.indexOf(V)===-1){I.unshift(V);break}}I.reverse(),o.actions.hover(I,{clientOffset:u})}}}}),Q(this,"_getDropTargetId",function(i){for(var a=o.targetNodes.keys(),l=a.next();l.done===!1;){var c=l.value;if(i===o.targetNodes.get(c))return c;l=a.next()}}),Q(this,"handleTopMoveEndCapture",function(i){if(o._isScrolling=!1,o.lastTargetTouchFallback=void 0,!!Qu(i)){if(!o.monitor.isDragging()||o.monitor.didDrop()){o.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),o._mouseClientOffset={},o.uninstallSourceNodeRemovalObserver(),o.actions.drop(),o.actions.endDrag()}}),Q(this,"handleCancelOnEscape",function(i){i.key==="Escape"&&o.monitor.isDragging()&&(o._mouseClientOffset={},o.uninstallSourceNodeRemovalObserver(),o.actions.endDrag())}),this.options=new nd(n,e),this.actions=r.getActions(),this.monitor=r.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ct.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ct.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ct.keyboard)}return ug(t,[{key:"profile",value:function(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}},{key:"document",get:function(){return this.options.document}},{key:"setup",value:function(){var e=this.options.rootElement;!e||(A(!t.isSetUp,"Cannot have two Touch backends at the same time."),t.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){var e=this.options.rootElement;!e||(t.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(e,n,o,i){var a=Yi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(l){var c=mn[l][n];c&&e.addEventListener(c,o,a)})}},{key:"removeEventListener",value:function(e,n,o,i){var a=Yi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(l){var c=mn[l][n];c&&e.removeEventListener(c,o,a)})}},{key:"connectDragSource",value:function(e,n){var o=this,i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",i),function(){o.sourceNodes.delete(e),o.removeEventListener(n,"start",i)}}},{key:"connectDragPreview",value:function(e,n,o){var i=this;return this.sourcePreviewNodeOptions.set(e,o),this.sourcePreviewNodes.set(e,n),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDropTarget",value:function(e,n){var o=this,i=this.options.rootElement;if(!this.document||!i)return function(){};var a=function(c){if(!(!o.document||!i||!o.monitor.isDragging())){var u;switch(c.type){case mn.mouse.move:u={x:c.clientX,y:c.clientY};break;case mn.touch.move:u={x:c.touches[0].clientX,y:c.touches[0].clientY};break}var p=u!=null?o.document.elementFromPoint(u.x,u.y):void 0,h=p&&n.contains(p);if(p===n||h)return o.handleMove(c,e)}};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,n),function(){o.document&&(o.targetNodes.delete(e),o.removeEventListener(o.document.body,"move",a))}}},{key:"getTopMoveStartHandler",value:function(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}},{key:"installSourceNodeRemovalObserver",value:function(e){var n=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(function(){e&&!e.parentElement&&(n.resurrectSourceNode(),n.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}}]),t}();Q(Ki,"isSetUp",void 0);var id=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Ki(r,e,n)};function No(t){return ad.createElement(Mu,{backend:Eo,options:dg},t.children)}var dg={backends:[{id:"html5",backend:zl,transition:Gi},{id:"touch",backend:id,options:{enableMouseEvents:!0,delayMouseStart:100,delayTouchStart:250},transition:Ui}]};s();var Pt=S(w());W();function sd(){let{isDragging:t,item:r,currentOffset:e}=Oo(i=>({item:i.getItem(),currentOffset:i.getClientOffset(),isDragging:i.isDragging()})),[,n]=P(fg),[,o]=P($);return Pt.useEffect(()=>{t?window.document.body.classList.add("dragging"):window.document.body.classList.remove("dragging")},[t]),!t||!(r!=null&&r.previewLabel)?null:Pt.createElement(ft,null,Pt.createElement(m,{style:[f.directionRow,f.alignCenter,n.dragAndDropPreview,pg(e)],pointerEvents:"none"},r.previewIcon?Pt.createElement(m,{style:[d.Margin.mediumRight]},Pt.createElement(R[r.previewIcon],{size:T.ICON_S,style:o.textInsideColor})):null,Pt.createElement(m,null,Pt.createElement(G,{style:[o.Label,o.textInsideColor]},r.previewLabel||"Drop to insert"))))}function pg(t){if(!t)return{display:"none"};let{x:r,y:e}=t;return{transform:[{translateX:r},{translateY:e}]}}var fg=D.create({dragAndDropPreview:t=>g({position:"absolute",paddingHorizontal:d.large,paddingVertical:d.small,backgroundColor:t.colors.primary.main,borderRadius:T.RADIUS_L,zIndex:300},t.shadows.base)});s();function ld(t,r,e=void 0){switch(r){case"light":case"dark":return k(g({},t),{color:r});case"none":return t;case"bold":return k(g({},t),{color:ds(e||$t.PRIMARY)});default:fr(r)}}var Qi=1,Ji={none:D.create({spaceHeader:t=>k(g({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),{zIndex:1}),separator:{}}),light:D.create({spaceHeader:t=>k(g({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.pop),{zIndex:1}),separator:t=>({width:Qi,height:40,backgroundColor:t.colors.border.main})}),dark:D.create({spaceHeader:t=>k(g({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),{zIndex:1}),separator:t=>({width:Qi,height:40,backgroundColor:t.colors.border.main})}),bold:D.create({spaceHeader:t=>k(g({borderBottomWidth:1,borderBottomColor:t.colors.primary.main,backgroundColor:t.colors.primary.main},t.shadows.base),{zIndex:1}),separator:t=>({width:Qi,height:40,backgroundColor:t.colors.text.main})})};s();var gn=S(w());function cd(t){let{navigate:r}=te(),e=It(),{spaces:n}=Or(),o=Ee(),i=gn.useRef(new Set);return gn.useEffect(()=>{let a=n.filter(l=>{var c;return za(l)&&((c=Pn(l.edits))==null?void 0:c.user)===o.uid});i.current.forEach(l=>{if(a.some(u=>u.key===l))return;i.current.delete(l);let c=n.find(u=>u.key===l);c?e.notifyOrUpdate({id:c.key,title:`"${c.title}" created`,details:"Space successfully duplicated.",kind:"success",icon:R.Duplicate,closeable:!0,timeout:5e3,onOpen:()=>{r({screen:{type:"space",space:c.key}})}}):e.close(l)}),a.forEach(l=>{i.current.has(l.key)||(i.current.add(l.key),e.notifyOrUpdate({id:l.key,title:`Copying content to "${l.title}"\u2026`,details:"Hang tight. This process may take a few seconds, up to a few minutes, depending on the number of pages and files.",kind:"default",icon:pt,closeable:!0,timeout:0,onOpen:()=>{r({screen:{type:"space",space:l.key}})}}))})},[n]),gn.useEffect(()=>()=>{i.current.forEach((a,l)=>{e.close(l)})},[]),null}s();var ud=S(w());W();function dd(t){return ud.createElement(G,g({},t))}s();var _e=S(w());W();var Cd=S(Td());function jo(t){let r=_e.useRef(null),[e,n]=xe(Al),{medias:o,currentIndex:i}=e,a=()=>{n({medias:[],currentIndex:0})},l=()=>{n(p=>k(g({},p),{currentIndex:Math.max(p.currentIndex-1,0)}))},c=()=>{n(p=>k(g({},p),{currentIndex:Math.min(p.currentIndex+1,p.medias.length-1)}))},u=p=>{n(h=>k(g({},h),{currentIndex:p}))};return Ln({opened:o.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},r),Rr(o.length?{Left:()=>l(),Right:()=>c()}:{},"all",[n,!o.length]),o.length?_e.createElement(ft,{ref:r},_e.createElement(m,{style:Hr.imagesZoonPortal},_e.createElement(Cd.default,{imageUrls:o.map(p=>({url:p.url})),index:i,renderIndicator:p=>_e.createElement(m,{style:Hr.indactor},_e.createElement(m,{style:Hr.indicatorElement}),_e.createElement(m,{style:[Hr.indicatorElement,f.alignCenter,f.justifyContentCenter]},_e.createElement(G,{style:Hr.indicatorText},`${p}/${o.length}`)),_e.createElement(m,{style:[Hr.indicatorElement,f.alignEnd,f.justifyContentCenter]},_e.createElement(ee,{icon:R.X,defaultTextStyle:{color:$t.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>_e.createElement(ee,{icon:R.ChevronLeft,defaultTextStyle:{color:$t.WHITE},onPress:()=>l()}),renderArrowRight:()=>_e.createElement(ee,{icon:R.ChevronRight,defaultTextStyle:{color:$t.WHITE},onPress:()=>c()}),onChange:p=>u(p),onCancel:()=>a(),enableSwipeDown:!0}))):null}var Hr=ge.create({imagesZoonPortal:{position:"absolute",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:$t.WHITE}});s();var jt=S(w());function Pd(t){let{children:r}=t,[e,n]=jt.useState(!1);return jt.useEffect(()=>{n(!0)},[]),e?jt.createElement(jt.Fragment,null,r):null}s();var yn=S(w());function Rd(t){let{children:r,statusCode:e}=t;return yn.createElement(Ga,{render:({staticContext:n})=>(n&&(n.statusCode=e),yn.createElement(yn.Fragment,null,r))})}s();var De=S(w());W();var kg=Cn("app:crash");function sr(t){let{children:r}=t,e=De.useCallback((n,o,i)=>{kg.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,o),ie({type:"crash",sentryEvent:i})},[]);return De.createElement(Ea,{fallback:n=>De.createElement(Ig,g({},n)),onError:e,beforeCapture:Eg},r)}function Ig(t){let{eventId:r}=t,[,e]=P(_g),n=he(),o=()=>{Ia({eventId:r})},i=()=>{window.location.reload()};return De.useEffect(()=>{let a=document.querySelector(".gitbook-splashscreen");a==null||a.remove()},[]),De.createElement(m,{style:[e.background]},De.createElement(zn,{title:n("something_wrong"),action:De.createElement(De.Fragment,null,De.createElement(ee,{kind:"primary",size:"medium",onPress:i,style:d.Margin.smallRight},n("reload")),De.createElement(ee,{kind:"secondary",size:"medium",onPress:o},n("let_us_know")))},n("we_have_been_notified")))}function Eg(t){t.setTag("error_category","react-crash")}var _g=D.create({background:t=>({backgroundColor:t.colors.background.main,minHeight:"100vh"})});s();var Qe=S(w());s();var Od=S(w());function aa(t){let[,{open:r}]=Fe(),e=el(),n=Od.useMemo(()=>g({[Pr.PALETTE_OPEN]:()=>r()},e),[r,e]);return Rr(n,["application","editor-selection-collapsed"],[n]),null}s();function xd(t){let r=Ee(),{navigate:e}=te();return Dt(()=>({key:"navigation",title:"Navigation",commands:[{key:"navigation.goToSettings",title:"Go to settings",icon:R.ArrowRight,trigger:()=>{e({overlay:{type:"account",tab:"profile"}})}},{key:"navigation.switchOrganization",title:"Go to organization\u2026",icon:R.ArrowRight,trigger:()=>Dg(r.uid,n=>{e({screen:{type:"home",organization:n.key}})},()=>{ie({type:"organization_open_create",reason:"sidebar_menu"}),e({overlay:{type:"welcome",onlyOrganizations:!0,hash:"sidebar_menu"}})})}]}),[e,r.uid]),null}function Dg(t,r,e){return gt({title:"Search organizations\u2026",groups:[{key:"organizations",commands:()=>{let[n]=ht([gr(t)]);return ht(n.map(i=>xt(i.organization))).filter(Ce).map(i=>({key:i.key,title:i.title,icon:We(Ue,{org:i}),trigger:()=>{r(i)}}))}},{key:"organization-controls",commands:[{key:"create-organization",title:"Create an organization",icon:R.Organization,trigger:()=>{e()}}]}]})}s();var Wo=S(w());function kd(t){let{navigate:r}=te();return Dt(()=>[Mg(r),Lg(r),Ag(r)],[,r]),null}function Lg(t){return{key:"search.content",title:"Search",filters:[Ng,Vg],commands:r=>{if(!sa(r))return[];let e=Tt.read({query:r.query.text,types:r.query.text?["pages","sections"]:["pages"],filters:{pages:Fo(r),sections:Fo(r)},analyticsTags:la(r)});return Gs(e,n=>{if(n.index!=="pages"&&n.index!=="sections")return null;let[[o],i]=Vs([()=>ht([mr(n.object.space)]),()=>Ml({space:n.object.space,revision:n.object.revision})]);if(!o||!i)return null;let a=i.pages[n.object.page];if(!a)return null;let l=a.emoji?We(Sr,{code:a.emoji}):void 0,c={title:o.title||Be,icon:We(Zr,{space:o})};switch(n.index){case"pages":return{key:n.object.objectID,icon:l,label:c,title:n.object.title,subtitle:n.object.description,trigger:()=>{ie(g({type:"palette_open_search_result",index:n.index},r.analyticsContext)),t({screen:{type:"space",space:n.object.space,page:n.object.path}})}};case"sections":return{key:n.object.objectID,icon:l,label:c,title:n.object.title?n.object.title:a.title,subtitle:n.object.title?a.title:void 0,body:n.object.body.split(`
`).filter(Boolean).slice(0,5),trigger:()=>{ie(g({type:"palette_open_search_result",index:n.index},r.analyticsContext)),t({screen:{type:"space",space:n.object.space,page:Xt(i,a.key),hash:n.object.anchor}})}}}}).filter(Ce)}}}function Mg(t){return{key:"search.spaces",title:"Spaces",commands:r=>sa(r)?Tt.read({query:r.query.text,types:["spaces"],filters:{spaces:Fo(r)},analyticsTags:la(r)}).map(n=>n.index!=="spaces"?null:Uo(n,()=>{t({screen:{type:"space",space:n.object.objectID,page:""}}),ie(g({type:"palette_open_search_result",index:n.index},r.analyticsContext))})).filter(Ce):[]}}function Ag(t){return{key:"search.users",title:"Users",commands:r=>sa(r)?Tt.read({query:r.query.text,types:["users"],filters:{users:Fo(r)},analyticsTags:la(r)}).map(n=>n.index!=="users"?null:Uo(n,()=>{ie(g({type:"palette_open_search_result",index:n.index},r.analyticsContext))})).filter(Ce):[]}}var Ng={key:"in",title:"space or organization",commands:t=>Tt.read({query:t.query.text,types:["spaces","organizations"]}).map(e=>Uo(e,n=>{switch(e.index){case"organizations":return Fn(n,"in",{text:e.object.title,value:{organization:e.object.objectID}});case"spaces":return Fn(n,"in",{text:e.object.title,value:{space:e.object.objectID}})}}))},Vg={key:"by",title:"anyone who has edited or created content",commands:t=>Tt.read({query:t.query.text,types:["users"]}).map(e=>{if(e.index!=="users")throw new Error("invalid result");return Uo(e,n=>Fn(n,"by",{text:e.object.displayName,value:e.object.objectID}))})};function sa(t){return Boolean(t.query.text||Object.keys(t.query.filters).length>0)}function Fo(t){let{filters:r}=t.query,e=[];return r.in&&(r.in.value.organization?e.push(`organization:${r.in.value.organization}`):r.in.value.space&&e.push(`space:${r.in.value.space}`)),r.by&&e.push(`editedBy:${r.by.value}`),e.length>0?e.join(" AND "):void 0}function la(t){let{filters:r}=t.query,e=[];return r.in&&r.in.value.space&&e.push({type:"space",space:r.in.value.space}),e}function Uo(t,r){switch(t.index){case"organizations":return{key:t.object.objectID,title:t.object.title,icon:()=>Wo.createElement(Ue,{org:t.object,size:T.ICON_XL}),trigger:r};case"spaces":return{key:t.object.objectID,title:t.object.title,icon:()=>Wo.createElement(Zr,{space:t.object,size:T.ICON_XL}),trigger:r};case"users":return{key:t.object.objectID,title:t.object.displayName,icon:()=>Wo.createElement(Mt,{user:t.object,size:T.ICON_XL}),trigger:r}}}s();var Id=S(w());function Go(t){let[r,{close:e,setQuery:n}]=Fe(),o=Cr(),i=_n(1e3);return tl(a=>{if(!a||!!a.position){typeof r<"u"&&(i.cancel(),e());return}a.query.text!==r&&i(()=>n(a.query.text))}),Id.useEffect(()=>{if(typeof r<"u"&&!o.opened){o.open(),o.typeQuery(r);return}},[o,r]),null}function Ed(t){let{screen:r}=_t();return r.type!=="back_office"?Qe.createElement(Qe.Fragment,null,Qe.createElement(kd,null),Qe.createElement(aa,null),Qe.createElement(xd,null),Qe.createElement(Go,null)):Qe.createElement(Qe.Fragment,null,Qe.createElement(pl,null),Qe.createElement(aa,null))}s();var He=S(w());W();s();var Re=S(w());W();s();var Pe=S(w());s();var Je=S(w());W();function _d(t){let{onClose:r}=t,[,e]=P(zg),n=xl();return Je.createElement(xs,{title:"Help and Feedback",onClose:r,size:"small"},Je.createElement(m,{style:[e.cardsWrapper]},Je.createElement(m,{style:e.actionCard},Je.createElement(Et,{kind:"blank",url:"https://docs.gitbook.com/resources/keyboard-shortcuts"},Je.createElement(R.EnterKey,{style:d.Margin.smallRight}),"Keyboard shortcuts")),Je.createElement(m,{style:e.actionCard},Je.createElement(Et,{kind:"blank",url:"https://docs.gitbook.com/"},Je.createElement(R.Page,{style:d.Margin.smallRight}),"Read the docs")),Je.createElement(m,{style:e.actionCard},Je.createElement(Et,{kind:"blank",onPress:()=>n()},Je.createElement(R.Send,{style:d.Margin.smallRight}),"Contact support"))))}var zg=D.create({actionCard:t=>({flexBasis:"100%",marginBottom:d.small,borderWidth:1,borderColor:t.colors.border.main,borderRadius:4,padding:d.small}),cardsWrapper:{flexDirection:"column"}});function Dd(t){let[r,e]=Pe.useState(null),{signOut:n}=kl(),{navigate:o}=te(),i=Ee(),l=vr().color==="light",c=Pe.useMemo(()=>({key:"settings",commands:()=>{let[v]=ht([gr(i.uid)]);return[...ht(v.map(C=>xt(C.organization))).map((C,O)=>{let I=v[O];return!C||!kt(I.role,"admin-profile")?null:{key:`settings.${C.key}`,title:`${C.title} Settings`,icon:We(Ue,{org:C}),trigger:()=>{o({overlay:{type:"org_settings",organization:C.key,tab:"profile"}})}}}).filter(Ce),{key:"settings.personal",title:"Personal Settings",icon:We(Mt,{user:i,squared:!0}),trigger:()=>{o({overlay:{type:"account",tab:"profile"}})}}]}}),[i.uid,o]),u=Pe.useMemo(()=>({key:"theme",commands:[{key:"theme.switch",icon:l?R.ThemeDark:R.ThemeLight,title:`Switch to ${l?"dark":"light"} mode`,keywords:["theme","dark","light"],trigger:()=>{let v=es(i.uid),x=l?"dark":"light";v.set({theme:x},{merge:!0}),ie({type:"account_edit_theme",theme:x})}}]}),[i.uid,l]),p=Pe.useMemo(()=>({key:"account",commands:[{key:"account.help",icon:R.HelpCircle,title:"Help & Feedback",trigger:()=>{e("help")}},{key:"account.signout",icon:R.Leave,title:"Sign Out",trigger:()=>{n()}}]}),[]),h=Pe.useMemo(()=>gt({controlled:!0,variants:l?{color:"light"}:{color:"dark"},groups:[c,u,p]}),[l,c,u,p]);return Dt([u,p],[u,p]),Pe.createElement(Pe.Fragment,null,Pe.createElement(Un,{testID:"sidebar.settingsButton",icon:R.Settings,size:"large",kind:"grey",rounded:!0,palette:h}),Pe.createElement(ks,null,r==="help"?Pe.createElement(ve,{theme:l?{color:"light"}:{color:"dark"}},Pe.createElement(_d,{onClose:()=>{e(null)}})):null))}s();var we=S(w());W();function Ld(t){let r=we.useRef(null);return we.createElement(Cs,{ref:r,wrapper:_s,anchor:({ref:e,opened:n,toggle:o})=>we.createElement(As,{ref:e,testID:"sidebar.createButton",icon:R.Plus,kind:"primary",rounded:!0,onPress:o,animatedAngle:45,active:n})},we.createElement(Es,null,we.createElement(Hg,null)))}function Hg(t){let{navigate:r}=te(),e=lo(),n=Dn();return we.createElement(Hs,null,e.map(([o,i])=>we.createElement(jg,{key:o.key,organization:o,membership:i})),we.createElement(Bg,null),we.createElement(Bs,null),we.createElement(Vn,{icon:R.Organization,onPress:()=>{n.close(),ie({type:"organization_open_create",reason:"sidebar_menu"}),r({overlay:{type:"welcome",onlyOrganizations:!0,hash:"sidebar_menu"}})}},"Create organization"))}function Bg(t){let r=Ee(),e=Dn(),{createSpace:n}=en({user:r.uid}),o=async()=>{e.close(),n()},i=wt(Mt,{user:r,size:20,squared:!0},[r]);return we.createElement(Vn,{icon:i,onPress:o},"New ",we.createElement(G,{style:yr.Bold},"Personal")," Space")}function jg(t){let{organization:r}=t,e=Dn(),{createSpace:n}=en({organization:r.key}),o=async()=>{e.close(),n&&n()},i=wt(Ue,{org:r,size:20},[r]);return we.createElement(Vn,{disabled:!n,title:n?null:`Insufficient permission to
create spaces in this organization`,icon:i,onPress:o},"New ",we.createElement(G,{style:yr.Bold},r.title)," Space")}function Md(t){let{compact:r}=Re.useContext(Ie),e=Re.createElement(Fg,null),n=Re.createElement(m,{style:[f.flex1,r?d.Margin.mediumBottom:f.alignCenter]},Re.createElement(Ld,null));return Re.createElement(m,{style:[...r?[f.alignCenter,f.justifyContentEnd,f.flex1,d.Padding.smallHorizontal,d.Margin.mediumVertical]:[d.Padding.mediumHorizontal,d.Margin.mediumVertical]]},Re.createElement(m,{style:[...r?[f.directionColumn]:[f.directionRow,f.alignCenter,f.flex1]]},r?Re.createElement(Re.Fragment,null,n,e):Re.createElement(Re.Fragment,null,e,n),Re.createElement(m,{style:r?d.Margin.smallTop:null},Re.createElement(Wg,null))))}var Wg=vi(Dd,t=>k(g({},t),{color:"dark"})),Fg=vi(ql,t=>k(g({},t),{color:"dark"}));s();var lr=S(w());W();var Ad=T.L,Ug=M.createResponsiveComponent(Hn);function Nd(t){let{compact:r}=lr.useContext(Ie),[,e]=P(Gg),[,{open:n}]=Fe();return lr.createElement(M.View,{style:[e.sidebarHeader,f.directionRow,f.alignCenter,f.justifyContentCenter,!r&&d.Padding.mediumHorizontal],mobileStyle:"hidden",desktopStyle:"visible"},lr.createElement(m,{style:[f.flex1,r&&f.alignCenter]},lr.createElement(ee,{testID:"sidebar.findButton",icon:R.Search,size:"medium",kind:"sidebar_secondary",style:r?null:e.sidebarButton,alignIcons:"end",rightIcon:r?void 0:()=>lr.createElement(Ug,{tabletStyle:"hidden",desktopStyle:"visible",shortcut:Pr.PALETTE_OPEN,kind:"primary"}),onPress:()=>n()},r?null:"Quick find")))}var Gg=D.create({sidebarHeader:t=>({height:Ad,maxHeight:Ad}),sidebarButton:{paddingRight:4}});s();var ae=S(w());s();var cr=S(w());W();s();var be=S(w());W();function Br(t){let{onPress:r,active:e=!1,indent:n=0,onToggle:o,href:i}=t,[,a]=P(Vd),l=In();return be.createElement(oe.TouchableOpacity,{href:i,onPress:r,style:[a.sidebarMenuItem,e&&a.sidebarMenuItemActive,{paddingLeft:d.medium+n*d.medium-(o?d.medium/4:0)}],hoverStyle:e?null:a.sidebarMenuItemToggleHovered},be.createElement(ve,{theme:{color:"dark"}},be.createElement(qg,k(g({},t),{topLevelTheme:l.color}))))}function qg(t){let{icon:r,children:e,topLevelTheme:n,active:o=!1,buttons:i=[],buttonsVisibility:a="active",opened:l,onToggle:c}=t,[,u]=P($),[,p]=P(Vd),v=br()==="mobile";return be.createElement(be.Fragment,null,c?be.createElement(oe.TouchableOpacity,{onPress:x=>{x.preventDefault(),c()},style:[r&&d.Margin.smallRight,p.sidebarMenuItemToggle],hoverStyle:p.sidebarMenuItemToggleHovered},l?be.createElement(R.ChevronDown,{size:T.ICON_S,style:o?u.text:u.textMuted}):be.createElement(R.ChevronRight,{size:T.ICON_S,style:o?u.text:u.textMuted})):null,r?be.createElement(m,null,be.createElement(r,{size:T.ICON_M,style:o?u.text:u.textMuted})):null,be.createElement(m,{style:[f.flex1,c&&!r?p.textLineWithToggle:d.Padding.smallLeft]},be.createElement(Qt,{style:[u.Label,o?[u.Medium,u.text]:u.textMid]},e)),i.length>0?be.createElement(oe.View.Child,{style:[f.directionRow,f.alignCenter],hoverStyle:p.sidebarMenuItemButtonActive,inactiveStyle:v||a==="active"&&o||a==="always"?p.sidebarMenuItemButtonActive:p.sidebarMenuItemButtonInactive},be.createElement(ve,{theme:{color:n}},i.map((x,C)=>be.createElement(m,{key:C,style:[C>0&&d.Margin.smallLeft]},x)))):null)}var Vd=D.create({sidebarMenuItem:{flexDirection:"row",alignItems:"center",height:T.S,paddingVertical:d.small/4,paddingHorizontal:d.medium,marginBottom:1},sidebarMenuItemActive:t=>g({backgroundColor:t.colors.sidebar.activeItem},kn.Medium),sidebarMenuItemToggle:{padding:d.small/2,borderRadius:T.RADIUS_M},sidebarMenuItemToggleHovered:{backgroundColor:"rgba(0,0,0,0.1)"},sidebarMenuItemButtonInactive:{display:"none",opacity:0},sidebarMenuItemButtonActive:{display:"flex",opacity:1},textLineWithToggle:{paddingLeft:d.small-(T.ICON_M-T.ICON_S)}});s();var pe=S(w());W();var Xg=oe.createInteractiveComponent(Qt);function qo(t){let{title:r,titleTarget:e,icon:n,children:o,details:i,buttons:a=[]}=t,{compact:l}=pe.useContext(Ie),[,c]=P(Yg),{getNavigationLinkProps:u}=te();return pe.createElement(m,{style:[c.borderTop,d.Padding.mediumVertical]},pe.createElement(ve,{theme:{color:"dark"}},pe.createElement(m,{style:[d.Margin.smallHorizontal,pe.Children.count(o)>0?d.Margin.smallBottom:{},!l&&i?[c.detailsBox,d.Padding.smallVertical]:null]},pe.createElement(m,{style:[f.directionRow,f.alignCenter,d.Padding.smallHorizontal]},n?pe.createElement(n,{size:T.XS}):null,l?null:pe.createElement(pe.Fragment,null,pe.createElement(m,{style:[n&&d.Margin.smallLeft,f.flex1,f.directionRow,f.alignCenter]},pe.createElement($g,g({style:f.flex1},u(e)),r)),a.length>0?pe.createElement(m,{style:[f.directionRow,f.alignCenter]},a.map((p,h)=>pe.createElement(m,{key:h,style:[h>0&&d.Margin.smallLeft]},p))):null)),l?null:i)),o)}function $g(t){let o=t,{children:r}=o,e=dr(o,["children"]),[,n]=P($);return pe.createElement(oe.TouchableOpacity,g({},e),pe.createElement(Xg.Child,{style:[n.Body,n.text],activeStyle:n.textSidebarPrimary},r))}var Yg=D.create({borderTop:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1}),detailsBox:t=>({backgroundColor:t.colors.sidebar.activeItem,borderColor:t.colors.sidebar.inputBorder,borderWidth:1,borderRadius:T.RADIUS_L})});s();var Ze=S(w());s();var Xo=S(w());W();function jr(t){let{owner:r,children:e,onDropHover:n,style:o}=t,[i,a]=Ci(r,{collect:l=>({hovered:l.isOver({shallow:!0})&&l.canDrop()})});return Xo.createElement(Nn,{ref:a,style:o,onDropHover:n,dropHovered:i.hovered},e)}function Wr(t){let{accept:r,owner:e,at:n}=t,[o,i]=Ci(e,{at:n,accept:[r],collect:a=>({hovered:a.isOver()&&a.canDrop()})});return Xo.createElement(m,{style:Kg.collectionDropLine},Xo.createElement(Ms,{ref:i,dropHovered:o.hovered,position:"top"}))}var Kg=ge.create({collectionDropLine:{position:"relative",zIndex:10}});function $o(t){let{space:r,active:e,previousOrderIndex:n,nextOrderIndex:o,indent:i}=t,a=Ze.useRef(null),[l,c]=Bl(r),u=Cr(a),p=Rn(r),h=Va(r),{getNavigationLinkProps:v}=te(),x=v({screen:{type:"space",space:r.key,organization:"organization"in r?r.organization:void 0,changeRequest:void 0,page:"/"}}),[,C]=$l(r),[O,I]=Yl(r,{collect:H=>({hovered:H.isOver({shallow:!0})&&H.canDrop()})}),V=()=>{x.onPress()},B=wt(Zr,{space:r,withBackground:!1},[r]),F=Ze.createElement(Ze.Fragment,null,c,Ze.createElement(Br,k(g({icon:B,active:e},x),{indent:i,buttonsVisibility:u.opened?"always":"hover",buttons:l.commands.length?[Ze.createElement(ee,{ref:a,icon:R.MoreVertical,kind:"sidebar_blank",size:"small",active:u.opened,onPress:H=>{H.preventDefault(),u.open(gt({controlled:!0,groups:[l]}))}})]:void 0}),r.title||Be));return h?F:Ze.createElement(Nn,{ref:I,dropHovered:O.hovered,onDropHover:V},Ze.createElement(Wr,{accept:"space",owner:p,at:{before:n,after:r.orderIndex}}),Ze.createElement(An,{ref:C},F),Ze.createElement(Wr,{accept:"space",owner:p,at:{before:r.orderIndex,after:o}}))}function zd(t){let{indent:r=0,screenSpace:e}=t,[n,o]=xe(Jn("trash")),{spaces:i}=Dl(),[,a]=P(Qg),l=()=>{o(!n)};return i.length===0?null:cr.createElement(m,{style:[a.borderTop,d.Padding.mediumTop]},cr.createElement(Br,{opened:n,onToggle:l,indent:r,icon:R.Trashcan,onPress:l},"Trash"),n?cr.createElement(cr.Fragment,null,i.map(c=>cr.createElement($o,{key:c.key,space:c,indent:r,active:c.key===e}))):null)}var Qg=D.create({borderTop:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1})});s();var Le=S(w());W();var Hd="@content:hide-personal-user-cta";function Bd(t){let[r,e]=Le.default.useState(!1),[,n]=P(Jg),{compact:o}=Le.default.useContext(Ie),[,i]=P($);if(bi.get(Hd)||r)return null;function l(){bi.set(Hd,!0),e(!0)}return Le.default.createElement(ve,{theme:{color:"dark"}},Le.default.createElement(m,{style:[n.wrapper]},Le.default.createElement(m,{style:[f.alignCenter,d.Margin.mediumHorizontal,d.Padding.mediumVertical,o?null:[n.detailsBox,d.Padding.smallVertical]]},Le.default.createElement(m,{style:n.iconWrapperStyle},Le.default.createElement(m,{style:n.iconInner},Le.default.createElement(R.Bulb,{size:T.ICON_M,style:n.iconStyle}))),Le.default.createElement(m,{style:[f.alignCenter,d.Padding.smallHorizontal,d.Margin.smallTop]},Le.default.createElement(m,{style:d.Margin.mediumBottom},Le.default.createElement(G,{style:[n.detailsText,i.Label,i.Medium,i.textSidebarStandout]},"Want to collaborate with others, unlock advanced custom branding, and explore new ways of sharing content?")),Le.default.createElement(Lt,{kind:"upgrade",size:"medium",to:{overlay:{type:"welcome",onlyOrganizations:!0,hash:"personal_user_cta"}},onPress:()=>{ie({type:"organization_open_create",reason:"personal_user_cta"})},style:d.Margin.smallBottom},"Create an organization"),Le.default.createElement(ee,{size:"small",defaultTextStyle:i.textMuted,onPress:l},"Dismiss")))))}var Jg=D.create({iconWrapperStyle:t=>({flexGrow:0,flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:1,borderColor:"transparent",height:T.BUTTON_M,backgroundColor:t.colors.upgrade.main,borderRadius:100,width:T.BUTTON_M,paddingHorizontal:0,marginTop:-((T.BUTTON_M+d.medium)/2)}),iconInner:{flexShrink:1},iconStyle:t=>({color:t.colors.upgrade.textInside}),detailsText:{textAlign:"center"},wrapper:t=>({borderTopColor:t.colors.sidebar.itemBorder,borderTopWidth:1,paddingTop:d.large+T.ICON_M/2,paddingBottom:d.large}),detailsBox:t=>({backgroundColor:t.colors.sidebar.activeItem,borderColor:t.colors.sidebar.inputBorder,borderWidth:1,borderRadius:T.RADIUS_L})});s();var Me=S(w());W();s();var Yo=S(w());function ca(t){let{createSpace:r,createCollection:e}=en(t),{navigate:n}=te(),o=Qn(t);return Yo.useMemo(()=>({key:"owner",commands:[r?{key:"new_space",icon:R.Space,title:"New Space",trigger:async()=>{await r()}}:null,e?{key:"new_collection",icon:R.Collection,title:"New Collection",trigger:async()=>{await e()}}:null,t.organization&&kt(o,"add-guests")?{key:"invite_members",icon:R.UserPlus,title:"Invite Members",trigger:async()=>{n({overlay:{type:"org_invite",organization:t.organization}})}}:null].filter(Ce)}),[r,e])}function Ko(t){let o=t,{owner:r}=o,e=dr(o,["owner"]),n=ca(r);return n.commands.length?Yo.createElement(Un,g({palette:()=>gt({controlled:!0,groups:[n]}),icon:R.Plus,size:"small"},e)):null}function Wd(t){let{organization:r,children:e}=t,n=Qn({organization:r.key}),[{result:o}]=Kn([Qa(r.key)]),i=ul(r,o),a=i===null,l={organization:r.key},c=kt(n,"admin-billing"),u=wt(Ue,{org:r},[r]);return Me.createElement(jr,{owner:l},Me.createElement(qo,{title:r.title,titleTarget:{screen:{type:"home",organization:r.key}},icon:u,buttons:[Me.createElement(rl,{command:"navigation.switchOrganization",size:"small",title:"Go to organization",icon:R.ChevronDown}),Me.createElement(Ko,{owner:l,title:`Create content in ${r.title}`})],details:o&&((o==null?void 0:o.status)==="trialing"&&!!o.trialEnd&&c||a)?Me.createElement(Zg,{organization:r,billing:o,canAdminBilling:c,featuresSet:i}):void 0},e))}function Zg(t){var c;let{organization:r,billing:e,canAdminBilling:n,featuresSet:o}=t,[,i]=P($),a=((c=e.trialEnd)==null?void 0:c.toDate())||new Date(0),l=Math.floor((a.getTime()-Date.now())/(24*60*60*1e3));return js(a),Me.createElement(ve,{theme:{color:"dark"}},Me.createElement(m,{style:[f.alignCenter,d.Padding.smallHorizontal,d.Margin.mediumTop]},Me.createElement(m,{style:[d.Margin.smallBottom]},e.status==="trialing"?Me.createElement(G,{style:[jd.detailsText,i.Label,i.text]},"Your trial ends"," ",Me.createElement(G,{style:[i.Bold]},l===0?"today":l===1?"tomorrow":`in ${l} days`),". Upgrade to keep access to premium features."):Me.createElement(G,{style:[jd.detailsText,i.Label,i.text]},"Your organization has been ",Me.createElement(G,{style:[i.Bold]},"disabled"),"."," ",n?"Upgrade to keep access to premium features.":"Contact your organization administrator to upgrade and keep access to premium features.")),n?Me.createElement(Lt,{kind:"upgrade",size:"medium",to:{overlay:{type:"org_settings",organization:r.key,tab:"plans",hash:"sidebar_cta"}},onPress:()=>{ie(is(r.key,{type:"organization_open_upgrade",currentFeaturesSet:o,reason:"sidebar_cta"}))},style:[d.Margin.smallTop,d.Margin.smallBottom]},"Upgrade Now"):null))}var jd=ge.create({detailsText:{textAlign:"center"}});s();var Qo=S(w());function Fd(t){let{children:r}=t,e=Ee(),n={user:e.uid},o=wt(Mt,{user:e,squared:!0},[e]);return Qo.createElement(jr,{owner:n},Qo.createElement(qo,{title:"Personal",titleTarget:{screen:{type:"home",organization:void 0}},icon:o,buttons:[Qo.createElement(Ko,{owner:n,title:"Create personal content"})]},r))}s();var et=S(w());function Ud(t){let{collection:r,active:e,indent:n,previousOrderIndex:o,nextOrderIndex:i,children:a}=t,l=Rn(r),c=k(g({},l),{collection:r.key}),u=et.useRef(null),p=Cr(u),h=ca(c),[v,x]=Hl(r),[C,O]=xe(Jn(r.key)),[,I]=Xl(r),V=()=>{O(!0)},{getNavigationLinkProps:B}=te(),F=B({screen:{type:"collection",collection:r.key,organization:"organization"in r?r.organization:void 0}});return et.createElement(jr,{owner:c,onDropHover:V},et.createElement(Wr,{accept:"collection",owner:l,at:{before:o,after:r.orderIndex}}),et.createElement(An,{ref:I},x,et.createElement(Br,k(g({active:e},F),{opened:C,onToggle:()=>O(!C),buttonsVisibility:p.opened?"always":"hover",buttons:[h.commands.length||v.commands.length?et.createElement(ee,{ref:u,onPress:H=>{H.preventDefault(),p.open(gt({controlled:!0,groups:[h.commands.length?h:null,v.commands.length?v:null].filter(Ce)}))},icon:R.MoreVertical,kind:"sidebar_blank",size:"small",active:p.opened}):null],indent:n}),r.title)),C?et.createElement(et.Fragment,null,a):et.createElement(Wr,{accept:"collection",owner:l,at:{before:r.orderIndex,after:i}}))}s();var Gd=S(w());function qd(t){let r=Or(),e=hr(Nl);Gd.useEffect(()=>{if(!(t!=null&&t.type))return;let n=t.type==="space"?eh(r,t.space):ua(r,t.collection);n.length>0&&e(o=>{let i=o;return n.forEach(a=>{i=i[a]?i:k(g({},i),{[a]:!0})}),i})},[r,e,t==null?void 0:t.type,t==null?void 0:t.space,t==null?void 0:t.collection])}function ua(t,r){let e=t.collections.find(n=>n.key===r);return e?e.collection?[...ua(t,e.collection),e.collection]:[]:[]}function eh(t,r){let e=t.spaces.find(n=>n.key===r);return e!=null&&e.collection?[...ua(t,e.collection),e.collection]:[]}function Xd(t){let{screenSpace:r,screenCollection:e}=t,{compact:n}=ae.useContext(Ie),o=Ee();return qd((r?{type:"space",space:r}:void 0)||(e?{type:"collection",collection:e}:void 0)),n?null:ae.createElement(ae.Fragment,null,ae.createElement(Fd,null,ae.createElement(da,k(g({},t),{owner:{user:o.uid}}))),ae.createElement(ae.Suspense,{fallback:null},ae.createElement(th,g({},t))),ae.createElement(zd,{screenSpace:r}))}function th(t){let{screenOrganization:r}=t,{permissions:e}=Or(),n=Object.keys(e.organizations),[o,i]=ae.useState(void 0),[a]=Zt([o&&n.includes(o)?xt(o):null]);return ae.useEffect(()=>{r&&n.includes(r)?i(r):o||i(n[0]||null)},[r,n.length]),Gn(r&&(a==null?void 0:a.key)===r?a.title:r?"":"Personal"),o===void 0?null:a?ae.createElement(Wd,{organization:a},ae.createElement(da,k(g({},t),{owner:{organization:a.key}}))):ae.createElement(Bd,null)}function da(t){let{indent:r=0,owner:e,screenSpace:n,screenCollection:o}=t,{spaces:i,collections:a}=_l(e,{includeOrphans:!0});return ae.createElement(ae.Fragment,null,i.map((l,c)=>{let u=c>0?i[c-1]:null,p=i[c+1];return ae.createElement($o,{key:l.key,space:l,active:n===l.key,previousOrderIndex:u?u.orderIndex:void 0,nextOrderIndex:p?p.orderIndex:void 0,indent:r})}),a.map((l,c)=>{let u=c>0?a[c-1]:null,p=a[c+1];return ae.createElement(Ud,{key:l.key,collection:l,active:o===l.key,previousOrderIndex:u?u.orderIndex:void 0,nextOrderIndex:p?p.orderIndex:void 0,indent:r},ae.createElement(da,k(g({},t),{owner:k(g({},e),{collection:l.key}),indent:r+1})))}))}var rh=22;function $d(t){let{screen:r}=t;return He.createElement(nh,{screenOrganization:"organization"in r?r.organization:void 0,screenSpace:r.type==="space"?r.space:void 0,screenCollection:r.type==="collection"?r.collection:void 0})}var nh=He.memo(function(r){let[e,n]=P(oh);return He.createElement(je,{backgroundColor:e.colors.sidebar.background,style:[n.sidebar,f.flex1,f.directionColumn]},cl()?He.createElement(ll,{style:{height:rh}}):null,He.createElement(Nd,null),He.createElement(Ot,{style:[f.flex1]},He.createElement(He.Suspense,{fallback:null},He.createElement(Xd,g({},r)))),He.createElement(Md,null))}),oh=D.create({sidebar:t=>({borderRightColor:t.colors.sidebar.itemBorder,borderRightWidth:1})});s();var j=S(w());W();function Yd(t){let{screen:r}=t,[e,n]=P($),[,o]=P(pa),{compact:i}=j.useContext(Ie),a=hr(Vl);return j.useEffect(()=>{i&&a(!0)},[i,a]),Gn("Settings"),j.createElement(je,{style:[f.directionColumn,f.flex1,o.wrapper,d.Padding.medium],backgroundColor:e.colors.background.main},j.createElement(m,{style:[f.directionRow,f.alignCenter]},j.createElement(Lt,{kind:"grey",testID:"settings.closeButton",icon:R.ChevronLeft,to:{overlay:null},size:"large",title:"Return to app"}),j.createElement(m,{style:[f.flex1,d.Margin.smallLeft]},j.createElement(G,{style:[n.Heading2,n.text]},"Settings"))),j.createElement(Ot,{style:[f.flex1]},j.createElement(j.Suspense,{fallback:j.createElement(ke,{size:"small"})},j.createElement(ih,{screen:r}),j.createElement(ah,{screen:r}))))}function ih(t){let{screen:r}=t,{getNavigationLinkProps:e}=te(),[,n]=P(pa),o=i=>e({current:{type:"account",tab:i}});return j.createElement(mt,{direction:"vertical"},j.createElement(m,{style:[n.personalSettings,d.Padding.mediumVertical]},j.createElement(mt.Tab,k(g({active:r.type==="account"&&r.tab==="profile"},o("profile")),{icon:R.User}),"Account"),j.createElement(mt.Tab,k(g({active:r.type==="account"&&r.tab==="developer"},o("developer")),{icon:R.Code}),"Developer Settings")))}function ah(t){let{screen:r}=t,e=lo();return j.createElement(m,{style:[d.Padding.largeVertical]},e.map(([n,o])=>kt(o.role,"admin-billing")?j.createElement(sh,{key:n.key,screen:r,organization:n}):null))}function sh(t){let{screen:r,organization:e}=t,{getNavigationLinkProps:n}=te(),o=i=>n({current:{type:"org_settings",organization:e.key,tab:i}});return j.createElement(lh,g({icon:j.createElement(Ue,{org:e,size:T.BUTTON_S}),title:e.title,expanded:"organization"in r&&r.organization===e.key},o("profile")),j.createElement(m,{style:[d.Padding.largeLeft]},j.createElement(mt.Tab,k(g({active:r.type==="org_settings"&&r.tab==="profile"&&r.organization===e.key},o("profile")),{icon:R.Organization}),"General"),j.createElement(mt.Tab,k(g({active:r.type==="org_settings"&&r.tab==="members"&&r.organization===e.key},o("members")),{icon:R.Team}),"Members"),j.createElement(mt.Tab,k(g({active:r.type==="org_settings"&&r.tab==="sso"&&r.organization===e.key},o("sso")),{icon:R.Email}),"SSO"),j.createElement(mt.Tab,k(g({active:r.type==="org_settings"&&r.tab==="plans"&&r.organization===e.key},o("plans")),{icon:R.Grid}),"Plans"),e.type!=="legacy-enterprise"?j.createElement(mt.Tab,k(g({active:r.type==="org_settings"&&r.tab==="billing"&&r.organization===e.key},o("billing")),{icon:R.ExternalLink}),"Billing"):null))}function lh(t){let u=t,{icon:r,title:e,children:n,expanded:o}=u,i=dr(u,["icon","title","children","expanded"]),[,a]=P($),[,l]=P(pa),c=oe.useInteractiveComponent(o?R.ChevronDown:R.ChevronRight);return j.createElement(m,{style:[d.Margin.mediumBottom]},j.createElement(oe.TouchableOpacity,g({style:[d.Margin.mediumBottom,d.Padding.smallHorizontal,f.directionRow,f.alignCenter,f.flex1]},i),j.createElement(m,{style:d.Margin.smallRight},r),j.createElement(m,{style:f.flex1},j.createElement(oe.Text.Child,{style:[a.Label,a.text,a.Bold],activeStyle:a.primary},e)),j.createElement(m,{style:d.Margin.smallLeft},j.createElement(c.Child,{size:T.ICON_XS,style:[a.textMid],activeStyle:a.primary}))),o?j.createElement(m,null,j.createElement(mt,{direction:"vertical",style:l.fullWidth},n)):null)}var pa=D.create({fullWidth:{width:"100%"},wrapper:t=>({borderRightColor:t.colors.border.main,borderRightWidth:1}),personalSettings:t=>({width:"100%",borderBottomColor:t.colors.border.main,borderBottomWidth:1})});function ch(){return L.createElement(On,null,L.createElement(sr,null,L.createElement(L.Suspense,{fallback:L.createElement(Kd,null)},L.createElement(No,null,L.createElement(so,null,L.createElement(m,{style:[f.flex1,f.directionColumn]},L.createElement(uh,null,L.createElement(ro,null,L.createElement(Tr,{persist:!0},L.createElement(El,null,L.createElement(ml,null,L.createElement(dh,null),L.createElement(go,null),L.createElement(Ed,null),L.createElement(ol,null),L.createElement(jo,null),L.createElement(sd,null),L.createElement(cd,null))),L.createElement(mh,null))))))))))}function uh(t){let{children:r}=t;return L.useEffect(()=>{let e=document.querySelector(".gitbook-splashscreen");e==null||e.remove()},[]),L.createElement(L.Fragment,null,r)}function dh(){return dc(),$s(),L.createElement(Rl,{Screen:ph,fallback:L.createElement(Kd,null)})}function ph(t){let{screen:r,isOverlay:e=!1}=t;switch(r.type){case"account":case"org_settings":return L.createElement(Si,{sidebar:L.createElement(Yd,{screen:r}),screen:r},L.createElement(gl,{screen:r}));case"account_verification":return L.createElement(Tl,null);case"org_join":return L.createElement(Sl,{screen:r});case"org_invite":return L.createElement(wl,{screen:r,isOverlay:e});case"welcome":return L.createElement(yl,{screen:r});case"quickstart":return L.createElement(hl,{screen:r,isOverlay:e});case"back_office":return L.createElement(dl,{screen:r});case"legacy_account":return L.createElement(Cl,{screen:r});case"legacy_space":return L.createElement(Pl,{screen:r});default:return L.createElement(Si,{sidebar:L.createElement($d,{screen:r}),sidebarCollapsable:!0,screen:r},L.createElement(fh,{screen:r}))}}function fh(t){let{screen:r}=t;switch(r.type){case"root":return L.createElement(vl,{screen:r});case"home":return L.createElement(bl,{screen:r});case"space":return L.createElement(fl,{screen:r});case"collection":return L.createElement(nl,{screen:r});default:return null}}function Kd(){let[t]=P();return L.createElement(je,{backgroundColor:t.colors.background.muted,style:[f.flex1]},L.createElement(ke,{size:"xlarge"}))}function mh(){let t=_t();return ic(t.screen.type==="space"&&(t.screen.changeRequest||t.screen.revision)?"bottom-right-with-bar":"bottom-right"),null}s();var Wt=S(w());s();var Te=S(w());s();var Y=S(w());W();s();var Oe=S(w());W();var{TOC_DESKTOP_WIDTH:gh}=qn,hh=M.createResponsiveComponent(dt),yh=oe.createInteractiveComponent(hh),fa=gh-d.large-d.large;function Zo(t){let{space:r,collection:e,mobileStyle:n,desktopStyle:o}=t,[,i]=P($),{getNavigationLinkProps:a}=te(),l=(e?(e==null?void 0:e.publishedTitle)||(e==null?void 0:e.title):r.publishedTitle||r.title)||Be,c=l.length>14,u=c?2:1,p=e?e.logoURL:r.logoURL;return Oe.createElement(yh,k(g({style:[f.directionRow,f.alignCenter],mobileStyle:n,desktopStyle:o},a({screen:{space:r.key,page:""}})),{testID:"public.headerHomeLink"}),p?Oe.createElement(M.View,{style:[f.flex1,f.directionRow,f.alignCenter,Jo.headerDesktop],mobileStyle:Jo.logoMobile,desktopStyle:Jo.logoDesktop},Oe.createElement(M.View,{desktopStyle:"visible",mobileStyle:"hidden"},Oe.createElement(xi,{src:Kr(p,{height:40,fit:"contain"}),bestHeight:40,maxWidth:fa})),Oe.createElement(M.View,{desktopStyle:"hidden",mobileStyle:"visible"},Oe.createElement(xi,{src:Kr(p,{height:30,fit:"contain"}),bestHeight:30,maxWidth:fa}))):Oe.createElement(m,{style:[Jo.headerDesktop,f.flex1,f.directionRow,f.justifyContentStart,f.alignCenter]},Oe.createElement(m,null,Oe.createElement(M.View,{mobileStyle:"hidden",desktopStyle:"visible"},Oe.createElement(Ti,{content:e||r,renderFor:"public-content",size:T.BUTTON_L,style:[d.Margin.mediumRight]})),Oe.createElement(M.View,{mobileStyle:"visible",desktopStyle:"hidden"},Oe.createElement(Ti,{content:e||r,renderFor:"public-content",size:T.ICON_XL,style:[d.Margin.mediumRight]}))),Oe.createElement(M.Text,{mobileStyle:[i.Heading3],desktopStyle:[c?i.Heading3:i.Heading2]},Oe.createElement(oe.Text.Child,{numberOfLines:u,ellipsizeMode:"tail",accessibilityLabel:l,inactiveStyle:i.text,activeStyle:t.space.headerTheme==="bold"?i.textStandout:i.primary},l))))}var Jo=ge.create({logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:fa}});var{PAGE_BODY_DESKTOP_H_PADDING:vh,getPageOutlineWrapperWidth:bh,getToCWrapperDesktopWidth:Sh}=qn,wh=T.XL,Th=T.L,Ch=M.createResponsiveComponent(ee);function Zd(t){let{space:r}=t,e=Ja(r.headerTheme,r.themeMode),n=In(),o=Y.useMemo(()=>ld(n,e,r.primaryColor),[e,r.primaryColor,n]);return Y.createElement(ve,{theme:o},r.headerTheme==="none"?Y.createElement(M.View,{desktopStyle:"hidden",mobileStyle:"visible"},Y.createElement(Qd,k(g({},t),{headerTheme:e}))):Y.createElement(Qd,k(g({},t),{headerTheme:e})))}function Qd(t){let{space:r,headerTheme:e,revision:n,collection:o,currentPageLayout:i}=t,[,a]=P(Ji[e]),l=wr(xe(xr),Y.useState(!1)),c=i==="docs",u=i==="landing";return Y.createElement(M.View,{desktopStyle:vn.desktopHeight,mobileStyle:vn.mobileHeight,style:[a.spaceHeader,f.directionRow,f.alignCenter]},c?Y.createElement(Ch,{desktopStyle:"hidden",mobileStyle:"visible",icon:R.Menu,style:d.Margin.smallRight,kind:"grey",rounded:!0,title:l.opened?"Hide Table of Content":"Show Table of Content",onPress:l.toggle}):null,Y.createElement(Zo,{space:r,collection:o,mobileStyle:[vn.autoWidth,d.Padding.noneHorizontal,f.justifyContentStart,c?null:d.Margin.smallLeft],desktopStyle:[{width:Sh()},d.Padding.largeHorizontal,f.justifyContentEnd]}),c?Y.createElement(Jd,{headerTheme:e,direction:"Left"}):null,Y.createElement(Rh,{space:r,revision:n}),u?null:Y.createElement(Jd,{headerTheme:e,direction:"Right"}),Y.createElement(Ph,{headerTheme:e}))}function Jd(t){let[,r]=P(Ji[t.headerTheme]);return Y.createElement(M.View,{style:[r.separator,{[`margin${t.direction}`]:-1}],mobileStyle:"hidden",desktopStyle:"visible"})}function Ph(t){let[,{open:r}]=Fe(),e=he();return Y.createElement(M.View,{mobileStyle:vn.autoWidth,desktopStyle:{width:bh()}},Y.createElement(m,{style:[f.flex1,f.alignStart,d.Padding.largeLeft,d.Padding.smallRight]},Y.createElement(M.View,{mobileStyle:"hidden",desktopStyle:"visible"},Y.createElement(ee,{icon:R.SearchPublic,size:"medium",kind:t.headerTheme==="bold"?"default_bold":"default",alignIcons:"end",onPress:r,style:[d.Padding.noneHorizontal]},e("search"))),Y.createElement(M.View,{mobileStyle:"visible",desktopStyle:"hidden"},Y.createElement(ee,{icon:R.SearchPublic,size:"medium",kind:"default",alignIcons:"end",onPress:r,style:[d.Padding.noneHorizontal]}))))}function Rh(t){let{space:r}=t;return Y.createElement(Y.Fragment,null,Y.createElement(M.View,{style:[f.directionRow,f.alignCenter,f.flex1],tabletStyle:"visible",desktopStyle:"hidden"}),Y.createElement(M.View,{style:[f.directionRow,f.alignCenter,f.flex1],tabletStyle:"hidden",desktopStyle:vn.headerLinks},(r.headerLinks||[]).map(e=>e.title?Y.createElement(Y.Suspense,{fallback:null,key:e.title},Y.createElement(Oh,g({title:e.title,contentRef:e.to},t))):null)))}function Oh(t){let{contentRef:r,space:e,revision:n}=t,o=Zn(r,{space:e.key,revision:n.key});return Y.createElement(Et,{url:o.href,onPress:i=>{i.nativeEvent.metaKey||i.nativeEvent.ctrlKey||(i.preventDefault(),o.open())},kind:t.space.headerTheme==="bold"?"bold":"default",sameWebTab:!1,style:[d.Padding.mediumHorizontal,yr.Body,yr.Medium],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:t.title},t.title)}var vn=ge.create({autoWidth:{width:"auto"},headerLinks:{paddingHorizontal:vh-d.medium},mobileHeight:{height:Th},desktopHeight:{height:wh}});s();var ma=S(w());function ei(t){let{children:r,ssrRequestPath:e,ssrRouterContext:n}=t;return n?ma.createElement(qa,{location:e,context:n},r):ma.createElement(ro,null,r)}s();var ti=S(w());function ep(t="https://policies.gitbook.com/privacy/cookies",r=!1){let e=It(),n=he();ti.useEffect(()=>{if(!r)return;let o=!1;if(ls()!==null)return;let i=e.notify({title:n("cookies"),details:n("cookie_prompt",ti.createElement(Et,{url:t},n("cookie_policy"))),timeout:0,icon:R.Cookies,actions:[{label:n("reject_all"),onPress:()=>{o=!0,yi(!1),i()}}],onClose:()=>{o||yi(!0)}})},[])}s();var fe=S(w());s();var Ae=S(w());W();s();var at=S(w());W();function tp(t){let{space:r,revision:e,page:n,analyticsContext:o}=t,i=ss(),[,a]=P($),l=he(),[{result:c,error:u}]=Kn([Oi(r.key,n.key,i)]);if(u)return null;let p=h=>{h!==(c==null?void 0:c.rating)&&(ie(k(g({},o),{type:"public_content_page_feedback_post",rating:h})),La(v=>{sc(v,{space:r.key,page:n.key,revision:e.key,visitorId:i,rating:h,previousRating:c==null?void 0:c.rating})}))};return at.createElement(m,{style:[f.directionRow,f.alignCenter]},at.createElement(m,null,at.createElement(G,{style:[a.Heading4,a.textMuted]},l("was_it_helpful"))),at.createElement(m,{style:[f.directionRow,f.alignCenter]},at.createElement(ga,{tooltip:l("poor_content"),active:(c==null?void 0:c.rating)==="bad",rating:"bad",onPress:p}),at.createElement(ga,{tooltip:l("ok_content"),active:(c==null?void 0:c.rating)==="ok",rating:"ok",onPress:p}),at.createElement(ga,{tooltip:l("excellent_content"),active:(c==null?void 0:c.rating)==="good",rating:"good",onPress:p})))}function ga(t){let{active:r,tooltip:e,rating:n,onPress:o}=t;return at.createElement(Ds,{tooltip:e},(i,a)=>at.createElement(dt,g({ref:a,onPress:()=>o(n),style:[d.Margin.smallLeft],accessibilityLabel:e},i.events),at.createElement(Kl,{active:r,interactive:!0,rating:n,size:T.BUTTON_S})))}s();var st=S(w());W();var ha=30,xh=oe.createInteractiveComponent(Ts);function Fr(t){return st.createElement(Kt,null,st.createElement(kh,g({},t)))}function kh(t){let{space:r,floating:e}=t,[,n]=P(Ih),[,o]=P($),i=he(),a=`https://${pr.homepage.domain}/?utm_source=content&utm_medium=trademark&utm_campaign=${r.key}`,l=()=>{ie(xn(r,{type:"public_content_click_trademark"}))};return st.createElement(m,{style:e&&n.wrapper},st.createElement(m,{style:e&&[d.Padding.noneHorizontal]},st.createElement(oe.TouchableOpacity,{style:[f.directionRow,f.alignCenter,...e?[n.trademarkFloating,d.Padding.smallVertical,d.Padding.mediumHorizontal,d.Padding.xlargeLeft,d.Margin.mediumTop]:[n.tradeMarkDefault]],onPress:l,href:a,target:"_blank"},st.createElement(m,null,st.createElement(xh.Child,{size:ha,style:o.textMuted,activeStyle:o.primary})),st.createElement(m,{style:[d.Padding.smallLeft]},st.createElement(oe.Text.Child,{style:[o.Label,o.textMuted],activeStyle:o.primary},i("powered_by",st.createElement(dd,{style:o.Bold},"GitBook")))))))}var Ih=D.create({wrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},tradeMarkDefault:t=>({backgroundColor:"transparent"}),trademarkFloating:t=>({backgroundColor:t.colors.background.standout})});function rp(t){let{space:r,revision:e,page:n,analyticsContext:o}=t,[,i]=P($),[,a]=P(Eh),l=he(),c=Pn(n.edits),u=qt(n),p=!!c,h=r.hasPublicFeedback,v=!r.hideTrademark&&(u==="editorial"||u==="landing");if(!p&&!h)return null;let x=Ae.createElement(Pd,null,Ae.createElement(Ae.Suspense,{fallback:null},Ae.createElement(tp,{space:r,revision:e,page:n,analyticsContext:o})));return Ae.createElement(m,{style:[d.Padding.largeTop,d.Margin.largeTop,a.footer]},Ae.createElement(M.View,{tabletStyle:f.directionColumn,desktopStyle:f.directionRow,style:[f.alignCenter,f.justifySpaceBetween]},p?Ae.createElement(M.View,{tabletStyle:d.Margin.mediumBottom,style:v?[]:[f.flex1]},Ae.createElement(G,{style:[i.textMuted,i.Label]},l("last_modified",Ae.createElement(Ws,{value:c.updatedAt.toDate(),onlyDate:!1})))):null,v?Ae.createElement(Fr,{space:r,floating:!1}):null,h?Ae.createElement(M.View,{tabletStyle:v?"hidden":"visible",desktopStyle:"visible"},x):null),v&&h?Ae.createElement(M.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[f.directionRow,f.flex1,f.justifyContentCenter,d.Margin.largeTop]},x):null)}var Eh=D.create({footer:t=>({borderTopColor:t.colors.border.mid,borderTopWidth:1})});s();var Ur=S(w());s();var lt=S(w());W();s();var _h=750,Dh=d.xxlarge,np=_h+2*Dh,ri=300,Lh=220;function op(t=0){return t+ri+np+Lh}function ip(t){let r=`(100vw - ${np}px) / 2 - ${t||0}px`;return`max(${ri}px, calc(${r}))`}s();var bn=S(w());W();s();var Se=S(w());W();s();var tt=S(w());W();var Mh=M.createResponsiveComponent(oe.TouchableOpacity),Ah=oe.createInteractiveComponent(M.View),ap=tt.forwardRef(function(r,e){let{leftIcon:n,icon:o,rightIcon:i,kind:a="primary",children:l,button:c,active:u=!1,onPress:p,textStyle:h,href:v}=r,x=oe.useInteractiveState(),[,C]=P(Nh),[,O]=P($),I=a==="primary"?O.textMid:O.textMuted,V=u?O.primary:I;return tt.createElement(p?Mh:Ah,k(g({ref:e},x.events),{style:[C.tocMenuItem,d.Padding.mediumHorizontal,u&&C.tocMenuItemActive],hoverStyle:p&&!u?C.tocMenuItemHovered:null,mobileStyle:C.tocMenuItemMobile,desktopStyle:C.tocMenuItemDesktop,onPress:p,href:v&&p?v:void 0}),n?tt.createElement(m,{style:[d.Margin.mediumRight]},tt.createElement(n,{size:T.ICON_M,style:[V,h]})):null,o?tt.createElement(m,{style:[d.Margin.mediumRight]},tt.createElement(o,{size:T.ICON_M,style:[V,h]})):null,tt.createElement(G,{style:[f.flex1,d.Padding.smallVertical,a==="group"?O.Heading4:O.Label,V,h]},l),c?tt.createElement(m,{style:[f.directionRow,f.alignCenter]},c):null,i?tt.createElement(m,{style:C.tocMenuItemRightIcon},tt.createElement(i,{size:T.ICON_M,style:O.textMuted})):null)}),Nh=D.create({tocMenuItem:{flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,minHeight:T.S},tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:t=>({backgroundColor:t.colors.background.standout}),tocMenuItemActive:t=>({backgroundColor:t.colors.background.main,borderColor:t.colors.border.main}),tocMenuItemRightIcon:{marginLeft:d.small,marginRight:(T.S-T.ICON_M)/2}});function ya(t){return Se.createElement(Se.Suspense,{fallback:Se.createElement(sp,g({},t))},Se.createElement(Vh,g({},t)))}function Vh(t){let{revision:r,treePage:e}=t,{page:n}=e,o=Zn(n.kind==="link"?n.ref:void 0,{space:r.space,revision:r.key});return Se.createElement(sp,k(g({},t),{contentRef:o}))}function sp(t){let{revision:r,treePage:e,parent:n,currentPage:o,contentRef:i}=t,{page:a}=e,{getNavigationHref:l,navigateToPage:c}=jl(),u=o?o.key:null,p=u===a.key,h=!!u&&Na(r,a.key,u),[v,x]=Se.useState(h),[,C]=P(zh),O=I=>{I.isDefaultPrevented()||I.nativeEvent.metaKey||I.nativeEvent.ctrlKey||(I.preventDefault(),a.kind==="sheet"?c(r,a.key):a.kind==="link"&&(i==null||i.open()))};return Se.useEffect(()=>{h&&x(!0)},[h]),Se.createElement(m,{style:[a.kind==="group"&&d.Margin.mediumVertical]},Se.createElement(ap,{kind:a.kind==="group"?"group":!n||n.kind==="group"?"primary":"secondary",icon:a.emoji?We(Sr,{code:a.emoji}):void 0,rightIcon:a.kind==="link"?i?i.secondaryIcon:pt:void 0,active:p,onPress:a.kind==="group"?void 0:O,href:(()=>a.kind==="link"?i==null?void 0:i.href:l(r,a.key))(),button:e.pages.length>0&&a.kind==="sheet"?Se.createElement(ee,{size:"small",icon:v?R.ChevronDown:R.ChevronRight,onPress:I=>{I.preventDefault(),x(!v)}}):null},a.title),(v||a.kind==="group")&&e.pages.length>0?Se.createElement(m,{style:[C.tocItemChildren,a.kind==="group"&&d.Margin.noneLeft]},e.pages.map((I,V)=>Se.createElement(ya,k(g({key:I.renderKey},t),{treePage:I,isLastPage:V===e.pages.length-1,parent:a}))),a.kind==="group"?null:Se.createElement(m,{style:C.tocItemChildrenLine})):null)}var zh=D.create({tocItemChildren:{position:"relative",marginLeft:d.medium},tocItemChildrenLine:t=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:t.colors.border.main})});function ni(t){let{showingTrademark:r,revision:e}=t,n=bn.useMemo(()=>Ba(e.pages,e.rootPages),[e]);return bn.createElement(Ot,{style:f.flex1,contentContainerStyle:[d.Padding.mediumVertical,r?Hh.scrollviewWithTrademark:null]},n.map((o,i)=>bn.createElement(ya,k(g({key:o.renderKey},t),{treePage:o,isLastPage:i===n.length-1}))))}var Hh=ge.create({scrollviewWithTrademark:{paddingBottom:d.medium+ha+2*d.medium}});s();var q=S(w());W();function oi(t){let{space:r,collection:e,collectionSpaces:n}=t,o=[q.createElement(Bh,{key:"mobile-closing-bar"})];return r.headerTheme==="none"&&o.push(q.createElement(jh,{space:r,collection:e,key:"space-header"})),n&&(e==null?void 0:e.publishingType)==="variants"&&o.push(q.createElement(Wh,{key:"variant-switch",currentVariant:r,collection:e,variants:n})),q.createElement(q.Fragment,null,o)}function Bh(){let[,t]=P(ii),r=wr(xe(xr),q.useState(!1));return q.createElement(M.View,{style:[t.mobileClosingBar,f.justifyContentEnd,f.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},q.createElement(ee,{icon:R.X,size:"large",kind:"default",onPress:()=>r.closeMobile(),style:[f.alignSelfCenter,d.Padding.smallHorizontal]}))}function jh(t){let{space:r,collection:e}=t,[,n]=P(ii),[,{open:o}]=Fe();return q.createElement(M.View,{style:[n.spaceTitleWrapper,f.justifyContentCenter,f.directionRow],mobileStyle:"hidden",desktopStyle:"visible"},q.createElement(Zo,{space:r,collection:e,desktopStyle:f.flex1}),q.createElement(ee,{icon:R.SearchPublic,size:"large",kind:"default",alignIcons:"end",onPress:o,style:[f.alignSelfCenter,d.Margin.smallHorizontal]}))}function Wh(t){let{currentVariant:r,collection:e,variants:n}=t,[,o]=P(ii),[i,a]=q.useState(!1),l=q.useCallback(()=>{a(c=>!c)},[a]);return q.createElement(q.Fragment,null,q.createElement(ee,{rightIcon:i?R.ChevronDown:R.ChevronRight,icon:R.Variants,onPress:l,alignIcons:"end",style:[d.Margin.smallVertical,d.Padding.mediumHorizontal]},q.createElement(Qt,null,r.publishedTitle||r.title||Be)),q.createElement(m,{style:o.separator}),i?q.createElement(q.Fragment,null,q.createElement(q.Suspense,{fallback:q.createElement(ke,{size:"small"})},q.createElement(Ot,{style:o.variantScrollView},n.map(c=>q.createElement(Fh,{key:c.key,selected:c.key===r.key,main:c.key===e.primarySpace,variant:c,onPress:()=>{a(!1)}})))),q.createElement(m,{style:[o.separator,d.Margin.largeTop]})):null)}function Fh(t){let{variant:r,selected:e,main:n,onPress:o}=t,i=he(),{getNavigationLinkProps:a}=te(),[,l]=P($),[,c]=P(ii);return q.createElement(oe.TouchableOpacity,g({style:[c.tab,e&&c.selectedTab],activeStyle:c.hoverTab},a({screen:{space:r.key,page:""}},o)),q.createElement(m,{style:[f.flex1]},q.createElement(Qt,{style:[l.textMid,l.Label]},r.publishedTitle||r.title||Be)),n?q.createElement(m,{style:d.Margin.smallLeft},q.createElement(G,{style:[c.mainBadge,l.textMuted]},i("main"))):null)}var ii=D.create({separator:t=>({height:1,backgroundColor:t.colors.border.main}),selectedTab:t=>({borderLeftColor:t.colors.primary.main,borderLeftWidth:2}),hoverTab:t=>({backgroundColor:t.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:T.BUTTON_M,lineHeight:T.BUTTON_M,borderRadius:0,paddingHorizontal:d.medium},mainBadge:k(g({fontFamily:cs,fontSize:us.xxsmall,lineHeight:T.BUTTON_M},kn.Bold),{textTransform:"uppercase",letterSpacing:1}),spaceTitleWrapper:t=>({height:T.L,borderBottomWidth:1,borderBottomColor:t.colors.border.main}),mobileClosingBar:t=>g({height:T.L,borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.main},t.shadows.base),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});function lp(t){let{space:r}=t,[,e]=P(Uh),{desktopSidebarWidth:n}=lt.useContext(Ie),o=lt.useMemo(()=>({[op(n)]:"visible"}),[n]),i=!r.hideTrademark;return lt.createElement(M.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:o,style:[e.topcDesktopWrapper,f.directionRow,{width:ip(n)},f.justifyContentEnd]},lt.createElement(m,{style:[e.tocDesktop,f.directionColumn]},lt.createElement(m,{style:[f.flex1,d.Padding.largeLeft]},lt.createElement(oi,g({},t)),lt.createElement(ni,k(g({},t),{showingTrademark:i}))),i?lt.createElement(Fr,{floating:!0,space:r}):null))}var Uh=D.create({topcDesktopWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.main,backgroundColor:t.colors.background.mid}),tocDesktop:{width:ri}});s();var Ne=S(w());W();var Gh=M.createResponsiveComponent(Gt.View),qh=M.createResponsiveComponent(Gt.createAnimatedComponent(dt));function up(t){let{currentPage:r,space:e}=t,n=wr(xe(xr),Ne.useState(!1)),{sidebarMobileLeft:o,showOverlay:i}=Fs(n),[a,l]=P(Xh);Ne.useEffect(()=>{n.close()},[r==null?void 0:r.key]);let c=!e.hideTrademark;return Ne.createElement(ft,null,Ne.createElement(Gh,{style:[l.sidebar,{left:o}],mobileStyle:"visible",desktopStyle:"hidden"},Ne.createElement(m,{style:[f.directionColumn,f.flex1]},Ne.createElement(m,{style:f.flex1},Ne.createElement(oi,g({},t)),Ne.createElement(m,{style:[d.Padding.mediumLeft,f.flex1,l.sidebarWrapper]},Ne.createElement(ni,k(g({},t),{showingTrademark:c})))),c?Ne.createElement(Fr,{floating:!0,space:e}):null)),Ne.createElement(qh,{style:[l.screenOverlay,{backgroundColor:o.interpolate({inputRange:[-Bn.MOBILE_WIDTH,0],outputRange:[a.colors.backdrop.transparent,a.colors.backdrop.background]})}],mobileStyle:i?"visible":"hidden",desktopStyle:"hidden",onPress:n.closeMobile}))}var cp=10,Xh=D.create({sidebar:t=>({backgroundColor:t.colors.background.mid,width:Bn.MOBILE_WIDTH,maxWidth:"100%",flexDirection:"row",position:"absolute",top:0,bottom:0,zIndex:cp}),sidebarWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.main}),sidebarCloseButton:{position:"absolute",width:T.BUTTON_M,height:T.BUTTON_M,top:(T.M-T.BUTTON_M)/2,left:Bn.MOBILE_WIDTH+T.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:cp-1}});function dp(t){return Ur.createElement(Ur.Fragment,null,Ur.createElement(lp,g({},t)),Ur.createElement(up,g({},t)))}function pp(t){let{space:r,revision:e,screen:n,analyticsContext:o,collection:i,collectionSpaces:a,assetHostname:l}=t,c=he(),[u,p]=P($h);Xs(r);let[h,v]=Xn(e,n);if(Jt(I=>{I.writeAsync([{type:"meta",name:"description",content:v&&"description"in v?v.description:""},{type:"meta",name:"og:description",content:v&&"description"in v?v.description:""},{type:"meta",name:"og:image",content:r.socialPreviewURL?Kr(r.socialPreviewURL,{height:640,width:1280,fit:"contain"}):Kh(r,e,v)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),r.visibility==="in-collection"?(I.setTitle(v?v.title:c("page_not_found"),(i==null?void 0:i.publishedTitle)||(i==null?void 0:i.title)||Be),I.writeAsync([{type:"meta",name:"robots",content:(i==null?void 0:i.visibility)!=="public"?"noindex, nofollow":"index"}])):(I.setTitle(v?v.title:c("page_not_found"),r.publishedTitle||r.title||Be),I.writeAsync([{type:"meta",name:"robots",content:r.visibility!=="public"?"noindex, nofollow":"index"}]))}),Yn(v?as(r,v,{screen:"space",visibility:r.visibility,pageLayout:qt(v)}):null,[r.key,v==null?void 0:v.key]),h)return fe.default.createElement(Ol,{to:{screen:h}});if(!v&&n.page){let[I]=ht([Ha(r.key,n.page)]);if(I&&e.pages[I.page])return fe.default.createElement(Wl,{to:Xt(e,I.page)})}let x=qt(v),C=x==="docs",O=x==="docs"||x==="editorial";return fe.default.createElement(fe.default.Fragment,null,fe.default.createElement(Qh,{space:i||r,assetHostname:l}),fe.default.createElement(M.View,{style:[f.flex1],mobileStyle:f.directionColumn,desktopStyle:f.directionRow},C?fe.default.createElement(dp,{space:r,revision:e,currentPage:(v==null?void 0:v.kind)==="sheet"?v:null,analyticsContext:o,collection:i,collectionSpaces:a}):null,fe.default.createElement(je,{style:[p.spacePageBody],backgroundColor:u.colors.background.main},fe.default.createElement(fe.default.Suspense,{fallback:fe.default.createElement(ke,{size:"large"})},v&&v.kind==="sheet"?fe.default.createElement(il,{key:Yh(n,e,v),space:r,changeRequest:void 0,revision:e,page:v,readOnly:!0,withComments:!1,withExpandedComments:!1,withToC:C,withOutline:O,analyticsContext:o,footer:fe.default.createElement(rp,{space:r,revision:e,page:v,analyticsContext:o})}):fe.default.createElement(Rd,{statusCode:404},fe.default.createElement(zn,{title:c("page_not_found"),action:fe.default.createElement(Lt,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:r.key,page:""}}},c("back_to_home"))},c("page_not_found_long")))))))}var $h=D.create({spacePageBody:{flex:1}});function Yh(t,r,e){let n=t.space;return n+=`/${t.changeRequest||"main"}`,n+=`/${r.conflicts?"conflicts":"normal"}`,n+=`/${e.key}`,t.diff&&(n+="/diff"),t.revision&&(n+="/revision"),n}function Kh(t,r,e){let n=e&&r.rootPages[0]!==e.key?`/page/${e.key}`:"",o=`color=${encodeURIComponent(t.primaryColor||"")}&logo=${encodeURIComponent(hi(t.logoURL||t.iconURL||""))}&theme=${encodeURIComponent(t.headerTheme||"")}`;return`https://${pr.firebase.authDomain}/share/space/thumbnail/${t.key}${n}.png?${o}`}function Qh(t){let{space:r,assetHostname:e}=t,n=ns(r,"public-content"),[o]=P(),[i,a]=fe.default.useState(n.iconURL||(n.emoji?`${e}${rs(n.emoji)}`:null));return fe.default.useEffect(()=>{if(i)return;let l=192,c=document.createElement("canvas"),u=c.getContext("2d");if(!u)return;c.width=l,c.height=l,u.fillStyle=o.colors.background.main,u.fillRect(0,0,l,l);let p=.7;u.fillStyle=o.colors.text.main,u.font=`400 ${l*p}px gitbook-content-font`,u.textAlign="center",u.fillText(r.title.slice(0,1),l/2,l*(1-p)/2),a(c.toDataURL("image/png"))},[r.title,a]),Jt(l=>{l.writeAsync([{type:"link",rel:"icon",href:i?hi(i):`${e}/public/images/icon-512.png`}])}),null}s();var rt=S(w());s();var Gr=S(w());s();function fp(t,r){let{navigate:e}=te();Dt(()=>[Jh(t,r,e)],[t,r,e])}function Jh(t,r,e){return{key:"search.content",commands:n=>{if(!n.query.text)return[];let o=Tt.read({query:n.query.text,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:t.key}]});return Zh(r,o).map(({page:i,result:a,sections:l})=>{let c=i.emoji?We(Sr,{code:i.emoji}):void 0;return[{key:i.key,icon:c,title:i.title,subtitle:Aa(r,i.key).filter(u=>u.key!==i.key).map(u=>u.title).join(" \u203A "),trigger:()=>{var u;e({screen:{type:"space",space:r.space,page:Xt(r,i.key),hash:a||(u=l[0])==null?void 0:u.anchor,query:void 0}})}},...l.map(u=>({key:u.objectID,icon:c,title:void 0,subtitle:u.title,body:u.body.split(`
`).filter(Boolean).slice(0,5),trigger:()=>{e({screen:{type:"space",space:r.space,page:Xt(r,i.key),hash:u.anchor,query:void 0}})}}))]}).flat().filter(Ce)}}}function Zh(t,r){let e=new Map;return r.forEach(n=>{if(n.index!=="pages"&&n.index!=="sections")return null;let o=t.pages[n.object.page];if(!o)return null;let i=e.get(o.key)||{sections:[],score:0};n.index==="sections"?(i.sections.push(n.object),i.score+=1):(i.result=n.object,i.score+=3),e.set(o.key,i)}),Array.from(e.entries()).map(([n,{score:o,sections:i,result:a}])=>{let l=t.pages[n];return l?{page:l,score:o,sections:i,result:a}:null}).filter(Ce).sort((n,o)=>o.score-n.score)}function mp(t){let{space:r,revision:e}=t,n=he(),[,{open:o}]=Fe(),i=vr();return fp(r,e),Rr({[Pr.PALETTE_OPEN]:()=>{o()},"/":()=>{o()}},["all"],[]),Gr.createElement(Gr.Fragment,null,Gr.createElement(go,{defaultTitle:n("search_placeholder"),defaultVariant:{color:i.color}}),Gr.createElement(Go,null))}function ai(t){var p;let{space:r,assetHostname:e,collection:n,collectionSpaces:o}=t,{screen:i}=_t();jn();let a=Ll({space:r.key,revision:(i.type==="space"?i.revision:null)||r.revision});if(!a)throw new Error("Revision not found");fc(r);let l=rt.useMemo(()=>xn(r,{}),[r.key,r.organization,r.collection]);if(i.type!=="space"||i.space!==r.key)throw new Error("screen should be the space we render");rt.useEffect(()=>{if(!!r.searchKey)return Il(r.searchKey)},[r.searchKey]),Jt(h=>{h.write({type:"font",font:r.font||"Inter",fontFamilyName:"gitbook-content-font"}),i.revision&&h.write({type:"meta",name:"robots",content:"noindex"})}),ep(r.privacyPolicyURL,(p=r.googleAnalytics)==null?void 0:p.enabled);let[,c]=Xn(a,i),u=qt(c);return rt.createElement(rt.Fragment,null,rt.createElement(Zd,{space:r,revision:a,collection:n,currentPageLayout:u}),rt.createElement(pp,{space:r,revision:a,screen:i,analyticsContext:l,collection:n,collectionSpaces:o,assetHostname:e}),rt.createElement(mp,{space:r,revision:a}),rt.createElement(jo,null))}s();var va=S(w());s();s();function ur(t,r){return t.split(r).slice(1).join(r)}function Sn(t){return t?t.endsWith("/")?t:`${t}/`:""}function gp(t){return r=>{let e=`/${Sn(t.basePath)}`;switch(r.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"quickstart":case"root":case"account_verification":case"welcome":throw new Error(`Cannot navigate to ${r.type} on public content`);case"home":{if(r.organization){let n=er.read({type:"organization",organization:r.organization});e=Jr(n);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let n=er.read({type:"user",user:r.user});e=Jr(n);break}case"collection":{let n=er.read({type:"collection",collection:r.collection});e=Jr(n);break}case"space":{let n=er.read({type:"space",space:r.space});n.hostname===t.hostname&&(!t.basePath||n.pathname.startsWith(t.basePath))?(t.shareLink&&(e+=Sn(t.shareLink)),n.pathname!==t.basePath&&(t.basePath?e+=Sn(ur(n.pathname,Sn(t.basePath))):e+=Sn(n.pathname))):e=Jr(n),e+=ey(r);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:fr(r)}return{pathname:e,hash:r.hash,search:Ka(r)}}}function ey(t){let r="";return t.revision&&(r+=`~/revisions/${t.revision}/`),r+=`${t.page[0]==="/"?t.page.slice(1):t.page}`,t.sideSheet&&(r+=`${r[r.length-1]==="/"?"":"/"}~/${t.sideSheet}`),r}s();var ty=ka==="test";function hp(t,r,e,n=[]){return o=>{let i=o.pathname;t.basePath?i=ur(i,t.basePath):t.hostname&&i.indexOf(`/${t.hostname}/`)!==-1&&ty&&(i=ur(i,t.hostname)),t.shareLink&&(i=ur(i,t.shareLink));let a=r;if(!a){let c=n.find(u=>i.startsWith(`/v/${u.path}/`)||i===`/v/${u.path}`);c&&(a=c.key,i=ur(i,`/v/${c.path}`))}if(a||(a=e==null?void 0:e.primarySpace),!a)throw new Error("cannot find current space");let l={type:"space",space:a,page:""};return ry(l,Xa(i)),o.hash&&(l.hash=o.hash.replace(/^#/,"")),g(g({},l),Ya(o))}}function ry(t,r){$a(r,[{path:`/~/revisions/:revision/:page${gi}`,onMatch:e=>{Object.assign(t,{page:e.params.page,revision:e.params.revision})}},{path:"/~/revisions/:revision/",onMatch:e=>{Object.assign(t,{revision:e.params.revision,page:""})}},{path:`/:page${gi}`,onMatch:e=>{Object.assign(t,{page:e.params.page,diff:!1})}},{path:"/",onMatch:e=>{Object.assign(t,{diff:!1,page:""})}}])}function si(t,r,e,n){let o=pc(),i=(0,va.useMemo)(()=>hp(t,r,e,n),[t.hostname,t.basePath,t.shareLink,r,e,n]),a=(0,va.useMemo)(()=>gp(t),[t.hostname,t.basePath,t.shareLink]);return{forceHardNavigation:!o,getNavigationScreenFromLocation:i,getLocationForNavigationScreen:a}}function yp(t){let{collection:r,basePath:e,hostname:n,customToken:o,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:l,shareLink:c,assetHostname:u,preview:p=!1}=t,h=si({hostname:n,basePath:e,shareLink:c},void 0,r,i);if(!p&&r.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return Te.createElement(Qr,{mode:"public-content",preview:p,locale:r.language},Te.createElement(Kt,{primaryColor:r.primaryColor},Te.createElement(sr,null,Te.createElement(ei,{ssrRequestPath:a,ssrRouterContext:l},Te.createElement(Tr,g({persist:!1},h),Te.createElement(Te.Suspense,{fallback:Te.createElement(ke,{size:"large"})},o&&typeof window>"u"?Te.createElement(ke,{size:"large"}):Te.createElement(ny,{collection:r,collectionSpaces:i,assetHostname:u})))))))}function ny(t){let{screen:r}=_t();if(r.type!=="space")throw new Error("screen should be a space");jn();let[e]=Zt([mr(r.space)]);if(!e)throw new Error("the space should exist");return Te.createElement(Qr,{locale:e.language},Te.createElement(Kt,{primaryColor:e.primaryColor},Te.createElement(sr,null,Te.createElement(ai,k(g({},t),{space:e})))))}s();var nt=S(w());function vp(t){let{space:r,ssrRequestPath:e,ssrRouterContext:n,basePath:o,hostname:i,customToken:a,shareLink:l,assetHostname:c,preview:u=!1}=t,p=si({hostname:i,basePath:o,shareLink:l},r.key);return nt.createElement(Qr,{mode:"public-content",preview:u,locale:r.language},nt.createElement(Kt,{primaryColor:r.primaryColor},nt.createElement(sr,null,nt.createElement(ei,{ssrRequestPath:e,ssrRouterContext:n},nt.createElement(Tr,g({persist:!1},p),nt.createElement(nt.Suspense,{fallback:nt.createElement(ke,{size:"large"})},a&&typeof window>"u"?nt.createElement(ke,{size:"large"}):nt.createElement(ai,{space:r,assetHostname:c})))))))}s();var li=S(w());var ba=Cn("preview:child");function bp(t,r){let[e,n]=li.useState(t);return li.useEffect(()=>{!r||(window.addEventListener("message",o=>{if(o.data.source!=="gitbook-preview-parent"||(ba.info("receive message",o.origin,o.data),o.origin!=="http://localhost:5000"&&o.origin!==`https://${pr.firebase.authDomain}`))return;let i=Ma(o.data.payload);ba.debug("update content with",i),n(i),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),ba.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[r]),e}function oy(t){let r="collection"in t?t.collection:t.space,e=bp(r,!!t.preview),n=Za(e.themeMode);return Wt.createElement(On,null,Wt.createElement(ve,{theme:{color:n}},Wt.createElement(ms,{theme:{color:n}},Wt.createElement(No,null,Wt.createElement(so,null,"collection"in t?Wt.createElement(yp,k(g({},t),{collection:e})):Wt.createElement(vp,k(g({},t),{space:e})))))))}s();function Q_(t){t!=null&&t.firestore&&wi.fromJS(t.firestore),t!=null&&t.head&&zs.cache.fromJS(t.head),t!=null&&t.images&&(Us.fromJS(t.images.sizes),ws.fromJS(t.images.uri)),t!=null&&t.contentURLs&&er.fromJS(t.contentURLs),t!=null&&t.contentRefs&&Fl.fromJS(t.contentRefs),t!=null&&t.screenToContentRefs&&Ul.fromJS(t.screenToContentRefs),t!=null&&t.swaggers&&Gl.fromJS(t.swaggers)}s();s();function lD(t){document.readyState==="interactive"||document.readyState==="complete"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}export{ch as a,oy as b,Q_ as c,lD as d};
/** @license React v0.0.0-experimental-4ead6b530
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-MARS745O.min.js.map
